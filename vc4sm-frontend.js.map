{"version":3,"file":"vc4sm-frontend.js","sources":["../vendor/toolkit/packages/app-shell/src/i18n.js","../vendor/toolkit/packages/language-select/src/i18n.js","../vendor/toolkit/packages/language-select/src/language-select.js","../vendor/toolkit/packages/auth/src/i18n.js","../vendor/toolkit/packages/common/notification.js","../vendor/toolkit/packages/common/i18n.js","../vendor/toolkit/packages/common/jsonld.js","../node_modules/event-target-shim/index.js","../vendor/toolkit/packages/auth/src/keycloak.js","../vendor/toolkit/packages/auth/src/util.js","../vendor/toolkit/packages/auth/src/auth-keycloak.js","../vendor/toolkit/packages/auth/src/login-button.js","../vendor/toolkit/packages/app-shell/src/auth-menu-button.js","../vendor/toolkit/packages/notification/src/i18n.js","../vendor/toolkit/packages/notification/src/notification.js","../vendor/toolkit/packages/notification/src/utils.js","../node_modules/path-to-regexp/dist.es2015/index.js","../node_modules/universal-router/module.js","../node_modules/universal-router/generateUrls/module.js","../vendor/toolkit/packages/app-shell/src/router.js","../vendor/toolkit/packages/app-shell/src/build-info.js","../vendor/toolkit/packages/app-shell/src/tugraz-logo.js","../vendor/toolkit/packages/app-shell/src/dbp-app-shell-welcome.js","../vendor/toolkit/packages/matomo/src/matomo.js","../vendor/toolkit/packages/app-shell/src/app-shell.js","../vendor/toolkit/packages/provider/src/provider.js","../src/vc4sm-frontend.js"],"sourcesContent":["import {createInstance} from '@dbp-toolkit/common/i18next.js';\n\nimport de from './i18n/de/translation.json';\nimport en from './i18n/en/translation.json';\n\nconst i18n = createInstance({en: en, de: de}, 'de', 'en');\n\nexport function createI18nInstance () {\n    return i18n.cloneInstance();\n}\n\n/**\n * Dummy function to mark strings as i18next keys for i18next-scanner\n *\n * @param {string} key\n * @returns {string} The key param as is\n */\nexport function i18nKey(key) {\n    return key;\n}","import {createInstance} from '@dbp-toolkit/common/i18next.js';\n\nimport de from './i18n/de/translation.json';\nimport en from './i18n/en/translation.json';\n\nexport const i18n = createInstance({en: en, de: de}, 'de', 'en');","import {html, css} from 'lit-element';\nimport {i18n} from './i18n.js';\nimport * as commonStyles from '@dbp-toolkit/common/styles';\nimport {AdapterLitElement} from \"@dbp-toolkit/provider/src/adapter-lit-element\";\n\n/**\n * Emits a dbp-language-changed event where event.detail.lang is the new selected language\n */\nexport class LanguageSelect extends AdapterLitElement {\n\n    constructor() {\n        super();\n        this._lang = 'de';\n        this.languages = ['de', 'en'];\n\n        // for the i18next scanner\n        i18n.t('de');\n        i18n.t('de-action');\n        i18n.t('en');\n        i18n.t('en-action');\n    }\n\n    _getNextLanguage(lang) {\n        var index = this.languages.indexOf(lang);\n        var next = this.languages[index + 1];\n        if (typeof next === 'undefined')\n            next = this.languages[0];\n        return next;\n    }\n\n    _getPreviousLanguage(lang) {\n        var index = this.languages.indexOf(lang);\n        var prev = this.languages[index - 1];\n        if (typeof prev === 'undefined')\n            prev = this.languages[this.languages.length - 1];\n        return prev;\n    }\n\n    static get properties() {\n        return {\n            lang: {type: String},\n            next: {type: String},\n            languages: {type: Array},\n        };\n    }\n\n    set lang(value) {\n        const oldValue = this.lang;\n        const oldNext = this.next;\n        this._lang = value;\n        this.requestUpdate('lang', oldValue);\n        this.requestUpdate('next', oldNext);\n\n        if (oldValue !== value) {\n            // tell a dbp-provider to update the \"lang\" property\n            this.sendSetPropertyEvent('lang', value);\n\n            // Unlike other cases we use the next language for the translations so that\n            // users not knowing the current language can understand it.\n            // In case of more than two this doesn't make that much sense, but for now..\n            i18n.changeLanguage(this.next);\n        }\n    }\n\n    get lang() {\n        return this._lang;\n    }\n\n    set next(value) {\n        this.lang = this._getPreviousLanguage(value);\n    }\n\n    get next() {\n        return this._getNextLanguage(this.lang);\n    }\n\n    static get styles() {\n        // language=css\n        return [commonStyles.getThemeCSS(),\n            css`\n            :host {\n                display: inline-block;\n            }\n\n            a:hover {\n                background-color: var(--dbp-dark);\n                color: var(--dbp-light);\n                transition: none;\n            }\n\n            a {\n                padding: 0.3em;\n                display: inline-block;\n                text-decoration: none;\n                transition: background-color 0.15s, color 0.15s;\n                color: var(--dbp-dark);\n                border-radius: var(--dbp-border-radius);\n            }\n            `\n        ];\n    }\n\n    onClick(e) {\n        e.preventDefault();\n        this.lang = this.next;\n    }\n\n    render() {\n        var linkTitle = i18n.t(this.next + '-action');\n        return html`\n            <a href=\"#\" title=\"${linkTitle}\" @click=${this.onClick}>${this.next.toUpperCase()}</a>\n        `;\n    }\n}","import {createInstance} from '@dbp-toolkit/common/i18next.js';\n\nimport de from './i18n/de/translation.json';\nimport en from './i18n/en/translation.json';\n\nexport const i18n = createInstance({en: en, de: de}, 'de', 'en');","/**\n * Sends a notification via the event\n *\n * Type can be info/success/warning/danger\n *\n * example options:\n *\n * {\n *   \"summary\": \"Item deleted\",\n *   \"body\": \"Item foo was deleted!\",\n *   \"type\": \"info\",\n *   \"timeout\": 5,\n * }\n *\n * @param options\n */\nfunction send(options) {\n    const event = new CustomEvent(\"dbp-notification-send\", {\n        bubbles: true,\n        cancelable: true,\n        detail: options,\n    });\n\n    const result = window.dispatchEvent(event);\n\n    // true means the event was not handled\n    if (result) {\n        alert((options.summary !== undefined && options.summary !== \"\" ? options.summary + \": \" : \"\") + options.body);\n        console.log(\"Use the web component dbp-notification to show fancy notifications.\");\n    }\n}\n\nexport { send };\n","import {createInstance} from './i18next.js';\n\nimport de from './i18n/de/translation.json';\nimport en from './i18n/en/translation.json';\n\nexport const i18n = createInstance({en: en, de: de}, 'de', 'en');","\"use strict\";\n\nimport {send as notify} from './notification';\nimport * as utils from \"./utils\";\nimport {i18n} from \"./i18n\";\n\n// \"module.exports = class JSONLD\" doesn't work with rollup because of above \"import\"\nexport default class JSONLD {\n    constructor(baseApiUrl, entities) {\n        this.entities = entities;\n        this.baseApiUrl = baseApiUrl;\n\n        let idToEntityNameMatchList = {};\n        for (const entityName in entities) {\n            const id = entities[entityName][\"@id\"];\n            idToEntityNameMatchList[id] = entityName;\n        }\n\n        this.idToEntityNameMatchList = idToEntityNameMatchList;\n    }\n\n    static initialize(apiUrl, successFnc, failureFnc, lang = 'de') {\n        if (lang !== 'de') {\n            i18n.changeLanguage(lang);\n        }\n\n        // if init api call was already successfully finished execute the success function\n        if (JSONLD.instances[apiUrl] !== undefined) {\n            if (typeof successFnc == 'function') successFnc(JSONLD.instances[apiUrl]);\n\n            return;\n        }\n\n        // init the arrays\n        if (JSONLD.successFunctions[apiUrl] === undefined) JSONLD.successFunctions[apiUrl] = [];\n        if (JSONLD.failureFunctions[apiUrl] === undefined) JSONLD.failureFunctions[apiUrl] = [];\n\n        // add success and failure functions\n        if (typeof successFnc == 'function') JSONLD.successFunctions[apiUrl].push(successFnc);\n        if (typeof failureFnc == 'function') JSONLD.failureFunctions[apiUrl].push(failureFnc);\n    }\n\n    /**\n     * This should be run as soon as an api token is available (can be run multiple times)\n     *\n     * @param apiUrl\n     * @param token\n     */\n    static doInitializationOnce(apiUrl, token) {\n        // console.log(\"doInitializationOnce\", apiUrl, token);\n\n        // check if token is not set or api call was already started\n        if (!apiUrl || !token || JSONLD.initStarted[apiUrl] !== undefined) {\n            return;\n        }\n\n        JSONLD.initStarted[apiUrl] = true;\n        JSONLD.doInitialization(apiUrl, token);\n        // console.log(\"doInitializationOnce Done\", apiUrl, token);\n    }\n\n    static doInitialization(apiUrl, token) {\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"GET\", apiUrl, true);\n        xhr.setRequestHeader('Authorization', 'Bearer ' + token);\n\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState !== 4) {\n                return;\n            }\n\n            if (xhr.status === 200) {\n                const json = JSON.parse(xhr.responseText);\n\n                let entryPoints = {};\n                for (let property in json) {\n                    // for some reason the properties start with a lower case character\n                    if (!property.startsWith(\"@\")) entryPoints[property.toLowerCase()] = json[property];\n                }\n\n                // read the link header of the api response\n                //                const utils = require(\"./utils\");\n                const links = utils.parseLinkHeader(this.getResponseHeader(\"link\"));\n\n                // get the hydra apiDocumentation url\n                const apiDocUrl = links[\"http://www.w3.org/ns/hydra/core#apiDocumentation\"];\n\n                if (apiDocUrl !== undefined) {\n                    // load the hydra apiDocumentation\n                    const docXhr = new XMLHttpRequest();\n                    docXhr.open(\"GET\", apiDocUrl, true);\n                    docXhr.setRequestHeader(\"Content-Type\", \"application/json\");\n                    docXhr.onreadystatechange = function () {\n                        if (docXhr.readyState !== 4) {\n                            return;\n                        }\n\n                        if (docXhr.status === 200) {\n                            JSONLD.gatherEntities(docXhr, apiUrl, entryPoints);\n                        } else {\n                            JSONLD.executeFailureFunctions(apiUrl, i18n.t('jsonld.api-documentation-server', {apiUrl: apiDocUrl}));\n                        }\n                    };\n\n                    docXhr.send();\n                } else {\n                    JSONLD.executeFailureFunctions(apiUrl, i18n.t('jsonld.error-hydra-documentation-url-not-set', {apiUrl: apiUrl}));\n                }\n            } else {\n                JSONLD.executeFailureFunctions(apiUrl, i18n.t('jsonld.error-api-server', {apiUrl: apiUrl}));\n            }\n        };\n\n        xhr.send();\n    }\n\n    /**\n     * Gather the entities\n     *\n     * @param docXhr\n     * @param apiUrl\n     * @param entryPoints\n     */\n    static gatherEntities(docXhr, apiUrl, entryPoints) {\n        const json = JSON.parse(docXhr.responseText);\n        const supportedClasses = json[\"hydra:supportedClass\"];\n\n        let entities = {};\n        const baseUrl = utils.parseBaseUrl(apiUrl);\n\n        // gather the entities\n        supportedClasses.forEach(function (classData) {\n            // add entry point url\n            const entityName = classData[\"hydra:title\"];\n            let entryPoint = entryPoints[entityName.toLowerCase()];\n            if (entryPoint !== undefined && !entryPoint.startsWith(\"http\")) entryPoint = baseUrl + entryPoint;\n            classData[\"@entryPoint\"] = entryPoint;\n\n            entities[entityName] = classData;\n        });\n\n        const instance = new JSONLD(baseUrl, entities);\n        JSONLD.instances[apiUrl] = instance;\n\n        // return the initialized JSONLD object\n        for (const fnc of JSONLD.successFunctions[apiUrl]) if (typeof fnc == 'function') fnc(instance);\n        JSONLD.successFunctions[apiUrl] = [];\n    }\n\n    /**\n     * Execute failure functions and send general notification\n     *\n     * @param apiUrl\n     * @param message\n     */\n    static executeFailureFunctions(apiUrl, message = \"\") {\n        for (const fnc of JSONLD.failureFunctions[apiUrl]) if (typeof fnc == 'function') fnc();\n        JSONLD.failureFunctions[apiUrl] = [];\n\n        if (message !== \"\") {\n            notify({\n                \"summary\": i18n.t('error.summary'),\n                \"body\": message,\n                \"type\": \"danger\",\n            });\n        }\n    }\n\n    static getInstance(apiUrl) {\n        return JSONLD.instances[apiUrl];\n    }\n\n    getEntityForIdentifier(identifier) {\n        let entityName = this.getEntityNameForIdentifier(identifier);\n        return this.getEntityForEntityName(entityName);\n    }\n\n    getEntityForEntityName(entityName) {\n        return this.entities[entityName];\n    }\n\n    getApiUrlForIdentifier(identifier) {\n        const entity = this.getEntityForIdentifier(identifier);\n\n        if (entity === undefined || entity[\"@entryPoint\"] === undefined) {\n            throw new Error(`Entity with identifier \"${identifier}\" not found!`);\n        }\n\n        return entity[\"@entryPoint\"];\n    }\n\n    getApiUrlForEntityName(entityName) {\n        const entity = this.getEntityForEntityName(entityName);\n\n        if (entity === undefined || entity[\"@entryPoint\"] === undefined) {\n            throw new Error(`Entity \"${entityName}\" not found!`);\n        }\n\n        return entity[\"@entryPoint\"];\n    }\n\n    getEntityNameForIdentifier(identifier) {\n        return this.idToEntityNameMatchList[identifier];\n    }\n\n    getApiIdentifierList() {\n        let keys = [];\n        for (const property in this.idToEntityNameMatchList) {\n            keys.push(property);\n        }\n\n        return keys;\n    }\n\n    /**\n     * Expands a member of a list to a object with schema.org properties\n     *\n     * @param member\n     * @param [context]\n     */\n    expandMember(member, context) {\n        if (context === undefined) {\n            context = member[\"@context\"];\n        }\n\n        let result = {\"@id\": member[\"@id\"]};\n        for (const key of Object.keys(context)) {\n            const value = context[key];\n            if (member[key] !== undefined)\n                result[value] = member[key];\n        }\n\n        return result;\n    }\n\n    /**\n     * Compacts an expanded member of a list to a object with local properties\n     *\n     * @param member\n     * @param localContext\n     */\n    compactMember(member, localContext) {\n        let result = {};\n\n        for (const property in localContext) {\n            const value = member[localContext[property]];\n\n            if (value !== undefined) {\n                result[property] = value;\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Transforms hydra members to a local context\n     *\n     * @param data\n     * @param localContext\n     * @returns {Array} An array of transformed objects\n     */\n    transformMembers(data, localContext) {\n        const members = data['hydra:member'];\n\n        if (members === undefined || members.length === 0) {\n            return [];\n        }\n\n        const otherContext = data['@context'];\n        let results = [];\n        let that = this;\n\n        members.forEach(function (member) {\n            results.push(that.compactMember(that.expandMember(member, otherContext), localContext));\n        });\n\n        return results;\n    }\n}\n\nJSONLD.instances = {};\nJSONLD.successFunctions = {};\nJSONLD.failureFunctions = {};\nJSONLD.initStarted = {};\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/**\n * Assert a condition.\n * @param condition The condition that it should satisfy.\n * @param message The error message.\n * @param args The arguments for replacing placeholders in the message.\n */\nfunction assertType(condition, message, ...args) {\n    if (!condition) {\n        throw new TypeError(format(message, args));\n    }\n}\n/**\n * Convert a text and arguments to one string.\n * @param message The formating text\n * @param args The arguments.\n */\nfunction format(message, args) {\n    let i = 0;\n    return message.replace(/%[os]/gu, () => anyToString(args[i++]));\n}\n/**\n * Convert a value to a string representation.\n * @param x The value to get the string representation.\n */\nfunction anyToString(x) {\n    if (typeof x !== \"object\" || x === null) {\n        return String(x);\n    }\n    return Object.prototype.toString.call(x);\n}\n\nlet currentErrorHandler;\n/**\n * Set the error handler.\n * @param value The error handler to set.\n */\nfunction setErrorHandler(value) {\n    assertType(typeof value === \"function\" || value === undefined, \"The error handler must be a function or undefined, but got %o.\", value);\n    currentErrorHandler = value;\n}\n/**\n * Print a error message.\n * @param maybeError The error object.\n */\nfunction reportError(maybeError) {\n    try {\n        const error = maybeError instanceof Error\n            ? maybeError\n            : new Error(anyToString(maybeError));\n        // Call the user-defined error handler if exists.\n        if (currentErrorHandler) {\n            currentErrorHandler(error);\n            return;\n        }\n        // Dispatch an `error` event if this is on a browser.\n        if (typeof dispatchEvent === \"function\" &&\n            typeof ErrorEvent === \"function\") {\n            dispatchEvent(new ErrorEvent(\"error\", { error, message: error.message }));\n        }\n        // Emit an `uncaughtException` event if this is on Node.js.\n        //istanbul ignore else\n        else if (typeof process !== \"undefined\" &&\n            typeof process.emit === \"function\") {\n            process.emit(\"uncaughtException\", error);\n            return;\n        }\n        // Otherwise, print the error.\n        console.error(error);\n    }\n    catch (_a) {\n        // ignore.\n    }\n}\n\n/**\n * The global object.\n */\n//istanbul ignore next\nconst Global = typeof window !== \"undefined\"\n    ? window\n    : typeof self !== \"undefined\"\n        ? self\n        : typeof global !== \"undefined\"\n            ? global\n            : typeof globalThis !== \"undefined\"\n                ? globalThis\n                : undefined;\n\nlet currentWarnHandler;\n/**\n * Set the warning handler.\n * @param value The warning handler to set.\n */\nfunction setWarningHandler(value) {\n    assertType(typeof value === \"function\" || value === undefined, \"The warning handler must be a function or undefined, but got %o.\", value);\n    currentWarnHandler = value;\n}\n/**\n * The warning information.\n */\nclass Warning {\n    constructor(code, message) {\n        this.code = code;\n        this.message = message;\n    }\n    /**\n     * Report this warning.\n     * @param args The arguments of the warning.\n     */\n    warn(...args) {\n        var _a;\n        try {\n            // Call the user-defined warning handler if exists.\n            if (currentWarnHandler) {\n                currentWarnHandler({ ...this, args });\n                return;\n            }\n            // Otherwise, print the warning.\n            const stack = ((_a = new Error().stack) !== null && _a !== void 0 ? _a : \"\").replace(/^(?:.+?\\n){2}/gu, \"\\n\");\n            console.warn(this.message, ...args, stack);\n        }\n        catch (_b) {\n            // Ignore.\n        }\n    }\n}\n\nconst InitEventWasCalledWhileDispatching = new Warning(\"W01\", \"Unable to initialize event under dispatching.\");\nconst FalsyWasAssignedToCancelBubble = new Warning(\"W02\", \"Assigning any falsy value to 'cancelBubble' property has no effect.\");\nconst TruthyWasAssignedToReturnValue = new Warning(\"W03\", \"Assigning any truthy value to 'returnValue' property has no effect.\");\nconst NonCancelableEventWasCanceled = new Warning(\"W04\", \"Unable to preventDefault on non-cancelable events.\");\nconst CanceledInPassiveListener = new Warning(\"W05\", \"Unable to preventDefault inside passive event listener invocation.\");\nconst EventListenerWasDuplicated = new Warning(\"W06\", \"An event listener wasn't added because it has been added already: %o, %o\");\nconst OptionWasIgnored = new Warning(\"W07\", \"The %o option value was abandoned because the event listener wasn't added as duplicated.\");\nconst InvalidEventListener = new Warning(\"W08\", \"The 'callback' argument must be a function or an object that has 'handleEvent' method: %o\");\nconst InvalidAttributeHandler = new Warning(\"W09\", \"Event attribute handler must be a function: %o\");\n\n/*eslint-disable class-methods-use-this */\n/**\n * An implementation of `Event` interface, that wraps a given event object.\n * `EventTarget` shim can control the internal state of this `Event` objects.\n * @see https://dom.spec.whatwg.org/#event\n */\nclass Event {\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-none\n     */\n    static get NONE() {\n        return NONE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-capturing_phase\n     */\n    static get CAPTURING_PHASE() {\n        return CAPTURING_PHASE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-at_target\n     */\n    static get AT_TARGET() {\n        return AT_TARGET;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbling_phase\n     */\n    static get BUBBLING_PHASE() {\n        return BUBBLING_PHASE;\n    }\n    /**\n     * Initialize this event instance.\n     * @param type The type of this event.\n     * @param eventInitDict Options to initialize.\n     * @see https://dom.spec.whatwg.org/#dom-event-event\n     */\n    constructor(type, eventInitDict) {\n        Object.defineProperty(this, \"isTrusted\", {\n            value: false,\n            enumerable: true,\n        });\n        const opts = eventInitDict !== null && eventInitDict !== void 0 ? eventInitDict : {};\n        internalDataMap.set(this, {\n            type: String(type),\n            bubbles: Boolean(opts.bubbles),\n            cancelable: Boolean(opts.cancelable),\n            composed: Boolean(opts.composed),\n            target: null,\n            currentTarget: null,\n            stopPropagationFlag: false,\n            stopImmediatePropagationFlag: false,\n            canceledFlag: false,\n            inPassiveListenerFlag: false,\n            dispatchFlag: false,\n            timeStamp: Date.now(),\n        });\n    }\n    /**\n     * The type of this event.\n     * @see https://dom.spec.whatwg.org/#dom-event-type\n     */\n    get type() {\n        return $(this).type;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @see https://dom.spec.whatwg.org/#dom-event-target\n     */\n    get target() {\n        return $(this).target;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @deprecated Use the `target` property instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-srcelement\n     */\n    get srcElement() {\n        return $(this).target;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @see https://dom.spec.whatwg.org/#dom-event-currenttarget\n     */\n    get currentTarget() {\n        return $(this).currentTarget;\n    }\n    /**\n     * The event target of the current dispatching.\n     * This doesn't support node tree.\n     * @see https://dom.spec.whatwg.org/#dom-event-composedpath\n     */\n    composedPath() {\n        const currentTarget = $(this).currentTarget;\n        if (currentTarget) {\n            return [currentTarget];\n        }\n        return [];\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-none\n     */\n    get NONE() {\n        return NONE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-capturing_phase\n     */\n    get CAPTURING_PHASE() {\n        return CAPTURING_PHASE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-at_target\n     */\n    get AT_TARGET() {\n        return AT_TARGET;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbling_phase\n     */\n    get BUBBLING_PHASE() {\n        return BUBBLING_PHASE;\n    }\n    /**\n     * The current event phase.\n     * @see https://dom.spec.whatwg.org/#dom-event-eventphase\n     */\n    get eventPhase() {\n        return $(this).dispatchFlag ? 2 : 0;\n    }\n    /**\n     * Stop event bubbling.\n     * Because this shim doesn't support node tree, this merely changes the `cancelBubble` property value.\n     * @see https://dom.spec.whatwg.org/#dom-event-stoppropagation\n     */\n    stopPropagation() {\n        $(this).stopPropagationFlag = true;\n    }\n    /**\n     * `true` if event bubbling was stopped.\n     * @deprecated\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelbubble\n     */\n    get cancelBubble() {\n        return $(this).stopPropagationFlag;\n    }\n    /**\n     * Stop event bubbling if `true` is set.\n     * @deprecated Use the `stopPropagation()` method instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelbubble\n     */\n    set cancelBubble(value) {\n        if (value) {\n            $(this).stopPropagationFlag = true;\n        }\n        else {\n            FalsyWasAssignedToCancelBubble.warn();\n        }\n    }\n    /**\n     * Stop event bubbling and subsequent event listener callings.\n     * @see https://dom.spec.whatwg.org/#dom-event-stopimmediatepropagation\n     */\n    stopImmediatePropagation() {\n        const data = $(this);\n        data.stopPropagationFlag = data.stopImmediatePropagationFlag = true;\n    }\n    /**\n     * `true` if this event will bubble.\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbles\n     */\n    get bubbles() {\n        return $(this).bubbles;\n    }\n    /**\n     * `true` if this event can be canceled by the `preventDefault()` method.\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelable\n     */\n    get cancelable() {\n        return $(this).cancelable;\n    }\n    /**\n     * `true` if the default behavior will act.\n     * @deprecated Use the `defaultPrevented` proeprty instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-returnvalue\n     */\n    get returnValue() {\n        return !$(this).canceledFlag;\n    }\n    /**\n     * Cancel the default behavior if `false` is set.\n     * @deprecated Use the `preventDefault()` method instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-returnvalue\n     */\n    set returnValue(value) {\n        if (!value) {\n            setCancelFlag($(this));\n        }\n        else {\n            TruthyWasAssignedToReturnValue.warn();\n        }\n    }\n    /**\n     * Cancel the default behavior.\n     * @see https://dom.spec.whatwg.org/#dom-event-preventdefault\n     */\n    preventDefault() {\n        setCancelFlag($(this));\n    }\n    /**\n     * `true` if the default behavior was canceled.\n     * @see https://dom.spec.whatwg.org/#dom-event-defaultprevented\n     */\n    get defaultPrevented() {\n        return $(this).canceledFlag;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-composed\n     */\n    get composed() {\n        return $(this).composed;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-istrusted\n     */\n    //istanbul ignore next\n    get isTrusted() {\n        return false;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-timestamp\n     */\n    get timeStamp() {\n        return $(this).timeStamp;\n    }\n    /**\n     * @deprecated Don't use this method. The constructor did initialization.\n     */\n    initEvent(type, bubbles = false, cancelable = false) {\n        const data = $(this);\n        if (data.dispatchFlag) {\n            InitEventWasCalledWhileDispatching.warn();\n            return;\n        }\n        internalDataMap.set(this, {\n            ...data,\n            type: String(type),\n            bubbles: Boolean(bubbles),\n            cancelable: Boolean(cancelable),\n            target: null,\n            currentTarget: null,\n            stopPropagationFlag: false,\n            stopImmediatePropagationFlag: false,\n            canceledFlag: false,\n        });\n    }\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\nconst NONE = 0;\nconst CAPTURING_PHASE = 1;\nconst AT_TARGET = 2;\nconst BUBBLING_PHASE = 3;\n/**\n * Private data for event wrappers.\n */\nconst internalDataMap = new WeakMap();\n/**\n * Get private data.\n * @param event The event object to get private data.\n * @param name The variable name to report.\n * @returns The private data of the event.\n */\nfunction $(event, name = \"this\") {\n    const retv = internalDataMap.get(event);\n    assertType(retv != null, \"'%s' must be an object that Event constructor created, but got another one: %o\", name, event);\n    return retv;\n}\n/**\n * https://dom.spec.whatwg.org/#set-the-canceled-flag\n * @param data private data.\n */\nfunction setCancelFlag(data) {\n    if (data.inPassiveListenerFlag) {\n        CanceledInPassiveListener.warn();\n        return;\n    }\n    if (!data.cancelable) {\n        NonCancelableEventWasCanceled.warn();\n        return;\n    }\n    data.canceledFlag = true;\n}\n// Set enumerable\nObject.defineProperty(Event, \"NONE\", { enumerable: true });\nObject.defineProperty(Event, \"CAPTURING_PHASE\", { enumerable: true });\nObject.defineProperty(Event, \"AT_TARGET\", { enumerable: true });\nObject.defineProperty(Event, \"BUBBLING_PHASE\", { enumerable: true });\nconst keys = Object.getOwnPropertyNames(Event.prototype);\nfor (let i = 0; i < keys.length; ++i) {\n    if (keys[i] === \"constructor\") {\n        continue;\n    }\n    Object.defineProperty(Event.prototype, keys[i], { enumerable: true });\n}\n// Ensure `event instanceof window.Event` is `true`.\nif (typeof Global !== \"undefined\" && typeof Global.Event !== \"undefined\") {\n    Object.setPrototypeOf(Event.prototype, Global.Event.prototype);\n}\n\n/**\n * Create a new InvalidStateError instance.\n * @param message The error message.\n */\nfunction createInvalidStateError(message) {\n    if (Global.DOMException) {\n        return new Global.DOMException(message, \"InvalidStateError\");\n    }\n    if (DOMException == null) {\n        DOMException = class DOMException extends Error {\n            constructor(msg) {\n                super(msg);\n                if (Error.captureStackTrace) {\n                    Error.captureStackTrace(this, DOMException);\n                }\n            }\n            // eslint-disable-next-line class-methods-use-this\n            get code() {\n                return 11;\n            }\n            // eslint-disable-next-line class-methods-use-this\n            get name() {\n                return \"InvalidStateError\";\n            }\n        };\n        Object.defineProperties(DOMException.prototype, {\n            code: { enumerable: true },\n            name: { enumerable: true },\n        });\n        defineErrorCodeProperties(DOMException);\n        defineErrorCodeProperties(DOMException.prototype);\n    }\n    return new DOMException(message);\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\nlet DOMException;\nconst ErrorCodeMap = {\n    INDEX_SIZE_ERR: 1,\n    DOMSTRING_SIZE_ERR: 2,\n    HIERARCHY_REQUEST_ERR: 3,\n    WRONG_DOCUMENT_ERR: 4,\n    INVALID_CHARACTER_ERR: 5,\n    NO_DATA_ALLOWED_ERR: 6,\n    NO_MODIFICATION_ALLOWED_ERR: 7,\n    NOT_FOUND_ERR: 8,\n    NOT_SUPPORTED_ERR: 9,\n    INUSE_ATTRIBUTE_ERR: 10,\n    INVALID_STATE_ERR: 11,\n    SYNTAX_ERR: 12,\n    INVALID_MODIFICATION_ERR: 13,\n    NAMESPACE_ERR: 14,\n    INVALID_ACCESS_ERR: 15,\n    VALIDATION_ERR: 16,\n    TYPE_MISMATCH_ERR: 17,\n    SECURITY_ERR: 18,\n    NETWORK_ERR: 19,\n    ABORT_ERR: 20,\n    URL_MISMATCH_ERR: 21,\n    QUOTA_EXCEEDED_ERR: 22,\n    TIMEOUT_ERR: 23,\n    INVALID_NODE_TYPE_ERR: 24,\n    DATA_CLONE_ERR: 25,\n};\nfunction defineErrorCodeProperties(obj) {\n    const keys = Object.keys(ErrorCodeMap);\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i];\n        const value = ErrorCodeMap[key];\n        Object.defineProperty(obj, key, {\n            get() {\n                return value;\n            },\n            configurable: true,\n            enumerable: true,\n        });\n    }\n}\n\n/**\n * An implementation of `Event` interface, that wraps a given event object.\n * This class controls the internal state of `Event`.\n * @see https://dom.spec.whatwg.org/#interface-event\n */\nclass EventWrapper extends Event {\n    /**\n     * Wrap a given event object to control states.\n     * @param event The event-like object to wrap.\n     */\n    static wrap(event) {\n        return new (getWrapperClassOf(event))(event);\n    }\n    constructor(event) {\n        super(event.type, {\n            bubbles: event.bubbles,\n            cancelable: event.cancelable,\n            composed: event.composed,\n        });\n        if (event.cancelBubble) {\n            super.stopPropagation();\n        }\n        if (event.defaultPrevented) {\n            super.preventDefault();\n        }\n        internalDataMap$1.set(this, { original: event });\n        // Define accessors\n        const keys = Object.keys(event);\n        for (let i = 0; i < keys.length; ++i) {\n            const key = keys[i];\n            if (!(key in this)) {\n                Object.defineProperty(this, key, defineRedirectDescriptor(event, key));\n            }\n        }\n    }\n    stopPropagation() {\n        super.stopPropagation();\n        const { original } = $$1(this);\n        if (\"stopPropagation\" in original) {\n            original.stopPropagation();\n        }\n    }\n    get cancelBubble() {\n        return super.cancelBubble;\n    }\n    set cancelBubble(value) {\n        super.cancelBubble = value;\n        const { original } = $$1(this);\n        if (\"cancelBubble\" in original) {\n            original.cancelBubble = value;\n        }\n    }\n    stopImmediatePropagation() {\n        super.stopImmediatePropagation();\n        const { original } = $$1(this);\n        if (\"stopImmediatePropagation\" in original) {\n            original.stopImmediatePropagation();\n        }\n    }\n    get returnValue() {\n        return super.returnValue;\n    }\n    set returnValue(value) {\n        super.returnValue = value;\n        const { original } = $$1(this);\n        if (\"returnValue\" in original) {\n            original.returnValue = value;\n        }\n    }\n    preventDefault() {\n        super.preventDefault();\n        const { original } = $$1(this);\n        if (\"preventDefault\" in original) {\n            original.preventDefault();\n        }\n    }\n    get timeStamp() {\n        const { original } = $$1(this);\n        if (\"timeStamp\" in original) {\n            return original.timeStamp;\n        }\n        return super.timeStamp;\n    }\n}\n/**\n * Private data for event wrappers.\n */\nconst internalDataMap$1 = new WeakMap();\n/**\n * Get private data.\n * @param event The event object to get private data.\n * @returns The private data of the event.\n */\nfunction $$1(event) {\n    const retv = internalDataMap$1.get(event);\n    assertType(retv != null, \"'this' is expected an Event object, but got\", event);\n    return retv;\n}\n/**\n * Cache for wrapper classes.\n * @type {WeakMap<Object, Function>}\n * @private\n */\nconst wrapperClassCache = new WeakMap();\n// Make association for wrappers.\nwrapperClassCache.set(Object.prototype, EventWrapper);\nif (typeof Global !== \"undefined\" && typeof Global.Event !== \"undefined\") {\n    wrapperClassCache.set(Global.Event.prototype, EventWrapper);\n}\n/**\n * Get the wrapper class of a given prototype.\n * @param originalEvent The event object to wrap.\n */\nfunction getWrapperClassOf(originalEvent) {\n    const prototype = Object.getPrototypeOf(originalEvent);\n    if (prototype == null) {\n        return EventWrapper;\n    }\n    let wrapper = wrapperClassCache.get(prototype);\n    if (wrapper == null) {\n        wrapper = defineWrapper(getWrapperClassOf(prototype), prototype);\n        wrapperClassCache.set(prototype, wrapper);\n    }\n    return wrapper;\n}\n/**\n * Define new wrapper class.\n * @param BaseEventWrapper The base wrapper class.\n * @param originalPrototype The prototype of the original event.\n */\nfunction defineWrapper(BaseEventWrapper, originalPrototype) {\n    class CustomEventWrapper extends BaseEventWrapper {\n    }\n    const keys = Object.keys(originalPrototype);\n    for (let i = 0; i < keys.length; ++i) {\n        Object.defineProperty(CustomEventWrapper.prototype, keys[i], defineRedirectDescriptor(originalPrototype, keys[i]));\n    }\n    return CustomEventWrapper;\n}\n/**\n * Get the property descriptor to redirect a given property.\n */\nfunction defineRedirectDescriptor(obj, key) {\n    const d = Object.getOwnPropertyDescriptor(obj, key);\n    return {\n        get() {\n            const original = $$1(this).original;\n            const value = original[key];\n            if (typeof value === \"function\") {\n                return value.bind(original);\n            }\n            return value;\n        },\n        set(value) {\n            const original = $$1(this).original;\n            original[key] = value;\n        },\n        configurable: d.configurable,\n        enumerable: d.enumerable,\n    };\n}\n\n/**\n * Create a new listener.\n * @param callback The callback function.\n * @param capture The capture flag.\n * @param passive The passive flag.\n * @param once The once flag.\n * @param signal The abort signal.\n * @param signalListener The abort event listener for the abort signal.\n */\nfunction createListener(callback, capture, passive, once, signal, signalListener) {\n    return {\n        callback,\n        flags: (capture ? 1 /* Capture */ : 0) |\n            (passive ? 2 /* Passive */ : 0) |\n            (once ? 4 /* Once */ : 0),\n        signal,\n        signalListener,\n    };\n}\n/**\n * Set the `removed` flag to the given listener.\n * @param listener The listener to check.\n */\nfunction setRemoved(listener) {\n    listener.flags |= 8 /* Removed */;\n}\n/**\n * Check if the given listener has the `capture` flag or not.\n * @param listener The listener to check.\n */\nfunction isCapture(listener) {\n    return (listener.flags & 1 /* Capture */) === 1 /* Capture */;\n}\n/**\n * Check if the given listener has the `passive` flag or not.\n * @param listener The listener to check.\n */\nfunction isPassive(listener) {\n    return (listener.flags & 2 /* Passive */) === 2 /* Passive */;\n}\n/**\n * Check if the given listener has the `once` flag or not.\n * @param listener The listener to check.\n */\nfunction isOnce(listener) {\n    return (listener.flags & 4 /* Once */) === 4 /* Once */;\n}\n/**\n * Check if the given listener has the `removed` flag or not.\n * @param listener The listener to check.\n */\nfunction isRemoved(listener) {\n    return (listener.flags & 8 /* Removed */) === 8 /* Removed */;\n}\n/**\n * Call an event listener.\n * @param listener The listener to call.\n * @param target The event target object for `thisArg`.\n * @param event The event object for the first argument.\n * @param attribute `true` if this callback is an event attribute handler.\n */\nfunction invokeCallback({ callback }, target, event) {\n    try {\n        if (typeof callback === \"function\") {\n            callback.call(target, event);\n        }\n        else if (typeof callback.handleEvent === \"function\") {\n            callback.handleEvent(event);\n        }\n    }\n    catch (thrownError) {\n        reportError(thrownError);\n    }\n}\n\n/**\n * Find the index of given listener.\n * This returns `-1` if not found.\n * @param list The listener list.\n * @param callback The callback function to find.\n * @param capture The capture flag to find.\n */\nfunction findIndexOfListener({ listeners }, callback, capture) {\n    for (let i = 0; i < listeners.length; ++i) {\n        if (listeners[i].callback === callback &&\n            isCapture(listeners[i]) === capture) {\n            return i;\n        }\n    }\n    return -1;\n}\n/**\n * Add the given listener.\n * Does copy-on-write if needed.\n * @param list The listener list.\n * @param callback The callback function.\n * @param capture The capture flag.\n * @param passive The passive flag.\n * @param once The once flag.\n * @param signal The abort signal.\n */\nfunction addListener(list, callback, capture, passive, once, signal) {\n    let signalListener;\n    if (signal) {\n        signalListener = removeListener.bind(null, list, callback, capture);\n        signal.addEventListener(\"abort\", signalListener);\n    }\n    const listener = createListener(callback, capture, passive, once, signal, signalListener);\n    if (list.cow) {\n        list.cow = false;\n        list.listeners = [...list.listeners, listener];\n    }\n    else {\n        list.listeners.push(listener);\n    }\n    return listener;\n}\n/**\n * Remove a listener.\n * @param list The listener list.\n * @param callback The callback function to find.\n * @param capture The capture flag to find.\n * @returns `true` if it mutated the list directly.\n */\nfunction removeListener(list, callback, capture) {\n    const index = findIndexOfListener(list, callback, capture);\n    if (index !== -1) {\n        return removeListenerAt(list, index);\n    }\n    return false;\n}\n/**\n * Remove a listener.\n * @param list The listener list.\n * @param index The index of the target listener.\n * @param disableCow Disable copy-on-write if true.\n * @returns `true` if it mutated the `listeners` array directly.\n */\nfunction removeListenerAt(list, index, disableCow = false) {\n    const listener = list.listeners[index];\n    // Set the removed flag.\n    setRemoved(listener);\n    // Dispose the abort signal listener if exists.\n    if (listener.signal) {\n        listener.signal.removeEventListener(\"abort\", listener.signalListener);\n    }\n    // Remove it from the array.\n    if (list.cow && !disableCow) {\n        list.cow = false;\n        list.listeners = list.listeners.filter((_, i) => i !== index);\n        return false;\n    }\n    list.listeners.splice(index, 1);\n    return true;\n}\n\n/**\n * Create a new `ListenerListMap` object.\n */\nfunction createListenerListMap() {\n    return Object.create(null);\n}\n/**\n * Get the listener list of the given type.\n * If the listener list has not been initialized, initialize and return it.\n * @param listenerMap The listener list map.\n * @param type The event type to get.\n */\nfunction ensureListenerList(listenerMap, type) {\n    var _a;\n    return ((_a = listenerMap[type]) !== null && _a !== void 0 ? _a : (listenerMap[type] = {\n        attrCallback: undefined,\n        attrListener: undefined,\n        cow: false,\n        listeners: [],\n    }));\n}\n\n/**\n * An implementation of the `EventTarget` interface.\n * @see https://dom.spec.whatwg.org/#eventtarget\n */\nclass EventTarget {\n    /**\n     * Initialize this instance.\n     */\n    constructor() {\n        internalDataMap$2.set(this, createListenerListMap());\n    }\n    // Implementation\n    addEventListener(type0, callback0, options0) {\n        const listenerMap = $$2(this);\n        const { callback, capture, once, passive, signal, type, } = normalizeAddOptions(type0, callback0, options0);\n        if (callback == null || (signal === null || signal === void 0 ? void 0 : signal.aborted)) {\n            return;\n        }\n        const list = ensureListenerList(listenerMap, type);\n        // Find existing listener.\n        const i = findIndexOfListener(list, callback, capture);\n        if (i !== -1) {\n            warnDuplicate(list.listeners[i], passive, once, signal);\n            return;\n        }\n        // Add the new listener.\n        addListener(list, callback, capture, passive, once, signal);\n    }\n    // Implementation\n    removeEventListener(type0, callback0, options0) {\n        const listenerMap = $$2(this);\n        const { callback, capture, type } = normalizeOptions(type0, callback0, options0);\n        const list = listenerMap[type];\n        if (callback != null && list) {\n            removeListener(list, callback, capture);\n        }\n    }\n    // Implementation\n    dispatchEvent(e) {\n        const list = $$2(this)[String(e.type)];\n        if (list == null) {\n            return true;\n        }\n        const event = e instanceof Event ? e : EventWrapper.wrap(e);\n        const eventData = $(event, \"event\");\n        if (eventData.dispatchFlag) {\n            throw createInvalidStateError(\"This event has been in dispatching.\");\n        }\n        eventData.dispatchFlag = true;\n        eventData.target = eventData.currentTarget = this;\n        if (!eventData.stopPropagationFlag) {\n            const { cow, listeners } = list;\n            // Set copy-on-write flag.\n            list.cow = true;\n            // Call listeners.\n            for (let i = 0; i < listeners.length; ++i) {\n                const listener = listeners[i];\n                // Skip if removed.\n                if (isRemoved(listener)) {\n                    continue;\n                }\n                // Remove this listener if has the `once` flag.\n                if (isOnce(listener) && removeListenerAt(list, i, !cow)) {\n                    // Because this listener was removed, the next index is the\n                    // same as the current value.\n                    i -= 1;\n                }\n                // Call this listener with the `passive` flag.\n                eventData.inPassiveListenerFlag = isPassive(listener);\n                invokeCallback(listener, this, event);\n                eventData.inPassiveListenerFlag = false;\n                // Stop if the `event.stopImmediatePropagation()` method was called.\n                if (eventData.stopImmediatePropagationFlag) {\n                    break;\n                }\n            }\n            // Restore copy-on-write flag.\n            if (!cow) {\n                list.cow = false;\n            }\n        }\n        eventData.target = null;\n        eventData.currentTarget = null;\n        eventData.stopImmediatePropagationFlag = false;\n        eventData.stopPropagationFlag = false;\n        eventData.dispatchFlag = false;\n        return !eventData.canceledFlag;\n    }\n}\n/**\n * Internal data.\n */\nconst internalDataMap$2 = new WeakMap();\n/**\n * Get private data.\n * @param target The event target object to get private data.\n * @param name The variable name to report.\n * @returns The private data of the event.\n */\nfunction $$2(target, name = \"this\") {\n    const retv = internalDataMap$2.get(target);\n    assertType(retv != null, \"'%s' must be an object that EventTarget constructor created, but got another one: %o\", name, target);\n    return retv;\n}\n/**\n * Normalize options.\n * @param options The options to normalize.\n */\nfunction normalizeAddOptions(type, callback, options) {\n    var _a;\n    assertCallback(callback);\n    if (typeof options === \"object\" && options !== null) {\n        return {\n            type: String(type),\n            callback: callback !== null && callback !== void 0 ? callback : undefined,\n            capture: Boolean(options.capture),\n            passive: Boolean(options.passive),\n            once: Boolean(options.once),\n            signal: (_a = options.signal) !== null && _a !== void 0 ? _a : undefined,\n        };\n    }\n    return {\n        type: String(type),\n        callback: callback !== null && callback !== void 0 ? callback : undefined,\n        capture: Boolean(options),\n        passive: false,\n        once: false,\n        signal: undefined,\n    };\n}\n/**\n * Normalize options.\n * @param options The options to normalize.\n */\nfunction normalizeOptions(type, callback, options) {\n    assertCallback(callback);\n    if (typeof options === \"object\" && options !== null) {\n        return {\n            type: String(type),\n            callback: callback !== null && callback !== void 0 ? callback : undefined,\n            capture: Boolean(options.capture),\n        };\n    }\n    return {\n        type: String(type),\n        callback: callback !== null && callback !== void 0 ? callback : undefined,\n        capture: Boolean(options),\n    };\n}\n/**\n * Assert the type of 'callback' argument.\n * @param callback The callback to check.\n */\nfunction assertCallback(callback) {\n    if (typeof callback === \"function\" ||\n        (typeof callback === \"object\" &&\n            callback !== null &&\n            typeof callback.handleEvent === \"function\")) {\n        return;\n    }\n    if (callback == null || typeof callback === \"object\") {\n        InvalidEventListener.warn(callback);\n        return;\n    }\n    throw new TypeError(format(InvalidEventListener.message, [callback]));\n}\n/**\n * Print warning for duplicated.\n * @param listener The current listener that is duplicated.\n * @param passive The passive flag of the new duplicated listener.\n * @param once The once flag of the new duplicated listener.\n * @param signal The signal object of the new duplicated listener.\n */\nfunction warnDuplicate(listener, passive, once, signal) {\n    EventListenerWasDuplicated.warn(isCapture(listener) ? \"capture\" : \"bubble\", listener.callback);\n    if (isPassive(listener) !== passive) {\n        OptionWasIgnored.warn(\"passive\");\n    }\n    if (isOnce(listener) !== once) {\n        OptionWasIgnored.warn(\"once\");\n    }\n    if (listener.signal !== signal) {\n        OptionWasIgnored.warn(\"signal\");\n    }\n}\n// Set enumerable\nconst keys$1 = Object.getOwnPropertyNames(EventTarget.prototype);\nfor (let i = 0; i < keys$1.length; ++i) {\n    if (keys$1[i] === \"constructor\") {\n        continue;\n    }\n    Object.defineProperty(EventTarget.prototype, keys$1[i], { enumerable: true });\n}\n// Ensure `eventTarget instanceof window.EventTarget` is `true`.\nif (typeof Global !== \"undefined\" &&\n    typeof Global.EventTarget !== \"undefined\") {\n    Object.setPrototypeOf(EventTarget.prototype, Global.EventTarget.prototype);\n}\n\n/**\n * Get the current value of a given event attribute.\n * @param target The `EventTarget` object to get.\n * @param type The event type.\n */\nfunction getEventAttributeValue(target, type) {\n    var _a, _b;\n    const listMap = $$2(target, \"target\");\n    return (_b = (_a = listMap[type]) === null || _a === void 0 ? void 0 : _a.attrCallback) !== null && _b !== void 0 ? _b : null;\n}\n/**\n * Set an event listener to a given event attribute.\n * @param target The `EventTarget` object to set.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction setEventAttributeValue(target, type, callback) {\n    if (callback != null && typeof callback !== \"function\") {\n        InvalidAttributeHandler.warn(callback);\n    }\n    if (typeof callback === \"function\" ||\n        (typeof callback === \"object\" && callback !== null)) {\n        upsertEventAttributeListener(target, type, callback);\n    }\n    else {\n        removeEventAttributeListener(target, type);\n    }\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\n/**\n * Update or insert the given event attribute handler.\n * @param target The `EventTarget` object to set.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction upsertEventAttributeListener(target, type, callback) {\n    const list = ensureListenerList($$2(target, \"target\"), String(type));\n    list.attrCallback = callback;\n    if (list.attrListener == null) {\n        list.attrListener = addListener(list, defineEventAttributeCallback(list), false, false, false, undefined);\n    }\n}\n/**\n * Remove the given event attribute handler.\n * @param target The `EventTarget` object to remove.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction removeEventAttributeListener(target, type) {\n    const listMap = $$2(target, \"target\");\n    const list = listMap[String(type)];\n    if (list && list.attrListener) {\n        removeListener(list, list.attrListener.callback, false);\n        list.attrCallback = list.attrListener = undefined;\n    }\n}\n/**\n * Define the callback function for the given listener list object.\n * It calls `attrCallback` property if the property value is a function.\n * @param list The `ListenerList` object.\n */\nfunction defineEventAttributeCallback(list) {\n    return function (event) {\n        const callback = list.attrCallback;\n        if (typeof callback === \"function\") {\n            callback.call(this, event);\n        }\n    };\n}\n\n/**\n * Define an `EventTarget` class that has event attibutes.\n * @param types The types to define event attributes.\n * @deprecated Use `getEventAttributeValue`/`setEventAttributeValue` pair on your derived class instead because of static analysis friendly.\n */\nfunction defineCustomEventTarget(...types) {\n    class CustomEventTarget extends EventTarget {\n    }\n    for (let i = 0; i < types.length; ++i) {\n        defineEventAttribute(CustomEventTarget.prototype, types[i]);\n    }\n    return CustomEventTarget;\n}\n/**\n * Define an event attribute.\n * @param target The `EventTarget` object to define an event attribute.\n * @param type The event type to define.\n * @param _eventClass Unused, but to infer `Event` class type.\n * @deprecated Use `getEventAttributeValue`/`setEventAttributeValue` pair on your derived class instead because of static analysis friendly.\n */\nfunction defineEventAttribute(target, type, _eventClass) {\n    Object.defineProperty(target, `on${type}`, {\n        get() {\n            return getEventAttributeValue(this, type);\n        },\n        set(value) {\n            setEventAttributeValue(this, type, value);\n        },\n        configurable: true,\n        enumerable: true,\n    });\n}\n\nexports.Event = Event;\nexports.EventTarget = EventTarget;\nexports.default = EventTarget;\nexports.defineCustomEventTarget = defineCustomEventTarget;\nexports.defineEventAttribute = defineEventAttribute;\nexports.getEventAttributeValue = getEventAttributeValue;\nexports.setErrorHandler = setErrorHandler;\nexports.setEventAttributeValue = setEventAttributeValue;\nexports.setWarningHandler = setWarningHandler;\n//# sourceMappingURL=index.js.map\n","import {EventTarget} from \"event-target-shim\";  // Because EventTarget() doesn't exist on Safari\n\n\n/**\n * Imports the keycloak JS API as if it was a module.\n *\n * @param baseUrl {string}\n */\nasync function importKeycloak(baseUrl) {\n    const keycloakSrc = baseUrl + '/js/keycloak.min.js';\n    // Importing will write it to window so we take it from there\n    await import(keycloakSrc);\n    if (importKeycloak._keycloakMod !== undefined)\n        return importKeycloak._keycloakMod;\n    importKeycloak._keycloakMod = window.Keycloak;\n    delete window.Keycloak;\n    return importKeycloak._keycloakMod;\n}\n\n\nconst promiseTimeout = function(ms, promise) {\n    let timeout = new Promise((resolve, reject) => {\n      let id = setTimeout(() => {\n        clearTimeout(id);\n        reject('Timed out in '+ ms + 'ms.');\n      }, ms);\n    });\n\n    return Promise.race([\n      promise,\n      timeout\n    ]);\n};\n\n\n/**\n * Returns a URL for a relative path or URL\n *\n * @param {string} urlOrPath\n */\nconst ensureURL = function(urlOrPath) {\n    try {\n        return new URL(urlOrPath).href;\n    } catch (e) {\n        return new URL(urlOrPath, window.location.href).href;\n    }\n};\n\n\n/**\n * Wraps the keycloak API to support async/await, adds auto token refreshing and consolidates all\n * events into one native \"changed\" event\n * \n * The \"changed\" event has the real keycloak instance as \"detail\"\n */\nexport class KeycloakWrapper extends EventTarget {\n\n    constructor(baseURL, realm, clientId, silentCheckSsoUri, idpHint) {\n        super();\n\n        this._baseURL = baseURL;\n        this._realm = realm;\n        this._clientId = clientId;\n        this._keycloak = null;\n        this._initDone = false;\n        this._silentCheckSsoUri = silentCheckSsoUri;\n        this._idpHint = idpHint;\n        this._checkId = null;\n\n        /* Minimum validity of the token in seconds */\n        this.MIN_VALIDITY = 20;\n\n        /* Interval at which the token validity is checked, in seconds */\n        this.CHECK_INTERVAL = 10;\n\n        /* Enables extra debug logging */\n        this.DEBUG = false;\n\n        this._onVisibilityChanged = this._onVisibilityChanged.bind(this);\n        document.addEventListener(\"visibilitychange\", this._onVisibilityChanged);\n    }\n\n    /**\n     * This needs to be called or the instance will leak;\n     */\n    close() {\n        document.removeEventListener(\"visibilitychange\", this._onVisibilityChanged);\n    }\n\n    _onVisibilityChanged() {\n        let isVisible = (document.visibilityState === 'visible');\n        if (isVisible && this._keycloak.authenticated) {\n            this._checkTokeHasExpired();\n        }\n    }\n\n    _onChanged() {\n        const event = new CustomEvent(\"changed\", {\n            detail: this._keycloak,\n            bubbles: true,\n            composed: true\n        });\n        this.dispatchEvent(event);\n    }\n\n    _onReady(authenticated) {\n        // Avoid emitting changed when nothing has changed on init()\n        if (authenticated)\n            this._onChanged();\n    }\n\n    async _onTokenExpired() {\n        console.log('Token has expired');\n        let refreshed = false;\n\n        try {\n            // -1 means force a refresh\n            refreshed = await this._keycloak.updateToken(-1);\n        } catch (error) {\n            console.log('Failed to refresh the token', error);\n            return;\n        }\n\n        console.assert(refreshed, \"token should have been refreshed\");\n    }\n\n    async _checkTokeHasExpired() {\n        let refreshed;\n\n        let minValidity = this.MIN_VALIDITY + this.CHECK_INTERVAL;\n        if (this.DEBUG) {\n            console.log(`Updating token if not valid for at least ${minValidity}s`);\n        }\n        try {\n            refreshed = await this._keycloak.updateToken(minValidity);\n        } catch (error) {\n            console.log('Failed to refresh the token', error);\n        }\n\n        if (this.DEBUG && refreshed)\n            console.log(\"token has been refreshed\");\n    }\n\n    async _onAuthSuccess() {\n        // We check every once in a while if the token is still valid and\n        // and refresh it if needed.\n        if (this._checkId !== null) {\n            clearInterval(this._checkId);\n            this._checkId = null;\n        }\n        this._checkId = setInterval(this._checkTokeHasExpired.bind(this), this.CHECK_INTERVAL * 1000);\n\n        this._onChanged();\n    }\n\n    async _onAuthLogout() {\n        if (this._checkId !== null) {\n            clearInterval(this._checkId);\n            this._checkId = null;\n        }\n\n        this._onChanged();\n    }\n\n    async _ensureInstance() {\n        if (this._keycloak !== null)\n            return;\n\n        const Keycloak = await importKeycloak(this._baseURL);\n\n        this._keycloak = Keycloak({\n            url: this._baseURL,\n            realm: this._realm,\n            clientId: this._clientId,\n        });\n\n        this._keycloak.onTokenExpired = this._onTokenExpired.bind(this);\n        this._keycloak.onAuthRefreshSuccess = this._onChanged.bind(this);\n        this._keycloak.onAuthRefreshError = this._onChanged.bind(this);\n        this._keycloak.onAuthLogout = this._onAuthLogout.bind(this);\n        this._keycloak.onAuthSuccess = this._onAuthSuccess.bind(this);\n        this._keycloak.onAuthError = this._onChanged.bind(this);\n        this._keycloak.onReady = this._onReady.bind(this);\n    }\n\n    async _keycloakInit(options) {\n        // https://gitlab.tugraz.at/dbp/apps/library/issues/41\n        // retry the keycloak init in case it fails, maybe it helps :/\n        try {\n            return await this._keycloak.init(options);\n        } catch (e) {\n            return await this._keycloak.init(options);\n        }\n    }\n\n    async _ensureInit() {\n        await this._ensureInstance();\n        if (this._initDone)\n            return;\n        this._initDone = true;\n\n        const options = {\n            promiseType: 'native',\n            pkceMethod: 'S256',\n        };\n\n        if (this.DEBUG) {\n            options['enableLogging'] = true;\n        }\n\n        if (this._silentCheckSsoUri) {\n\n            options['onLoad'] = 'check-sso';\n            options['silentCheckSsoRedirectUri'] = ensureURL(this._silentCheckSsoUri);\n\n            // When silent-sso-check is active but the iframe doesn't load/work we will\n            // never return here, so add a timeout and emit a signal so the app can continue\n            await promiseTimeout(5000, this._keycloakInit(options)).catch(() => {\n                console.log('Login timed out');\n                this._onChanged();\n            });\n        } else {\n            await this._keycloakInit(options);\n        }\n\n    }\n\n    /**\n     * If this returns true you need to call login() at one point to finish the login process.\n     */\n    isLoggingIn() {\n        const href = window.location.href;\n        return (href.search('[&#]state=') >= 0 && href.search('[&#]session_state=') >= 0);\n    }\n\n    /**\n     * Logs the user in. Might lead to a site refresh or the user needing to authenticate.\n     *\n     * @param {object} options\n     * @param {string} [options.lang] - The locale to use on the keycloak login page\n     */\n    async login(options) {\n        await this._ensureInit();\n\n        options = options || {};\n        const language = options['lang'] || 'en';\n        const scope = options['scope'] || '';\n\n        if (!this._keycloak.authenticated) {\n            await this._keycloak.login({\n                kcLocale: language,  // Keycloak < 9.0\n                locale: language,\n                scope: scope,\n                idpHint: this._idpHint,\n            });\n        }\n    }\n\n    /**\n     * Logs the user in if it is possible without leaving the page or the user needing to authenticate again.\n     */\n    async tryLogin() {\n        await this._ensureInit();\n    }\n\n    /**\n     * Logs the user out locally, but not with keycloak. Login will instantly log the user back in without\n     * requiring a re-auth.\n     */\n    async localLogout() {\n        this._keycloak.clearToken();\n    }\n\n    /**\n     * Log the user out from keycloak.\n     */\n    async logout() {\n        await this._ensureInit();\n        this._keycloak.logout();\n    }\n}","export const LoginStatus = Object.freeze({\n    UNKNOWN: 'unknown',\n    LOGGING_IN: 'logging-in',\n    LOGGED_IN: 'logged-in',\n    LOGGING_OUT: 'logging-out',\n    LOGGED_OUT: 'logged-out',\n});\n","import {i18n} from './i18n.js';\nimport JSONLD from '@dbp-toolkit/common/jsonld';\nimport  {KeycloakWrapper} from './keycloak.js';\nimport {LoginStatus} from './util.js';\nimport {AdapterLitElement} from \"@dbp-toolkit/provider/src/adapter-lit-element\";\n\n\n/**\n * Keycloak auth web component\n * https://www.keycloak.org/docs/latest/securing_apps/index.html#_javascript_adapter\n *\n * Emits a dbp-set-property event for the attribute \"auth\":\n *   auth.subject: Keycloak username\n *   auth.login-status: Login status (see object LoginStatus)\n *   auth.token: Keycloak token to send with your requests\n *   auth.user-full-name: Full name of the user\n *   auth.person-id: Person identifier of the user\n *   auth.person: Person json object of the user (optional, enable by setting the `load-person` attribute)\n */\nexport class AuthKeycloak extends AdapterLitElement {\n    constructor() {\n        super();\n        this.lang = 'de';\n        this.forceLogin = false;\n        this.loadPerson = false;\n        this.token = \"\";\n        this.subject = \"\";\n        this.name = \"\";\n        this.personId = \"\";\n        this.tryLogin = false;\n        this.person = null;\n        this.entryPointUrl = '';\n        this._loginStatus = LoginStatus.UNKNOWN;\n        this.requestedLoginStatus = LoginStatus.UNKNOWN;\n\n        // Keycloak config\n        this.keycloakUrl = null;\n        this.realm = null;\n        this.clientId = null;\n        this.silentCheckSsoRedirectUri = null;\n        this.scope = null;\n        this.idpHint = '';\n\n        this._onKCChanged = this._onKCChanged.bind(this);\n    }\n\n    update(changedProperties) {\n        // console.log(\"changedProperties\", changedProperties);\n        changedProperties.forEach((oldValue, propName) => {\n            switch (propName) {\n                case 'lang':\n                    i18n.changeLanguage(this.lang);\n                break;\n                case 'requestedLoginStatus':\n                    console.log(\"requested-login-status changed\", this.requestedLoginStatus);\n                    switch(this.requestedLoginStatus) {\n                        case LoginStatus.LOGGED_IN:\n                            this._kcwrapper.login({lang: this.lang, scope: this.scope || ''});\n                        break;\n                        case LoginStatus.LOGGED_OUT:\n                            // Keycloak will redirect right away without emitting events, so we have\n                            // to do this manually here\n                            if (this._loginStatus === LoginStatus.LOGGED_IN) {\n                                this._setLoginStatus(LoginStatus.LOGGING_OUT);\n                            }\n                            this._kcwrapper.logout();\n                            // In case logout was aborted, for example with beforeunload,\n                            // revert back to being logged in\n                            if (this._loginStatus === LoginStatus.LOGGING_OUT) {\n                                this._setLoginStatus(LoginStatus.LOGGED_IN);\n                            }\n                        break;\n                    }\n                break;\n            }\n        });\n\n        super.update(changedProperties);\n    }\n\n    _onKCChanged(event) {\n        const kc = event.detail;\n        let newPerson = false;\n\n        if (kc.authenticated) {\n            let tokenChanged = (this.token !== kc.token);\n            this.name = kc.idTokenParsed.name;\n            this.token = kc.token;\n\n            this.subject = kc.subject;\n            const personId = kc.idTokenParsed.preferred_username;\n            if (personId !== this.personId) {\n                this.person = null;\n                newPerson = true;\n            }\n            this.personId = personId;\n\n            this.sendSetPropertyEvents();\n            this._setLoginStatus(LoginStatus.LOGGED_IN, tokenChanged || newPerson);\n        } else {\n            if (this._loginStatus === LoginStatus.LOGGED_IN) {\n                this._setLoginStatus(LoginStatus.LOGGING_OUT);\n            }\n            this.name = \"\";\n            this.token = \"\";\n            this.subject = \"\";\n            this.personId = \"\";\n            this.person = null;\n\n            this.sendSetPropertyEvents();\n            this._setLoginStatus(LoginStatus.LOGGED_OUT);\n        }\n\n        const that = this;\n\n        if (newPerson && this.loadPerson) {\n            JSONLD.initialize(this.entryPointUrl, (jsonld) => {\n                // find the correct api url for the current person\n                // we are fetching the logged-in person directly to respect the REST philosophy\n                // see: https://github.com/api-platform/api-platform/issues/337\n                const apiUrl = jsonld.getApiUrlForEntityName(\"Person\") + '/' + that.personId;\n\n                fetch(apiUrl, {\n                    headers: {\n                        'Content-Type': 'application/ld+json',\n                        'Authorization': 'Bearer ' + that.token,\n                    },\n                })\n                .then(response => response.json())\n                .then((person) => {\n                    that.person = person;\n                    this.sendSetPropertyEvents();\n                    this._setLoginStatus(this._loginStatus, true);\n                });\n            }, {}, that.lang);\n        }\n    }\n\n    sendSetPropertyEvents() {\n        const auth = {\n            'login-status': this._loginStatus,\n            'subject': this.subject,\n            'token': this.token,\n            'user-full-name': this.name,\n            'person-id': this.personId,\n            'person': this.person,\n        };\n\n        // inject a window.DBPAuth variable for cypress\n        if (window.Cypress) {\n            window.DBPAuth = auth;\n        }\n\n        this.sendSetPropertyEvent('auth', auth);\n        JSONLD.doInitializationOnce(this.entryPointUrl, this.token);\n\n        // this.sendSetPropertyEvent('auth-subject', this.subject);\n        // this.sendSetPropertyEvent('auth-token', this.token);\n        // this.sendSetPropertyEvent('user-full-name', this.name);\n        // this.sendSetPropertyEvent('person-id', this.personId);\n        // this.sendSetPropertyEvent('person', this.person);\n    }\n\n    _setLoginStatus(status, force) {\n        if (this._loginStatus === status && !force)\n            return;\n\n        this._loginStatus = status;\n        this.sendSetPropertyEvents();\n    }\n\n    static get properties() {\n        return {\n            ...super.properties,\n            lang: { type: String },\n            forceLogin: { type: Boolean, attribute: 'force-login' },\n            tryLogin: { type: Boolean, attribute: 'try-login' },\n            loadPerson: { type: Boolean, attribute: 'load-person' },\n            entryPointUrl: { type: String, attribute: 'entry-point-url' },\n            name: { type: String, attribute: false },\n            token: { type: String, attribute: false },\n            subject: { type: String, attribute: false },\n            personId: { type: String, attribute: false },\n            person: { type: Object, attribute: false },\n            _loginStatus: { type: String, attribute: false },\n            keycloakUrl: { type: String, attribute: 'url' },\n            realm: { type: String },\n            clientId: { type: String, attribute: 'client-id' },\n            silentCheckSsoRedirectUri: { type: String, attribute: 'silent-check-sso-redirect-uri' },\n            scope: { type: String },\n            idpHint: { type: String, attribute: 'idp-hint' },\n            requestedLoginStatus: { type: String, attribute: 'requested-login-status' },\n        };\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n\n        if (!this.keycloakUrl)\n            throw Error(\"url not set\");\n        if (!this.realm)\n            throw Error(\"realm not set\");\n        if (!this.clientId)\n            throw Error(\"client-id not set\");\n\n        this._kcwrapper = new KeycloakWrapper(this.keycloakUrl, this.realm, this.clientId, this.silentCheckSsoRedirectUri, this.idpHint);\n        this._kcwrapper.addEventListener('changed', this._onKCChanged);\n\n        const handleLogin = async () => {\n            if (this.forceLogin || this._kcwrapper.isLoggingIn()) {\n                this._setLoginStatus(LoginStatus.LOGGING_IN);\n                await this._kcwrapper.login({lang: this.lang, scope: this.scope || ''});\n            } else if (this.tryLogin) {\n                this._setLoginStatus(LoginStatus.LOGGING_IN);\n                await this._kcwrapper.tryLogin();\n                if (this._loginStatus === LoginStatus.LOGGING_IN)\n                    this._setLoginStatus(LoginStatus.LOGGED_OUT);\n            } else {\n                this._setLoginStatus(LoginStatus.LOGGED_OUT);\n            }\n        };\n\n        handleLogin();\n    }\n\n    disconnectedCallback() {\n        this._kcwrapper.close();\n        this._kcwrapper.removeEventListener('changed', this._onKCChanged);\n\n        super.disconnectedCallback();\n    }\n}","import {i18n} from './i18n.js';\nimport {html, css} from 'lit-element';\nimport {unsafeHTML} from 'lit-html/directives/unsafe-html.js';\nimport {ScopedElementsMixin} from '@open-wc/scoped-elements';\nimport * as commonStyles from '@dbp-toolkit/common/styles';\nimport {LoginStatus} from './util.js';\nimport {AdapterLitElement} from \"../../provider/src/adapter-lit-element\";\n\nlet logoutSVG = `\n<svg\n   viewBox=\"0 0 100 100\"\n   y=\"0px\"\n   x=\"0px\"\n   id=\"icon\"\n   role=\"img\"\n   version=\"1.1\">\n<g\n   id=\"g6\">\n  <path\n     d=\"m 20.749313,38.894934 -5.885859,6.967885 h 43.408213 c 1.839331,0 3.433418,1.741972 3.433418,4.064599 0,2.322628 -1.471465,4.064599 -3.433418,4.064599 H 14.863454 l 5.885859,6.967883 c 1.348843,1.596808 1.348843,4.064599 0,5.661406 -1.348843,1.596808 -3.433418,1.596808 -4.782261,0 L 1.9881356,49.927418 15.967052,33.378693 c 1.348843,-1.596806 3.433418,-1.596806 4.782261,0 1.348843,1.596807 1.348843,4.064599 0,5.516241 z\"\n     id=\"path2\"\n     style=\"stroke-width:1.33417916\"\n     inkscape:connector-curvature=\"0\" />\n  <path\n     style=\"stroke-width:0.67017764\"\n     d=\"M 61.663665,16.308792 C 48.158763,16.560171 35.913199,25.828579 30.896087,38.197464 34.816744,37.806184 40.033349,39.91491 41.470306,35.017776 50.594944,21.215302 72.517616,20.362655 82.800384,33.07637 93.497261,44.618596 90.228387,65.093356 76.499603,72.791214 64.104901,80.786232 45.895432,75.593227 39.470306,62.310745 35.613955,62.60637 27.974792,60.593775 32.925384,66.267776 41.232037,82.878292 64.023613,89.46919 79.876556,79.765823 96.140149,70.989504 102.10102,48.145494 91.970306,32.629104 85.705979,22.257901 73.793809,15.772382 61.663665,16.308792 Z\"\n     id=\"path4\"\n     inkscape:connector-curvature=\"0\" />\n</g>\n</svg>\n`;\n\nlet loginSVG = `\n<svg\n   viewBox=\"0 0 100 100\"\n   y=\"0px\"\n   x=\"0px\"\n   id=\"icon\"\n   role=\"img\"\n   version=\"1.1\">\n<g\n   id=\"g6\">\n    <path\n   style=\"stroke-width:1.33417916\"\n   id=\"path2\"\n   d=\"m 42.943908,38.894934 5.885859,6.967885 H 5.4215537 c -1.8393311,0 -3.4334181,1.741972 -3.4334181,4.064599 0,2.322628 1.4714649,4.064599 3.4334181,4.064599 H 48.829767 L 42.943908,60.9599 c -1.348843,1.596808 -1.348843,4.064599 0,5.661406 1.348843,1.596808 3.433418,1.596808 4.782261,0 L 61.705085,49.927418 47.726169,33.378693 c -1.348843,-1.596806 -3.433418,-1.596806 -4.782261,0 -1.348843,1.596807 -1.348843,4.064599 0,5.516241 z\" />\n    <path\n   id=\"path4\"\n   d=\"m 50,2.3007812 c -18.777325,0 -35.049449,10.9124408 -42.8261719,26.7246098 H 13.390625 C 20.672112,16.348362 34.336876,7.8007812 50,7.8007812 73.3,7.8007812 92.300781,26.7 92.300781,50 92.300781,73.3 73.3,92.300781 50,92.300781 c -15.673389,0 -29.345175,-8.60579 -36.623047,-21.326172 H 7.1640625 C 14.942553,86.8272 31.242598,97.800781 50.099609,97.800781 76.399609,97.800781 97.900391,76.4 97.900391,50 97.800391,23.7 76.3,2.3007812 50,2.3007812 Z\" />\n</g>\n</svg>\n`;\n\nlet loggingInSVG = `\n<svg\n   viewBox=\"0 0 100 100\"\n   y=\"0px\"\n   x=\"0px\"\n   id=\"icon\"\n   role=\"img\"\n   version=\"1.1\">\n</svg>\n`;\n\nexport class LoginButton extends ScopedElementsMixin(AdapterLitElement) {\n\n    constructor() {\n        super();\n        this.lang = 'de';\n        this.auth = {};\n    }\n\n    static get scopedElements() {\n        return {\n        };\n    }\n\n    static get properties() {\n        return {\n            lang: { type: String },\n            auth: { type: Object },\n        };\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n    }\n\n    disconnectedCallback() {\n        super.disconnectedCallback();\n    }\n\n    _onLoginClicked(e) {\n        this.sendSetPropertyEvent('requested-login-status', LoginStatus.LOGGED_IN);\n        e.preventDefault();\n    }\n\n    _onLogoutClicked(e) {\n        this.sendSetPropertyEvent('requested-login-status', LoginStatus.LOGGED_OUT);\n        e.preventDefault();\n    }\n\n    update(changedProperties) {\n        changedProperties.forEach((oldValue, propName) => {\n            if (propName === \"lang\") {\n                i18n.changeLanguage(this.lang);\n            }\n        });\n\n        super.update(changedProperties);\n    }\n\n    static get styles() {\n        // language=css\n        return [\n            commonStyles.getThemeCSS(),\n            css`\n            :host {\n                display: inline-block;\n            }\n\n            a {\n                color: currentColor;\n                cursor: pointer;\n                text-decoration: none;\n            }\n\n            .login-box {\n                display: flex;\n                align-items: center;\n                padding: 0.3em 0.4em;\n                transition: background-color 0.15s, color 0.15s;\n            }\n\n            .login-box svg {\n                width: 1.1em;\n                height: 1.1em;\n                display: flex;\n            }\n\n            .login-box:hover svg path {\n                fill: var(--dbp-light);\n            }\n\n            .login-box:hover {\n                background-color: var(--dbp-dark);\n                color: var(--dbp-light);\n                cursor: pointer;\n                transition: none;\n            }\n\n            .login-box .label {\n                padding-left: 0.2em;\n            }\n            `\n        ];\n    }\n\n    render() {\n        if (this.auth['login-status'] === LoginStatus.LOGGING_IN) {\n            // try to keep the layout the same to avoid layout shifts\n            return html`\n                <a href=\"#\">\n                    <div class=\"login-box login-button\">\n                        <div class=\"icon\">${unsafeHTML(loggingInSVG)}</div>\n                        <div class=\"label\">&#8203;</div>\n                    </div>\n                </a>\n            `;\n        } else if (this.auth['login-status'] === LoginStatus.LOGGED_IN) {\n            return html`\n                <a href=\"#\" @click=\"${this._onLogoutClicked}\">\n                    <div class=\"login-box login-button\">\n                        <div class=\"icon\">${unsafeHTML(logoutSVG)}</div>\n                        <div class=\"label\">${i18n.t('logout')}</div>\n                    </div>\n                </a>\n            `;\n        } else {\n            return html`\n                <a href=\"#\" @click=\"${this._onLoginClicked}\">\n                    <div class=\"login-box login-button\">\n                        <div class=\"icon\">${unsafeHTML(loginSVG)}</div>\n                        <div class=\"label\">${i18n.t('login')}</div>\n                    </div>\n                </a>\n            `;\n        }\n    }\n}","import {createI18nInstance} from './i18n.js';\nimport {html, css} from 'lit-element';\nimport {unsafeHTML} from 'lit-html/directives/unsafe-html.js';\nimport {ScopedElementsMixin} from '@open-wc/scoped-elements';\nimport * as commonStyles from '@dbp-toolkit/common/styles';\nimport {Icon} from '@dbp-toolkit/common';\nimport {AdapterLitElement} from \"@dbp-toolkit/provider/src/adapter-lit-element\";\nimport {LoginStatus} from \"@dbp-toolkit/auth/src/util\";\n\n\nconst i18n = createI18nInstance();\n\nexport class AuthMenuButton extends ScopedElementsMixin(AdapterLitElement) {\n\n    constructor() {\n        super();\n        this.lang = 'de';\n        this.showImage = false;\n        this.auth = {};\n\n        this.closeDropdown = this.closeDropdown.bind(this);\n        this.onWindowResize = this.onWindowResize.bind(this);\n    }\n\n    static get scopedElements() {\n        return {\n            'dbp-icon': Icon,\n        };\n    }\n\n    static get properties() {\n        return {\n            ...super.properties,\n            lang: { type: String },\n            showImage: { type: Boolean, attribute: 'show-image' },\n            auth: { type: Object },\n        };\n    }\n\n    onWindowResize() {\n        this.updateDropdownWidth();\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n\n        window.addEventListener('resize', this.onWindowResize);\n        document.addEventListener('click', this.closeDropdown);\n    }\n\n    disconnectedCallback() {\n        window.removeEventListener('resize', this.onWindowResize);\n        document.removeEventListener('click', this.closeDropdown);\n        super.disconnectedCallback();\n    }\n\n    /**\n     * Set the dropdown width to almost the width of the web component\n     * We need to set the width manually because a percent width is in relation to the viewport\n     */\n    updateDropdownWidth() {\n        const dropdown = this.shadowRoot.querySelector(\"div.dropdown-menu\");\n\n        if (!dropdown) {\n            return;\n        }\n\n        let viewportOffset = this.getBoundingClientRect();\n        let spaceToRIght = window.innerWidth - viewportOffset.left;\n        dropdown.setAttribute(\"style\", `width: ${spaceToRIght - 20}px`);\n    }\n\n    onLoginClicked(e) {\n        this.sendSetPropertyEvent('requested-login-status', LoginStatus.LOGGED_IN);\n        e.preventDefault();\n    }\n\n    onLogoutClicked(e) {\n        this.sendSetPropertyEvent('requested-login-status', LoginStatus.LOGGED_OUT);\n    }\n\n    update(changedProperties) {\n        changedProperties.forEach((oldValue, propName) => {\n            if (propName === \"lang\") {\n                i18n.changeLanguage(this.lang);\n            }\n        });\n\n        super.update(changedProperties);\n    }\n\n    static get styles() {\n        // language=css\n        return css`\n            ${commonStyles.getThemeCSS()}\n\n            :host {\n                display: inline-block;\n            }\n\n            a {\n                color: currentColor;\n                cursor: pointer;\n                text-decoration: none;\n            }\n\n            img {\n                border-width: var(--dbp-border-width);\n                border-color: var(--dbp-dark);\n                border-style: solid;\n            }\n\n            .dropdown.is-active .dropdown-menu, .dropdown.is-hoverable:hover .dropdown-menu {\n                display: block;\n            }\n\n            .dropdown-menu {\n                display: none;\n                min-width: 5em;\n                max-width: 25em;\n                position: absolute;\n                z-index: 20;\n                border: solid 1px black;\n                border-radius: var(--dbp-border-radius);\n                overflow: hidden;\n                background-color: white;\n            }\n\n            .dropdown-content {\n                background-color: white;\n                padding-bottom: 0.5rem;\n                padding-top: 0.5rem;\n            }\n\n            .dropdown-content img {\n                max-width: 120px;\n            }\n\n            .menu a {\n                /*padding: 0.3em;*/\n                font-weight: 400;\n                color: #000;\n                display: block;\n                text-decoration: none;\n            }\n\n            .menu a:hover {\n                color: #E4154B;\n            }\n\n            .menu a.selected { color: white; background-color: black; }\n\n            .dropdown-item {\n                color: #4a4a4a;\n                display: block;\n                font-size: 0.875rem;\n                line-height: 1.5;\n                padding: 0.375rem 1rem;\n                position: relative;\n            }\n\n              .dropdown, img.login {\n                cursor: pointer;\n            }\n\n            a.dropdown-item {\n                width: initial !important;\n            }\n\n            .main-button {\n                min-width: 150px;\n            }\n\n            .menu-icon {\n                height: 1em;\n                width: 1em;\n                vertical-align: -0.1rem;\n            }\n\n            .login-box svg {\n                width: 1.1em;\n                height: 1.1em;\n                display: flex;\n            }\n\n            .login-button {\n                padding: 0.3em 0.4em;\n                transition: background-color 0.15s, color 0.15s;\n            }\n\n            .login-button:hover {\n                background-color: var(--dbp-dark);\n                color: var(--dbp-light);\n                cursor: pointer;\n                transition: none;\n            }\n\n            .login-box {\n                display: flex;\n                align-items: center;\n            }\n\n            .login-box:hover svg path {\n                fill: var(--dbp-light);\n            }\n\n            .login-box .label {\n                padding-left: 0.2em;\n            }\n\n            .dropdown-trigger {\n                display: flex;\n                align-items: center;\n            }\n\n            .dropdown-trigger .name {\n                white-space: nowrap;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                min-width: 0;\n                margin-right: 0.5em\n            }\n        `;\n    }\n\n    setChevron(name) {\n        const chevron = this.shadowRoot.querySelector(\"#menu-chevron-icon\");\n        if (chevron !== null) {\n            chevron.name = name;\n        }\n    }\n\n    onDropdownClick(event) {\n        event.stopPropagation();\n        event.currentTarget.classList.toggle('is-active');\n        this.setChevron(event.currentTarget.classList.contains('is-active') ? 'chevron-up' : 'chevron-down');\n        this.updateDropdownWidth();\n    }\n\n    closeDropdown() {\n        var dropdowns = this.shadowRoot.querySelectorAll('.dropdown');\n        dropdowns.forEach(function (el) {\n            el.classList.remove('is-active');\n        });\n        this.setChevron('chevron-down');\n    }\n\n    renderLoggedIn() {\n        const person = this.auth.person;\n        const imageURL = (this.showImage && person && person.image) ? person.image : null;\n\n        return html`\n            <div class=\"dropdown\" @click=\"${this.onDropdownClick}\">\n                <a href=\"#\">\n                    <div class=\"dropdown-trigger login-button\">\n                        <div class=\"name\">${this.auth['user-full-name']}</div>\n                        <dbp-icon class=\"menu-icon\" name=\"chevron-down\" id=\"menu-chevron-icon\"></dbp-icon>\n                    </div>\n                </a>\n                <div class=\"dropdown-menu\" id=\"dropdown-menu2\" role=\"menu\">\n                    <div class=\"dropdown-content\" @blur=\"${this.closeDropdown}\">\n                        ${imageURL ? html`<div class=\"dropdown-item\"><img alt=\"\" src=\"${imageURL}\"></div>` : ''}\n                        <div class=\"menu\">\n                            <a href=\"#\" @click=\"${this.onLogoutClicked}\" class=\"dropdown-item\">${i18n.t('logout')}</a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;\n    }\n\n    renderLoggedOut() {\n        let loginSVG = `\n        <svg\n           viewBox=\"0 0 100 100\"\n           y=\"0px\"\n           x=\"0px\"\n           id=\"icon\"\n           role=\"img\"\n           version=\"1.1\">\n        <g\n           id=\"g6\">\n            <path\n           style=\"stroke-width:1.33417916\"\n           id=\"path2\"\n           d=\"m 42.943908,38.894934 5.885859,6.967885 H 5.4215537 c -1.8393311,0 -3.4334181,1.741972 -3.4334181,4.064599 0,2.322628 1.4714649,4.064599 3.4334181,4.064599 H 48.829767 L 42.943908,60.9599 c -1.348843,1.596808 -1.348843,4.064599 0,5.661406 1.348843,1.596808 3.433418,1.596808 4.782261,0 L 61.705085,49.927418 47.726169,33.378693 c -1.348843,-1.596806 -3.433418,-1.596806 -4.782261,0 -1.348843,1.596807 -1.348843,4.064599 0,5.516241 z\" />\n            <path\n           id=\"path4\"\n           d=\"m 50,2.3007812 c -18.777325,0 -35.049449,10.9124408 -42.8261719,26.7246098 H 13.390625 C 20.672112,16.348362 34.336876,7.8007812 50,7.8007812 73.3,7.8007812 92.300781,26.7 92.300781,50 92.300781,73.3 73.3,92.300781 50,92.300781 c -15.673389,0 -29.345175,-8.60579 -36.623047,-21.326172 H 7.1640625 C 14.942553,86.8272 31.242598,97.800781 50.099609,97.800781 76.399609,97.800781 97.900391,76.4 97.900391,50 97.800391,23.7 76.3,2.3007812 50,2.3007812 Z\" />\n        </g>\n        </svg>\n        `;\n\n        return html`\n            <a href=\"#\" @click=\"${this.onLoginClicked}\">\n                <div class=\"login-box login-button\">\n                    <div class=\"icon\">${unsafeHTML(loginSVG)}</div>\n                    <div class=\"label\">${i18n.t('login')}</div>\n                </div>\n            </a>\n        `;\n    }\n\n    render() {\n        const loggedIn = (this.auth['login-status'] === 'logged-in');\n        return html`\n            <div class=\"authbox\">\n                ${loggedIn ? this.renderLoggedIn() : this.renderLoggedOut()}\n            </div>\n        `;\n    }\n}","import {createInstance} from '@dbp-toolkit/common/i18next.js';\n\nimport de from './i18n/de/translation.json';\nimport en from './i18n/en/translation.json';\n\nexport const i18n = createInstance({en: en, de: de}, 'de', 'en');","import {i18n} from './i18n';\nimport {createUUID} from './utils';\nimport {css, html} from 'lit-element';\nimport DBPLitElement from '@dbp-toolkit/common/dbp-lit-element';\nimport * as commonStyles from '@dbp-toolkit/common/styles';\n\n/**\n * Notification web component\n */\nexport class Notification extends DBPLitElement {\n    constructor() {\n        super();\n        this.lang = 'de';\n    }\n\n    /**\n     * See: https://lit-element.polymer-project.org/guide/properties#initialize\n     */\n    static get properties() {\n        return {\n            ...super.properties,\n            lang: { type: String },\n        };\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n        i18n.changeLanguage(this.lang);\n        const that = this;\n\n        window.addEventListener(\"dbp-notification-send\", (e) => {\n            if (typeof e.detail === 'undefined') {\n                return;\n            }\n\n            that.notificationBlock = that._(\"#notification\");\n            const notificationId = `notification-${createUUID()}`;\n\n            const type = typeof e.detail.type !== 'undefined' ? e.detail.type : \"info\";\n            const body = typeof e.detail.body !== 'undefined' ? e.detail.body : \"\";\n            const summary = typeof e.detail.summary !== 'undefined' ? e.detail.summary : \"\";\n            const timeout = typeof e.detail.timeout !== 'undefined' ? e.detail.timeout : 0;\n            const icon = typeof e.detail.icon !== 'undefined' ? e.detail.icon : '';\n            const iconHTML = icon !== '' ? `<dbp-icon name=\"${icon}\"></dbp-icon>` : \"\";\n            const summaryHTML = summary !== \"\" ? `<h3>${summary}</h3>` : \"\";\n\n            that.notificationBlock.innerHTML = `\n                <div id=\"${notificationId}\" class=\"notification is-${type}\">\n                    <button id=\"${notificationId}-button\" onclick=\"parentNode.parentNode.removeChild(parentNode)\" class=\"delete\"></button>\n                    ${summaryHTML}\n                    ${iconHTML} ${body}\n                </div>\n            ` + that.notificationBlock.innerHTML;\n\n            const messageId = `#${notificationId}`;\n\n            if (timeout > 0) {\n                setTimeout(() => {\n                    that.removeMessageId(messageId);\n                }, timeout * 1000);\n            }\n\n            // mark the event as handled\n            e.preventDefault();\n        });\n\n        this.updateComplete.then(()=>{\n        });\n    }\n\n    removeMessageId(messageElementId) {\n        const element = this._(messageElementId);\n\n        if (element) {\n            this.notificationBlock.removeChild(element);\n        }\n    }\n\n    static get styles() {\n        // language=css\n        return css`\n            ${commonStyles.getThemeCSS()}\n            ${commonStyles.getGeneralCSS()}\n            ${commonStyles.getNotificationCSS()}\n\n            .notification:not(:last-child) {\n                margin-bottom: 1.5rem;\n            }\n\n            .notification h3 {\n                font-weight: bold;\n                margin-bottom: 3px;\n            }\n\n            .delete, .modal-close {\n                -moz-appearance: none;\n                -webkit-appearance: none;\n                background-color: rgba(10,10,10,.2);\n                border: none;\n                border-radius: 290486px;\n                cursor: pointer;\n                pointer-events: auto;\n                display: inline-block;\n                flex-grow: 0;\n                flex-shrink: 0;\n                font-size: 0;\n                height: 20px;\n                max-height: 20px;\n                max-width: 20px;\n                min-height: 20px;\n                min-width: 20px;\n                outline: 0;\n                position: relative;\n                vertical-align: top;\n                width: 20px;\n            }\n\n            .delete::before, .modal-close::before, .delete::after, .modal-close::after {\n                background-color: white;\n                content: \"\";\n                display: block;\n                left: 50%;\n                position: absolute;\n                top: 50%;\n                -webkit-transform: translateX(-50%) translateY(-50%) rotate(45deg);\n                        transform: translateX(-50%) translateY(-50%) rotate(45deg);\n                -webkit-transform-origin: center center;\n                        transform-origin: center center;\n            }\n\n            .delete::before, .modal-close::before {\n                height: 2px;\n                width: 50%;\n            }\n\n            .delete::after, .modal-close::after {\n                height: 50%;\n                width: 2px;\n            }\n\n            .delete:hover, .modal-close:hover, .delete:focus, .modal-close:focus {\n                background-color: rgba(10, 10, 10, 0.3);\n            }\n\n            .delete:active, .modal-close:active {\n                background-color: rgba(10, 10, 10, 0.4);\n            }\n\n            #notification {\n                position: fixed; top: 0; max-width: 500px; margin: 0.75em auto; left: 0; right: 0; z-index: 1000; padding: 0;\n            }\n\n            .notification h3 {\n                margin: 0 0 3px 0;\n                font: inherit;\n                font-weight: bold; \n            }\n        `;\n    }\n\n    render() {\n        return html`\n            <div class=\"columns\">\n                <div class=\"column\" id=\"notification\">\n                </div>\n            </div>\n        `;\n    }\n}","export const createUUID = () => {\n    let dt = new Date().getTime();\n    const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n        const r = (dt + Math.random()*16)%16 | 0;\n        dt = Math.floor(dt/16);\n        return (c==='x' ? r :(r&0x3|0x8)).toString(16);\n    });\n\n    return uuid;\n};\n\n","/**\n * Tokenize input string.\n */\nfunction lexer(str) {\n    var tokens = [];\n    var i = 0;\n    while (i < str.length) {\n        var char = str[i];\n        if (char === \"*\" || char === \"+\" || char === \"?\") {\n            tokens.push({ type: \"MODIFIER\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \"\\\\\") {\n            tokens.push({ type: \"ESCAPED_CHAR\", index: i++, value: str[i++] });\n            continue;\n        }\n        if (char === \"{\") {\n            tokens.push({ type: \"OPEN\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \"}\") {\n            tokens.push({ type: \"CLOSE\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \":\") {\n            var name = \"\";\n            var j = i + 1;\n            while (j < str.length) {\n                var code = str.charCodeAt(j);\n                if (\n                // `0-9`\n                (code >= 48 && code <= 57) ||\n                    // `A-Z`\n                    (code >= 65 && code <= 90) ||\n                    // `a-z`\n                    (code >= 97 && code <= 122) ||\n                    // `_`\n                    code === 95) {\n                    name += str[j++];\n                    continue;\n                }\n                break;\n            }\n            if (!name)\n                throw new TypeError(\"Missing parameter name at \" + i);\n            tokens.push({ type: \"NAME\", index: i, value: name });\n            i = j;\n            continue;\n        }\n        if (char === \"(\") {\n            var count = 1;\n            var pattern = \"\";\n            var j = i + 1;\n            if (str[j] === \"?\") {\n                throw new TypeError(\"Pattern cannot start with \\\"?\\\" at \" + j);\n            }\n            while (j < str.length) {\n                if (str[j] === \"\\\\\") {\n                    pattern += str[j++] + str[j++];\n                    continue;\n                }\n                if (str[j] === \")\") {\n                    count--;\n                    if (count === 0) {\n                        j++;\n                        break;\n                    }\n                }\n                else if (str[j] === \"(\") {\n                    count++;\n                    if (str[j + 1] !== \"?\") {\n                        throw new TypeError(\"Capturing groups are not allowed at \" + j);\n                    }\n                }\n                pattern += str[j++];\n            }\n            if (count)\n                throw new TypeError(\"Unbalanced pattern at \" + i);\n            if (!pattern)\n                throw new TypeError(\"Missing pattern at \" + i);\n            tokens.push({ type: \"PATTERN\", index: i, value: pattern });\n            i = j;\n            continue;\n        }\n        tokens.push({ type: \"CHAR\", index: i, value: str[i++] });\n    }\n    tokens.push({ type: \"END\", index: i, value: \"\" });\n    return tokens;\n}\n/**\n * Parse a string for the raw tokens.\n */\nexport function parse(str, options) {\n    if (options === void 0) { options = {}; }\n    var tokens = lexer(str);\n    var _a = options.prefixes, prefixes = _a === void 0 ? \"./\" : _a;\n    var defaultPattern = \"[^\" + escapeString(options.delimiter || \"/#?\") + \"]+?\";\n    var result = [];\n    var key = 0;\n    var i = 0;\n    var path = \"\";\n    var tryConsume = function (type) {\n        if (i < tokens.length && tokens[i].type === type)\n            return tokens[i++].value;\n    };\n    var mustConsume = function (type) {\n        var value = tryConsume(type);\n        if (value !== undefined)\n            return value;\n        var _a = tokens[i], nextType = _a.type, index = _a.index;\n        throw new TypeError(\"Unexpected \" + nextType + \" at \" + index + \", expected \" + type);\n    };\n    var consumeText = function () {\n        var result = \"\";\n        var value;\n        // tslint:disable-next-line\n        while ((value = tryConsume(\"CHAR\") || tryConsume(\"ESCAPED_CHAR\"))) {\n            result += value;\n        }\n        return result;\n    };\n    while (i < tokens.length) {\n        var char = tryConsume(\"CHAR\");\n        var name = tryConsume(\"NAME\");\n        var pattern = tryConsume(\"PATTERN\");\n        if (name || pattern) {\n            var prefix = char || \"\";\n            if (prefixes.indexOf(prefix) === -1) {\n                path += prefix;\n                prefix = \"\";\n            }\n            if (path) {\n                result.push(path);\n                path = \"\";\n            }\n            result.push({\n                name: name || key++,\n                prefix: prefix,\n                suffix: \"\",\n                pattern: pattern || defaultPattern,\n                modifier: tryConsume(\"MODIFIER\") || \"\"\n            });\n            continue;\n        }\n        var value = char || tryConsume(\"ESCAPED_CHAR\");\n        if (value) {\n            path += value;\n            continue;\n        }\n        if (path) {\n            result.push(path);\n            path = \"\";\n        }\n        var open = tryConsume(\"OPEN\");\n        if (open) {\n            var prefix = consumeText();\n            var name_1 = tryConsume(\"NAME\") || \"\";\n            var pattern_1 = tryConsume(\"PATTERN\") || \"\";\n            var suffix = consumeText();\n            mustConsume(\"CLOSE\");\n            result.push({\n                name: name_1 || (pattern_1 ? key++ : \"\"),\n                pattern: name_1 && !pattern_1 ? defaultPattern : pattern_1,\n                prefix: prefix,\n                suffix: suffix,\n                modifier: tryConsume(\"MODIFIER\") || \"\"\n            });\n            continue;\n        }\n        mustConsume(\"END\");\n    }\n    return result;\n}\n/**\n * Compile a string to a template function for the path.\n */\nexport function compile(str, options) {\n    return tokensToFunction(parse(str, options), options);\n}\n/**\n * Expose a method for transforming tokens into the path function.\n */\nexport function tokensToFunction(tokens, options) {\n    if (options === void 0) { options = {}; }\n    var reFlags = flags(options);\n    var _a = options.encode, encode = _a === void 0 ? function (x) { return x; } : _a, _b = options.validate, validate = _b === void 0 ? true : _b;\n    // Compile all the tokens into regexps.\n    var matches = tokens.map(function (token) {\n        if (typeof token === \"object\") {\n            return new RegExp(\"^(?:\" + token.pattern + \")$\", reFlags);\n        }\n    });\n    return function (data) {\n        var path = \"\";\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            if (typeof token === \"string\") {\n                path += token;\n                continue;\n            }\n            var value = data ? data[token.name] : undefined;\n            var optional = token.modifier === \"?\" || token.modifier === \"*\";\n            var repeat = token.modifier === \"*\" || token.modifier === \"+\";\n            if (Array.isArray(value)) {\n                if (!repeat) {\n                    throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to not repeat, but got an array\");\n                }\n                if (value.length === 0) {\n                    if (optional)\n                        continue;\n                    throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to not be empty\");\n                }\n                for (var j = 0; j < value.length; j++) {\n                    var segment = encode(value[j], token);\n                    if (validate && !matches[i].test(segment)) {\n                        throw new TypeError(\"Expected all \\\"\" + token.name + \"\\\" to match \\\"\" + token.pattern + \"\\\", but got \\\"\" + segment + \"\\\"\");\n                    }\n                    path += token.prefix + segment + token.suffix;\n                }\n                continue;\n            }\n            if (typeof value === \"string\" || typeof value === \"number\") {\n                var segment = encode(String(value), token);\n                if (validate && !matches[i].test(segment)) {\n                    throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to match \\\"\" + token.pattern + \"\\\", but got \\\"\" + segment + \"\\\"\");\n                }\n                path += token.prefix + segment + token.suffix;\n                continue;\n            }\n            if (optional)\n                continue;\n            var typeOfMessage = repeat ? \"an array\" : \"a string\";\n            throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to be \" + typeOfMessage);\n        }\n        return path;\n    };\n}\n/**\n * Create path match function from `path-to-regexp` spec.\n */\nexport function match(str, options) {\n    var keys = [];\n    var re = pathToRegexp(str, keys, options);\n    return regexpToFunction(re, keys, options);\n}\n/**\n * Create a path match function from `path-to-regexp` output.\n */\nexport function regexpToFunction(re, keys, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.decode, decode = _a === void 0 ? function (x) { return x; } : _a;\n    return function (pathname) {\n        var m = re.exec(pathname);\n        if (!m)\n            return false;\n        var path = m[0], index = m.index;\n        var params = Object.create(null);\n        var _loop_1 = function (i) {\n            // tslint:disable-next-line\n            if (m[i] === undefined)\n                return \"continue\";\n            var key = keys[i - 1];\n            if (key.modifier === \"*\" || key.modifier === \"+\") {\n                params[key.name] = m[i].split(key.prefix + key.suffix).map(function (value) {\n                    return decode(value, key);\n                });\n            }\n            else {\n                params[key.name] = decode(m[i], key);\n            }\n        };\n        for (var i = 1; i < m.length; i++) {\n            _loop_1(i);\n        }\n        return { path: path, index: index, params: params };\n    };\n}\n/**\n * Escape a regular expression string.\n */\nfunction escapeString(str) {\n    return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n}\n/**\n * Get the flags for a regexp from the options.\n */\nfunction flags(options) {\n    return options && options.sensitive ? \"\" : \"i\";\n}\n/**\n * Pull out keys from a regexp.\n */\nfunction regexpToRegexp(path, keys) {\n    if (!keys)\n        return path;\n    var groupsRegex = /\\((?:\\?<(.*?)>)?(?!\\?)/g;\n    var index = 0;\n    var execResult = groupsRegex.exec(path.source);\n    while (execResult) {\n        keys.push({\n            // Use parenthesized substring match if available, index otherwise\n            name: execResult[1] || index++,\n            prefix: \"\",\n            suffix: \"\",\n            modifier: \"\",\n            pattern: \"\"\n        });\n        execResult = groupsRegex.exec(path.source);\n    }\n    return path;\n}\n/**\n * Transform an array into a regexp.\n */\nfunction arrayToRegexp(paths, keys, options) {\n    var parts = paths.map(function (path) { return pathToRegexp(path, keys, options).source; });\n    return new RegExp(\"(?:\" + parts.join(\"|\") + \")\", flags(options));\n}\n/**\n * Create a path regexp from string input.\n */\nfunction stringToRegexp(path, keys, options) {\n    return tokensToRegexp(parse(path, options), keys, options);\n}\n/**\n * Expose a function for taking tokens and returning a RegExp.\n */\nexport function tokensToRegexp(tokens, keys, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.strict, strict = _a === void 0 ? false : _a, _b = options.start, start = _b === void 0 ? true : _b, _c = options.end, end = _c === void 0 ? true : _c, _d = options.encode, encode = _d === void 0 ? function (x) { return x; } : _d;\n    var endsWith = \"[\" + escapeString(options.endsWith || \"\") + \"]|$\";\n    var delimiter = \"[\" + escapeString(options.delimiter || \"/#?\") + \"]\";\n    var route = start ? \"^\" : \"\";\n    // Iterate over the tokens and create our regexp string.\n    for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\n        var token = tokens_1[_i];\n        if (typeof token === \"string\") {\n            route += escapeString(encode(token));\n        }\n        else {\n            var prefix = escapeString(encode(token.prefix));\n            var suffix = escapeString(encode(token.suffix));\n            if (token.pattern) {\n                if (keys)\n                    keys.push(token);\n                if (prefix || suffix) {\n                    if (token.modifier === \"+\" || token.modifier === \"*\") {\n                        var mod = token.modifier === \"*\" ? \"?\" : \"\";\n                        route += \"(?:\" + prefix + \"((?:\" + token.pattern + \")(?:\" + suffix + prefix + \"(?:\" + token.pattern + \"))*)\" + suffix + \")\" + mod;\n                    }\n                    else {\n                        route += \"(?:\" + prefix + \"(\" + token.pattern + \")\" + suffix + \")\" + token.modifier;\n                    }\n                }\n                else {\n                    route += \"(\" + token.pattern + \")\" + token.modifier;\n                }\n            }\n            else {\n                route += \"(?:\" + prefix + suffix + \")\" + token.modifier;\n            }\n        }\n    }\n    if (end) {\n        if (!strict)\n            route += delimiter + \"?\";\n        route += !options.endsWith ? \"$\" : \"(?=\" + endsWith + \")\";\n    }\n    else {\n        var endToken = tokens[tokens.length - 1];\n        var isEndDelimited = typeof endToken === \"string\"\n            ? delimiter.indexOf(endToken[endToken.length - 1]) > -1\n            : // tslint:disable-next-line\n                endToken === undefined;\n        if (!strict) {\n            route += \"(?:\" + delimiter + \"(?=\" + endsWith + \"))?\";\n        }\n        if (!isEndDelimited) {\n            route += \"(?=\" + delimiter + \"|\" + endsWith + \")\";\n        }\n    }\n    return new RegExp(route, flags(options));\n}\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n */\nexport function pathToRegexp(path, keys, options) {\n    if (path instanceof RegExp)\n        return regexpToRegexp(path, keys);\n    if (Array.isArray(path))\n        return arrayToRegexp(path, keys, options);\n    return stringToRegexp(path, keys, options);\n}\n//# sourceMappingURL=index.js.map","/*! Universal Router | MIT License | https://www.kriasoft.com/universal-router/ */\n\nimport { match } from 'path-to-regexp';\n\nfunction decode(val) {\n  try {\n    return decodeURIComponent(val);\n  } catch (err) {\n    return val;\n  }\n}\n\nfunction matchRoute(route, baseUrl, options, pathname, parentParams) {\n  var matchResult;\n  var childMatches;\n  var childIndex = 0;\n  return {\n    next: function next(routeToSkip) {\n      if (route === routeToSkip) {\n        return {\n          done: true,\n          value: false\n        };\n      }\n\n      if (!matchResult) {\n        var rt = route;\n        var end = !rt.children;\n\n        if (!rt.match) {\n          rt.match = match(rt.path || '', Object.assign({\n            end: end\n          }, options));\n        }\n\n        matchResult = rt.match(pathname);\n\n        if (matchResult) {\n          var _matchResult = matchResult,\n              path = _matchResult.path;\n          matchResult.path = !end && path.charAt(path.length - 1) === '/' ? path.substr(1) : path;\n          matchResult.params = Object.assign({}, parentParams, {}, matchResult.params);\n          return {\n            done: false,\n            value: {\n              route: route,\n              baseUrl: baseUrl,\n              path: matchResult.path,\n              params: matchResult.params\n            }\n          };\n        }\n      }\n\n      if (matchResult && route.children) {\n        while (childIndex < route.children.length) {\n          if (!childMatches) {\n            var childRoute = route.children[childIndex];\n            childRoute.parent = route;\n            childMatches = matchRoute(childRoute, baseUrl + matchResult.path, options, pathname.substr(matchResult.path.length), matchResult.params);\n          }\n\n          var childMatch = childMatches.next(routeToSkip);\n\n          if (!childMatch.done) {\n            return {\n              done: false,\n              value: childMatch.value\n            };\n          }\n\n          childMatches = null;\n          childIndex++;\n        }\n      }\n\n      return {\n        done: true,\n        value: false\n      };\n    }\n  };\n}\n\nfunction resolveRoute(context, params) {\n  if (typeof context.route.action === 'function') {\n    return context.route.action(context, params);\n  }\n\n  return undefined;\n}\n\nfunction isChildRoute(parentRoute, childRoute) {\n  var route = childRoute;\n\n  while (route) {\n    route = route.parent;\n\n    if (route === parentRoute) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar UniversalRouter = function () {\n  function UniversalRouter(routes, options) {\n    if (!routes || typeof routes !== 'object') {\n      throw new TypeError('Invalid routes');\n    }\n\n    this.options = Object.assign({\n      decode: decode\n    }, options);\n    this.baseUrl = this.options.baseUrl || '';\n    this.root = Array.isArray(routes) ? {\n      path: '',\n      children: routes,\n      parent: null\n    } : routes;\n    this.root.parent = null;\n  }\n\n  var _proto = UniversalRouter.prototype;\n\n  _proto.resolve = function resolve(pathnameOrContext) {\n    var _this = this;\n\n    var context = Object.assign({\n      router: this\n    }, this.options.context, {}, typeof pathnameOrContext === 'string' ? {\n      pathname: pathnameOrContext\n    } : pathnameOrContext);\n    var matchResult = matchRoute(this.root, this.baseUrl, this.options, context.pathname.substr(this.baseUrl.length));\n    var resolve = this.options.resolveRoute || resolveRoute;\n    var matches;\n    var nextMatches;\n    var currentContext = context;\n\n    function next(resume, parent, prevResult) {\n      if (parent === void 0) {\n        parent = !matches.done && matches.value.route;\n      }\n\n      var routeToSkip = prevResult === null && !matches.done && matches.value.route;\n      matches = nextMatches || matchResult.next(routeToSkip);\n      nextMatches = null;\n\n      if (!resume) {\n        if (matches.done || !isChildRoute(parent, matches.value.route)) {\n          nextMatches = matches;\n          return Promise.resolve(null);\n        }\n      }\n\n      if (matches.done) {\n        var error = new Error('Route not found');\n        error.status = 404;\n        return Promise.reject(error);\n      }\n\n      currentContext = Object.assign({}, context, {}, matches.value);\n      return Promise.resolve(resolve(currentContext, matches.value.params)).then(function (result) {\n        if (result !== null && result !== undefined) {\n          return result;\n        }\n\n        return next(resume, parent, result);\n      });\n    }\n\n    context.next = next;\n    return Promise.resolve().then(function () {\n      return next(true, _this.root);\n    })[\"catch\"](function (error) {\n      if (_this.options.errorHandler) {\n        return _this.options.errorHandler(error, currentContext);\n      }\n\n      throw error;\n    });\n  };\n\n  return UniversalRouter;\n}();\n\nexport default UniversalRouter;\n//# sourceMappingURL=module.js.map\n","/*! Universal Router | MIT License | https://www.kriasoft.com/universal-router/ */\n\nimport { parse, tokensToFunction } from 'path-to-regexp';\n\nfunction cacheRoutes(routesByName, route, routes) {\n  if (route.name && routesByName.has(route.name)) {\n    throw new Error(\"Route \\\"\" + route.name + \"\\\" already exists\");\n  }\n\n  if (route.name) {\n    routesByName.set(route.name, route);\n  }\n\n  if (routes) {\n    for (var i = 0; i < routes.length; i++) {\n      var childRoute = routes[i];\n      childRoute.parent = route;\n      cacheRoutes(routesByName, childRoute, childRoute.children);\n    }\n  }\n}\n\nfunction generateUrls(router, options) {\n  if (!router) {\n    throw new ReferenceError('Router is not defined');\n  }\n\n  var routesByName = new Map();\n  var regexpByRoute = new Map();\n  var opts = Object.assign({\n    encode: encodeURIComponent\n  }, options);\n  return function (routeName, params) {\n    var route = routesByName.get(routeName);\n\n    if (!route) {\n      routesByName.clear();\n      regexpByRoute.clear();\n      cacheRoutes(routesByName, router.root, router.root.children);\n      route = routesByName.get(routeName);\n\n      if (!route) {\n        throw new Error(\"Route \\\"\" + routeName + \"\\\" not found\");\n      }\n    }\n\n    var regexp = regexpByRoute.get(route);\n\n    if (!regexp) {\n      var fullPath = '';\n      var rt = route;\n\n      while (rt) {\n        var path = Array.isArray(rt.path) ? rt.path[0] : rt.path;\n\n        if (path) {\n          fullPath = path + fullPath;\n        }\n\n        rt = rt.parent;\n      }\n\n      var tokens = parse(fullPath, opts);\n      var toPath = tokensToFunction(tokens, opts);\n      var keys = Object.create(null);\n\n      for (var i = 0; i < tokens.length; i++) {\n        var token = tokens[i];\n\n        if (typeof token !== 'string') {\n          keys[token.name] = true;\n        }\n      }\n\n      regexp = {\n        toPath: toPath,\n        keys: keys\n      };\n      regexpByRoute.set(route, regexp);\n    }\n\n    var url = router.baseUrl + regexp.toPath(params) || '/';\n\n    if (opts.stringifyQueryParams && params) {\n      var queryParams = {};\n\n      var _keys = Object.keys(params);\n\n      for (var _i = 0; _i < _keys.length; _i++) {\n        var key = _keys[_i];\n\n        if (!regexp.keys[key]) {\n          queryParams[key] = params[key];\n        }\n      }\n\n      var query = opts.stringifyQueryParams(queryParams);\n\n      if (query) {\n        url += query.charAt(0) === '?' ? query : \"?\" + query;\n      }\n    }\n\n    return url;\n  };\n}\n\nexport default generateUrls;\n//# sourceMappingURL=module.js.map\n","import UniversalRouter from 'universal-router';\nimport generateUrls from 'universal-router/generateUrls';\n\n/**\n * A wrapper around UniversalRouter which adds history integration\n */\nexport class Router {\n\n    /**\n     * @param {Array} routes The routes passed to UniversalRouter\n     * @param {object} options Options\n     * @param {string} options.routeName The main route name\n     * @param {Function} options.getState Function which should return the current state\n     * @param {Function} options.setState Function which gets passed the new state based on the route\n     * @param {object} unioptions options passed to UniversalRouter\n     */\n    constructor(routes, options, unioptions) {\n        this.getState = options.getState;\n        this.setState = options.setState;\n        // XXX: We only have one route atm\n        // If we need more we need to pass the route name to each function\n        this.routeName = options.routeName;\n\n        console.assert(this.getState);\n        console.assert(this.setState);\n        console.assert(this.routeName);\n\n        // https://github.com/kriasoft/universal-router\n        this.router = new UniversalRouter(routes, unioptions);\n\n        window.addEventListener('popstate', (event) => {\n            this.setStateFromCurrentLocation();\n            this.dispatchLocationChanged();\n        });\n    }\n\n    /**\n     * In case something else has changed the location, update the app state accordingly.\n     */\n    setStateFromCurrentLocation() {\n        const oldPathName = location.pathname;\n        this.router.resolve({pathname: oldPathName}).then(page => {\n            const newPathname = this.getPathname(page);\n            // In case of a router redirect, set the new location\n            if (newPathname !== oldPathName) {\n                const referrerUrl = location.href;\n                window.history.replaceState({}, '', newPathname);\n                this.dispatchLocationChanged(referrerUrl);\n            }\n            this.setState(page);\n        }).catch((e) => {\n            // In case we can't resolve the location, just leave things as is.\n            // This happens when a user enters a wrong URL or when testing with karma.\n        });\n    }\n\n    /**\n     * Update the router after some internal state change.\n     */\n    update() {\n        // Queue updates so we can call this multiple times when changing state\n        // without it resulting in multiple location changes\n        setTimeout(() => {\n            const newPathname = this.getPathname();\n            const oldPathname = location.pathname;\n            if (newPathname === oldPathname)\n                return;\n            const referrerUrl = location.href;\n            window.history.pushState({}, '', newPathname);\n            this.dispatchLocationChanged(referrerUrl);\n        });\n    }\n\n    /**\n     * Given a new routing path set the location and the app state.\n     *\n     * @param {string} pathname\n     */\n    updateFromPathname(pathname) {\n        this.router.resolve({pathname: pathname}).then(page => {\n            if (location.pathname === pathname)\n                return;\n            const referrerUrl = location.href;\n            window.history.pushState({}, '', pathname);\n            this.setState(page);\n            this.dispatchLocationChanged(referrerUrl);\n        }).catch((err) => {\n            throw new Error(`Route not found: ${pathname}: ${err}`);\n        });\n    }\n\n    /**\n     * Pass some new router state to get a new router path that can\n     * be passed to updateFromPathname() later on. If nothing is\n     * passed the current state is used.\n     *\n     * @param {object} [partialState] The optional partial new state\n     * @returns {string} The new path\n     */\n    getPathname(partialState) {\n        const currentState = this.getState();\n        if (partialState === undefined)\n            partialState = {};\n        let combined = {...currentState, ...partialState};\n        return generateUrls(this.router)(this.routeName, combined);\n    }\n\n    dispatchLocationChanged(referrerUrl = \"\") {\n        // fire a locationchanged event\n        window.dispatchEvent(new CustomEvent('locationchanged', {\n            detail: {\n                referrerUrl: referrerUrl,\n            },\n            bubbles: true\n        }));\n    }\n}\n","import {html, css} from 'lit-element';\nimport * as commonStyles from '@dbp-toolkit/common/styles';\nimport {AdapterLitElement} from \"@dbp-toolkit/provider/src/adapter-lit-element\";\n\nexport class BuildInfo extends AdapterLitElement {\n\n    constructor() {\n        super();\n        this.env = '';\n        this.gitInfo = '';\n        this.buildUrl = '';\n        this.buildTime = '';\n    }\n\n    static get properties() {\n        return {\n            ...super.properties,\n            env: { type: String },\n            buildUrl: { type: String, attribute: \"build-url\" },\n            buildTime: { type: String, attribute: \"build-time\" },\n            gitInfo: { type: String, attribute: \"git-info\" }\n        };\n    }\n\n    static get styles() {\n        return css`\n            ${commonStyles.getThemeCSS()}\n            ${commonStyles.getGeneralCSS()}\n            ${commonStyles.getTagCSS()}\n\n            :host {\n                display: inline-block;\n            }\n        `;\n    } \n\n    render() {\n        const date = new Date(this.buildTime);\n\n        return html`\n            <a href=\"${this.buildUrl}\" style=\"float: right\">\n                <div class=\"tags has-addons\" title=\"Build Time: ${date.toString()}\">\n                    <span class=\"tag is-light\">build</span>\n                    <span class=\"tag is-dark\">${this.gitInfo} (${this.env})</span>\n                </div>\n            </a>\n        `;\n    }\n}","import {html, css} from 'lit-element';\nimport * as commonStyles from '@dbp-toolkit/common/styles';\nimport {createI18nInstance} from './i18n.js';\nimport {AdapterLitElement} from \"@dbp-toolkit/provider/src/adapter-lit-element\";\n\nconst i18n = createI18nInstance();\n\nexport class TUGrazLogo extends AdapterLitElement {\n\n    constructor() {\n        super();\n\n        this.lang = i18n.language;\n    }\n\n    static get properties() {\n        return {\n            ...super.properties,\n            lang: { type: String }\n        };\n    }\n\n    update(changedProperties) {\n        changedProperties.forEach((oldValue, propName) => {\n            if (propName === \"lang\") {\n                i18n.changeLanguage(this.lang);\n            }\n        });\n        super.update(changedProperties);\n    }\n\n    static get styles() {\n        return css`\n            ${commonStyles.getThemeCSS()}\n            ${commonStyles.getGeneralCSS()}\n\n            :host {\n                display: inline-block;\n            }\n\n            #claim\n            {\n                font-size: 12px;\n                text-align: right;\n                padding: 0 17px 0 0;\n                line-height: 17px;\n                letter-spacing: 2px;\n                vertical-align: top;\n                text-transform: uppercase;\n                display: inline-block;\n                white-space: nowrap;\n            }\n\n            #img {\n                overflow: visible;\n            }\n\n            a:hover path, a:focus path {\n                fill:#000 !important;\n                transition:none;\n            }\n\n             * {\n                transition:fill 0.15s, stroke 0.15s;\n            }\n        `;\n    } \n\n    render() {\n        return html`\n            <a href=\"https://www.tugraz.at\" title=\"TU Graz Home\" target=\"_blank\" rel=\"noopener\">\n                <div id=\"claim\">\n                    <div class=\"int-header-logo-claim-single\">${i18n.t('logo.word1')}</div>\n                    <div class=\"int-header-logo-claim-single\">${i18n.t('logo.word2')}</div>\n                    <div class=\"int-header-logo-claim-single\">${i18n.t('logo.word3')}</div>\n                </div>\n                <svg id=\"img\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns=\"http://www.w3.org/2000/svg\" xml:space=\"preserve\" height=\"51.862\" width=\"141.1\" version=\"1.1\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\" viewBox=\"0 0 141.10001 51.862499\"><g transform=\"matrix(1.25 0 0 -1.25 0 51.862)\"><g transform=\"scale(.1)\"><path style=\"fill:#e4154b\" d=\"m0 103.73h207.45v207.46l-207.45 0.01v-207.47z\"></path><path style=\"fill:#e4154b\" d=\"m228.19 103.73h207.46v207.46h-207.46v-207.46z\"></path><path style=\"fill:#e4154b\" d=\"m456.41 103.73h207.44v207.46h-207.44v-207.46z\"></path><path style=\"fill:#e4154b\" d=\"m103.72 0h207.47v207.46h-207.47v-207.46z\"></path><path style=\"fill:#e4154b\" d=\"m352.68 207.46h207.44v207.46h-207.44v-207.46z\"></path><path style=\"fill:#231f20\" d=\"m751.04 277.91h-66.426v33.195h171.19v-33.195h-66.407v-173.73h-38.359v173.73\"></path><path style=\"fill:#231f20\" d=\"m1048.3 180.22c0-12.461-2.25-23.711-6.72-33.75-4.5-10.039-10.61-18.555-18.36-25.567-7.76-7.031-16.9-12.421-27.503-16.21-10.605-3.809-22.109-5.7036-34.551-5.7036-12.422 0-23.945 1.8946-34.551 5.7036-10.605 3.789-19.824 9.179-27.656 16.21-7.851 7.012-13.984 15.528-18.34 25.567-4.394 10.039-6.582 21.289-6.582 33.75v130.89h38.379v-129.59c0-5.039 0.801-10.351 2.442-15.898 1.64-5.547 4.336-10.664 8.125-15.332s8.789-8.516 15.039-11.523c6.211-3.008 13.926-4.512 23.144-4.512 9.199 0 16.914 1.504 23.145 4.512 6.23 3.007 11.25 6.855 15.039 11.523 3.77 4.668 6.48 9.785 8.12 15.332 1.63 5.547 2.45 10.859 2.45 15.898v129.59h38.38v-130.89\"></path><path style=\"fill:#231f20\" d=\"m832.56 75.664c-7.597 3.2812-17.46 4.8632-25.332 4.8632-22.929 0-35.605-14.434-35.605-33.184 0-18.613 12.383-32.637 33.34-32.637 5.351 0 9.59 0.5274 12.969 1.3086v23.867h-20.84v14.414h39.687v-49.297c-10.41-2.6172-21.25-4.707-31.816-4.707-31.797 0-53.906 14.805-53.906 45.742 0 31.348 20.566 48.906 53.906 48.906 11.406 0 20.41-1.4453 28.867-3.8086l-1.27-15.469\"></path><path style=\"fill:#231f20\" d=\"m856.2 69.375h16.758v-15.332h0.293c0.84 6.289 8.574 16.914 19.824 16.914 1.836 0 3.828 0 5.782-0.5273v-17.715c-1.68 0.918-5.059 1.4454-8.457 1.4454-15.333 0-15.333-17.832-15.333-27.52v-24.785h-18.867v67.52\"></path><path style=\"fill:#231f20\" d=\"m913.75 65.84c7.324 3.1446 17.187 5.1172 25.215 5.1172 22.09 0 31.23-8.5351 31.23-28.457v-8.6523c0-6.8165 0.156-11.934 0.293-16.914 0.137-5.1172 0.41-9.8242 0.84-15.078h-16.602c-0.703 3.5352-0.703 8.0078-0.839 10.098h-0.293c-4.36-7.4618-13.81-11.661-22.38-11.661-12.793 0-25.332 7.207-25.332 20.059 0 10.078 5.195 15.976 12.383 19.258 7.187 3.2812 16.464 3.9453 24.355 3.9453h10.41c0 10.879-5.195 14.551-16.328 14.551-8.008 0-16.035-2.8907-22.363-7.3438l-0.586 15.078zm22.11-52.715c5.782 0 10.274 2.3633 13.223 6.0352 3.105 3.8086 3.945 8.6523 3.945 13.906h-8.164c-8.437 0-20.957-1.3086-20.957-11.68 0-5.7617 5.195-8.2617 11.953-8.2617\"></path><path style=\"fill:#231f20\" d=\"m985.69 69.375h57.422v-14.414l-36.04-39.473h37.31v-13.633h-60.235v14.297l36.715 39.59h-35.172v13.633\"></path><path style=\"fill:#e4154b\" d=\"m1059.6 0h69.102v69.121h-69.102v-69.121z\"></path></g></g></svg>\n            </a>\n        `;\n    }\n}","import {createI18nInstance} from './i18n.js';\nimport {css, html, LitElement} from 'lit-element';\nimport {ScopedElementsMixin} from '@open-wc/scoped-elements';\nimport * as commonUtils from '@dbp-toolkit/common/utils';\nimport * as commonStyles from '@dbp-toolkit/common/styles';\n\nconst i18n = createI18nInstance();\n\nclass AppShellWelcome extends ScopedElementsMixin(LitElement) {\n\n    constructor() {\n        super();\n        this.lang = i18n.language;\n\n        this._onVisibilityChanged = this._onVisibilityChanged.bind(this);\n    }\n\n    static get properties() {\n        return {\n            lang: { type: String },\n        };\n    }\n\n    static set app(app) {\n        this._app = app;\n    }\n\n    update(changedProperties) {\n        changedProperties.forEach((oldValue, propName) => {\n            if (propName === \"lang\") {\n                i18n.changeLanguage(this.lang);\n            }\n        });\n\n        super.update(changedProperties);\n    }\n\n    static get styles() {\n        // language=css\n        return css`\n            ${commonStyles.getThemeCSS()}\n            ${commonStyles.getGeneralCSS()}\n\n            p { line-height: 1.8em }\n            .item {padding-top: 0.5em;}\n            .description {\n                padding-left: 2em;\n                font-style: italic;\n                margin-top: -1px;\n                line-height: initial;\n            }\n\n            h2 a:hover {\n                color: #E4154B;\n            }\n        `;\n    }\n\n    _onVisibilityChanged() {\n        this.requestUpdate();\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n\n        const app = AppShellWelcome._app;\n        app.addEventListener('visibility-changed', this._onVisibilityChanged);\n    }\n\n    disconnectedCallback() {\n        const app = AppShellWelcome._app;\n        app.removeEventListener('visibility-changed', this._onVisibilityChanged);\n\n        super.disconnectedCallback();\n    }\n\n    render() {\n        const app = AppShellWelcome._app;\n        let itemTemplates = [];\n\n        const switchActivity = (e, data) => {\n            e.preventDefault();\n            app.switchComponent(data.routing_name);\n        };\n\n        for (let routeName of app.visibleRoutes) {\n            let data = app.metadata[routeName];\n\n            if (routeName !== \"welcome\") {\n                itemTemplates.push(html`\n                    <div class=\"item\">\n                        <h2><a href=\"#\" @click=${(e) => {switchActivity(e, data);}}>${data.name[this.lang]}</a></h2>\n                        <p class=\"description\">${data.description[this.lang]}</p>\n                    </div>`);\n            }\n        }\n\n        return html`\n            <p>${i18n.t('welcome.headline', {appname: app.topic.name[this.lang]})}\n            ${app.topic.description[this.lang] }</p>\n            <br>\n            ${itemTemplates}\n        `;\n    }\n}\n\nexport const appWelcomeMeta = {\n    \"element\": \"dbp-app-shell-welcome\",\n    \"module_src\": \"\",\n    \"routing_name\": \"welcome\",\n    \"name\": {\n      \"de\": \"Willkommen\",\n      \"en\": \"Welcome\"\n    },\n    \"short_name\": {\n      \"de\": \"Willkommen\",\n      \"en\": \"Welcome\"\n    },\n    \"description\": {\n      \"de\": \"\",\n      \"en\": \"\"\n    },\n    visible: true,\n    required_roles: [],\n};\n\ncommonUtils.defineCustomElement('dbp-app-shell-welcome', AppShellWelcome);\n","import DBPLitElement from '@dbp-toolkit/common/dbp-lit-element';\nimport {LoginStatus} from \"@dbp-toolkit/auth/src/util\";\n\nfunction pushEvent(event) {\n    window._paq = window._paq || [];\n    window._paq.push(event);\n}\n\nexport class MatomoElement extends DBPLitElement {\n\n    constructor() {\n        super();\n        this.endpoint = '';\n        this.siteId = -1;\n        this.isRunning = false;\n        this.lastEvent = [];\n        this.gitInfo = '';\n        this.auth = {};\n        this.analyticsEvent = {};\n        this.loginStatus = '';\n    }\n\n\n    static get properties() {\n        return {\n            ...super.properties,\n            endpoint: { type: String },\n            siteId: { type: Number, attribute: 'site-id' },\n            gitInfo: { type: Number, attribute: 'git-info' },\n            auth: { type: Object },\n            analyticsEvent: { type: Object, attribute: 'analytics-event' },\n        };\n    }\n\n    update(changedProperties) {\n        changedProperties.forEach((oldValue, propName) => {\n            switch (propName) {\n                case 'auth':\n                {\n                    const loginStatus = this.auth['login-status'];\n\n                    if (this.loginStatus !== loginStatus) {\n                        this.setupMatomo(loginStatus === LoginStatus.LOGGED_IN);\n                        this.loginStatus = loginStatus;\n                    }\n                }\n                break;\n                case 'analyticsEvent':\n                {\n                    console.log('MatomoElement(' + this.isRunning + ') analyticsEvent: ' +\n                        this.analyticsEvent.action + ', ' + this.analyticsEvent.message);\n                    const event = ['trackEvent', this.analyticsEvent.category, this.analyticsEvent.action,\n                        this.analyticsEvent.name, this.analyticsEvent.value];\n\n                    if (this.isRunning) {\n                        pushEvent(event);\n                    } else {\n                        this.lastEvent = event;\n                    }\n                }\n                break;\n            }\n        });\n\n        super.update(changedProperties);\n    }\n\n    render() {\n        return ``;\n    }\n\n    setupMatomo(loggedIn) {\n        if (loggedIn && ! this.isRunning) {\n            if (this.siteId === -1) {\n                console.log('site id missing, skipping matomo...');\n                return;\n            }\n            if (this.endpoint === '') {\n                console.log('endpoint missing, skipping matomo...');\n                return;\n            }\n            console.log('add matomo...');\n\n            pushEvent(['setCustomVariable', 1, \"GitCommit\", this.gitInfo, \"visit\"]);\n            pushEvent(['enableHeartBeatTimer']);\n            pushEvent(['disableCookies']);\n            pushEvent(['trackPageView']);\n            pushEvent(['enableLinkTracking']);\n\n            (function (endpoint, siteId) {\n                pushEvent(['setTrackerUrl', endpoint+'matomo.php']);\n                pushEvent(['setSiteId', siteId]);\n\n                var g = document.createElement('script');\n                var s = document.getElementsByTagName('script')[0];\n                g.type = 'text/javascript';\n                g.async = true;\n                g.defer = true;\n                g.src = endpoint + 'matomo.js';\n                s.parentNode.insertBefore(g, s);\n            })(this.endpoint, this.siteId);\n\n            // track changed locations\n            window.addEventListener('locationchanged', function(e) {\n                pushEvent(['setReferrerUrl', e.detail.referrerUrl]);\n                pushEvent(['setCustomUrl', location.href]);\n                // pushEvent(['setDocumentTitle', '']);\n                pushEvent(['trackPageView']);\n\n                // make Matomo aware of newly added content\n                var content = document.getElementById('content');\n                pushEvent(['MediaAnalytics::scanForMedia', content]);\n                pushEvent(['FormAnalytics::scanForForms', content]);\n                pushEvent(['trackContentImpressionsWithinNode', content]);\n            });\n\n            // track errors\n            window.addEventListener('error', function(e) {\n                pushEvent(['trackEvent', 'Error', e.error.message + '\\n' + e.error.stack]);\n            });\n\n            window.addEventListener('unhandledrejection', function(e) {\n                pushEvent(['trackEvent', 'UnhandledRejection', e.reason]);\n            });\n\n            this.isRunning = true;\n            if (this.lastEvent.length > 0) {\n                console.log('MatomoElement* (' + this.isRunning + '): ' + this.lastEvent[1] + ', ' + this.lastEvent[2]);\n                pushEvent(this.lastEvent);\n                this.lastEvent = [];\n            }\n            return;\n        }\n        if (! loggedIn && this.isRunning) {\n            // TODO: remove those event listeners\n            console.log('remove matomo...');\n            this.isRunning = false;\n        }\n    }\n}\n","import {createI18nInstance} from './i18n.js';\nimport {html, css} from 'lit-element';\nimport {ScopedElementsMixin} from '@open-wc/scoped-elements';\nimport {LanguageSelect} from '@dbp-toolkit/language-select';\nimport {Icon} from '@dbp-toolkit/common';\nimport {AuthKeycloak} from '@dbp-toolkit/auth';\nimport {AuthMenuButton} from './auth-menu-button.js';\nimport {Notification} from '@dbp-toolkit/notification';\nimport * as commonStyles from '@dbp-toolkit/common/styles';\nimport {classMap} from 'lit-html/directives/class-map.js';\nimport {Router} from './router.js';\nimport {BuildInfo} from './build-info.js';\nimport {TUGrazLogo} from './tugraz-logo.js';\nimport {send as notify} from '@dbp-toolkit/common/notification';\nimport {appWelcomeMeta} from './dbp-app-shell-welcome.js';\nimport {MatomoElement} from \"@dbp-toolkit/matomo/src/matomo\";\nimport {AdapterLitElement} from \"@dbp-toolkit/provider/src/adapter-lit-element\";\n\n\nconst i18n = createI18nInstance();\n\n/**\n * In case the application gets updated future dynamic imports might fail.\n * This sends a notification suggesting the user to reload the page.\n *\n * uage: importNotify(import('<path>'));\n *\n * @param {Promise} promise\n */\nconst importNotify = async (promise) => {\n    try {\n        return await promise;\n    } catch (error) {\n        console.log(error);\n        notify({\n            \"body\": i18n.t('page-updated-needs-reload'),\n            \"type\": \"info\",\n            \"icon\": \"warning\"\n        });\n        throw error;\n    }\n};\n\nexport class AppShell extends ScopedElementsMixin(AdapterLitElement) {\n    constructor() {\n        super();\n        this.lang = i18n.language;\n        this.activeView = '';\n        this.entryPointUrl = '';\n        this.subtitle = '';\n        this.description = '';\n        this.routes = [];\n        this.visibleRoutes = [];\n        this.metadata = {};\n        this.topic = {};\n        this.basePath = '/';\n        this.keycloakConfig = null;\n        this.noWelcomePage = false;\n        this.menuHeight = -1;\n        this.gitInfo = '';\n        this.env = '';\n        this.buildUrl = '';\n        this.buildTime = '';\n        this._loginStatus = 'unknown';\n        this._roles = [];\n\n        this.matomoUrl = '';\n        this.matomoSiteId = -1;\n\n        this._attrObserver = new MutationObserver(this.onAttributeObserved);\n\n        this.shellName = 'TU Graz';\n        this.shellSubname= 'Graz University of Technology';\n        this.noBrand = false;\n        this.auth = {};\n    }\n\n    static get scopedElements() {\n        return {\n          'dbp-language-select': LanguageSelect,\n          'dbp-tugraz-logo': TUGrazLogo,\n          'dbp-build-info': BuildInfo,\n          'dbp-auth-keycloak': AuthKeycloak,\n          'dbp-auth-menu-button': AuthMenuButton,\n          'dbp-notification': Notification,\n          'dbp-icon': Icon,\n          'dbp-matomo': MatomoElement,\n        };\n    }\n\n    onAttributeObserved(mutationsList, observer) {\n        for(let mutation of mutationsList) {\n            if (mutation.type === 'attributes') {\n                const key = mutation.attributeName;\n                const value = mutation.target.getAttribute(key);\n                sessionStorage.setItem('dbp-attr-' + key, value);\n            }\n        }\n    }\n\n    /**\n     * Fetches the metadata of the components we want to use in the menu, dynamically imports the js modules for them,\n     * then triggers a rebuilding of the menu and resolves the current route\n     *\n     * @param {string} topicURL The topic metadata URL or relative path to load things from\n     */\n    async fetchMetadata(topicURL) {\n        let metadata = {};\n        let routes = [];\n\n        const result = await (await fetch(topicURL, {\n            headers: {'Content-Type': 'application/json'}\n        })).json();\n\n        this.topic = result;\n\n        const fetchOne = async (url) => {\n              const result = await fetch(url, {\n                headers: {'Content-Type': 'application/json'}\n            });\n            if (!result.ok)\n                throw result;\n\n            const jsondata = await result.json();\n            if (jsondata[\"element\"] === undefined)\n                throw new Error(\"no element defined in metadata\");\n\n            return jsondata;\n        };\n\n        let promises = [];\n        for (const activity of result.activities) {\n            const actURL = new URL(activity.path, new URL(topicURL, window.location).href).href;\n            promises.push([activity.visible === undefined || activity.visible, actURL, fetchOne(actURL)]);\n        }\n\n        for (const [visible, actURL, p] of promises) {\n            try {\n                const activity = await p;\n                activity.visible = visible;\n                // Resolve module_src relative to the location of the json file\n                activity.module_src = new URL(activity.module_src, actURL).href;\n                activity.required_roles = activity.required_roles || [];\n                metadata[activity.routing_name] = activity;\n                routes.push(activity.routing_name);\n            } catch (error) {\n                console.log(error);\n            }\n        }\n\n        if (!this.noWelcomePage) {\n            // Inject the welcome activity\n            routes.unshift(\"welcome\");\n            metadata = Object.assign(metadata, {\n                \"welcome\": appWelcomeMeta,\n            });\n            customElements.get(\"dbp-app-shell-welcome\").app = this;\n        }\n\n        // this also triggers a rebuilding of the menu\n        this.metadata = metadata;\n        this.routes = routes;\n\n        // Switch to the first route if none is selected\n        if (!this.activeView)\n            this.switchComponent(routes[0]);\n        else\n            this.switchComponent(this.activeView);\n\n    }\n\n    initRouter() {\n        const routes = [\n            {\n                path: '',\n                action: (context) => {\n                    return {\n                        lang: this.lang,\n                        component: '',\n                    };\n                }\n            },\n            {\n                path: '/:lang',\n                children: [\n                    {\n                        path: '',\n                        action: (context, params) => {\n                            return {\n                                lang: params.lang,\n                                component: '',\n                            };\n                        }\n                    },\n                    {\n                        name: 'mainRoute',\n                        path: '/:component',\n                        action: (context, params) => {\n                            // remove the additional parameters added by Keycloak\n                            let componentTag = params.component.toLowerCase().replace(/&.+/,\"\");\n                            return {\n                                lang: params.lang,\n                                component: componentTag,\n                            };\n                        },\n                    },\n                ],\n            },\n        ];\n\n        this.router = new Router(routes, {\n            routeName: 'mainRoute',\n            getState: () => {\n                return {\n                    component: this.activeView,\n                    lang: this.lang,\n                };\n            },\n            setState: (state) => {\n                this.updateLangIfChanged(state.lang);\n                this.switchComponent(state.component);\n            }\n        }, {\n            baseUrl: new URL(this.basePath, window.location).pathname.replace(/\\/$/, ''),\n        });\n\n        this.router.setStateFromCurrentLocation();\n    }\n\n    static get properties() {\n        return {\n            ...super.properties,\n            lang: { type: String, reflect: true },\n            src: { type: String },\n            basePath: { type: String, attribute: 'base-path' },\n            activeView: { type: String, attribute: false},\n            entryPointUrl: { type: String, attribute: 'entry-point-url' },\n            keycloakConfig: { type: Object, attribute: 'keycloak-config' },\n            metadata: { type: Object, attribute: false },\n            visibleRoutes:  { type: Array, attribute: false },\n            topic: { type: Object, attribute: false },\n            subtitle: { type: String, attribute: false },\n            description: { type: String, attribute: false },\n            _loginStatus: { type: Boolean, attribute: false },\n            _roles: { type: Array, attribute: false },\n            matomoUrl: { type: String, attribute: \"matomo-url\" },\n            matomoSiteId: { type: Number, attribute: \"matomo-site-id\" },\n            noWelcomePage: { type: Boolean, attribute: \"no-welcome-page\" },\n            shellName: { type: String, attribute: \"shell-name\" },\n            shellSubname: { type: String, attribute: \"shell-subname\" },\n            noBrand: { type: Boolean, attribute: \"no-brand\" },\n            gitInfo: { type: String, attribute: \"git-info\" },\n            buildUrl: { type: String, attribute: \"build-url\" },\n            buildTime: { type: String, attribute: \"build-time\" },\n            env: { type: String },\n            auth: { type: Object },\n        };\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n\n        if (this.src)\n            this.fetchMetadata(this.src);\n        this.initRouter();\n    }\n\n    /**\n     * Switches language if another language is requested\n     *\n     * @param {string} lang\n     */\n    updateLangIfChanged(lang) {\n        if (this.lang !== lang) {\n            this.lang = lang;\n            this.router.update();\n\n            // tell a dbp-provider to update the \"lang\" property\n            this.sendSetPropertyEvent('lang', lang);\n        }\n    }\n\n    update(changedProperties) {\n        changedProperties.forEach((oldValue, propName) => {\n            switch (propName) {\n                case 'lang':\n                    i18n.changeLanguage(this.lang);\n                    // For screen readers\n                    document.documentElement.setAttribute(\"lang\", this.lang);\n                    i18n.changeLanguage(this.lang);\n\n                    this.router.update();\n                    this.subtitle = this.activeMetaDataText(\"short_name\");\n                    this.description = this.activeMetaDataText(\"description\");\n                break;\n                case 'metadata':\n                {\n                    this._updateVisibleRoutes();\n                }\n                break;\n                case 'auth':\n                {\n                    if (this.auth.person) {\n                        this._roles = this.auth.person['roles'];\n                    } else {\n                        this._roles = [];\n                    }\n                    this._updateVisibleRoutes();\n\n                    const loginStatus = this.auth['login-status'];\n                    if (loginStatus !== this._loginStatus) {\n                        console.log('Login status: ' + loginStatus);\n                    }\n\n                    this._loginStatus = loginStatus;\n\n                    // Clear the session storage when the user logs out\n                    if (this._loginStatus === 'logging-out') {\n                        sessionStorage.clear();\n                    }\n                }\n                break;\n            }\n        });\n\n        super.update(changedProperties);\n    }\n\n    onMenuItemClick(e) {\n        e.preventDefault();\n\n        // if not the current page was clicked we need to check if the page can be left\n        if (!e.currentTarget.className.includes(\"selected\")) {\n            // simulate a \"beforeunload\" event\n            const event = new CustomEvent(\"beforeunload\", {\n                bubbles: true,\n                cancelable: true,\n            });\n\n            const eventResult = window.dispatchEvent(event);\n\n            // if someone canceled the \"beforeunload\" event we don't want to leave the page\n            if (!eventResult) {\n                return;\n            }\n        }\n\n        const link = e.composedPath()[0];\n        const location = link.getAttribute('href');\n        this.router.updateFromPathname(location);\n        this.hideMenu();\n    }\n\n    onLanguageChanged(e) {\n        const newLang = e.detail.lang;\n        const changed = (this.lang !== newLang);\n        this.lang = newLang;\n        if (changed) {\n            this.router.update();\n            this.subtitle = this.activeMetaDataText(\"short_name\");\n            this.description = this.activeMetaDataText(\"description\");\n        }\n    }\n\n    switchComponent(componentTag) {\n        let offset = window.pageYOffset;\n        const changed = (componentTag !== this.activeView);\n        this.activeView = componentTag;\n        if (changed)\n            this.router.update();\n        const metadata = this.metadata[componentTag];\n\n        if (metadata === undefined) {\n            return;\n        }\n\n        let updateFunc = () => {\n           \n            if (offset > 0) {\n\n                const header = this.shadowRoot.querySelector(\"header\");\n                const title = this.shadowRoot.querySelector(\"#headline\");\n\n                if (header === null || title === null) {\n                    return;\n                }\n\n                let style = getComputedStyle(title);\n                let marginTop = isNaN(parseInt(style.marginTop, 10)) ? 0 : parseInt(style.marginTop, 10);\n                let marginBottom = isNaN(parseInt(style.marginBottom, 10)) ? 0 : parseInt(style.marginBottom, 10);\n\n                let topValue = header.getBoundingClientRect().height + title.getBoundingClientRect().height + marginTop + marginBottom;\n\n                if (offset < topValue) {\n                    window.scrollTo(0, offset);\n                } else {\n                    window.scrollTo(0, topValue);\n                }\n            }\n            this.updatePageTitle();\n            this.subtitle = this.activeMetaDataText(\"short_name\");\n            this.description = this.activeMetaDataText(\"description\");\n        };\n\n        // If it is empty assume the element is already registered through other means\n        if (!metadata.module_src) {\n            updateFunc();\n            return;\n        }\n\n        importNotify(import(metadata.module_src)).then(() => {\n            updateFunc();\n        }).catch((e) => {\n            console.error(`Error loading ${ metadata.element }`);\n            throw e;\n        });\n    }\n\n    metaDataText(routingName, key) {\n        const metadata = this.metadata[routingName];\n        return metadata !== undefined && metadata[key] !== undefined ? metadata[key][this.lang] : '';\n    }\n\n    topicMetaDataText(key) {\n        return (this.topic[key] !== undefined) ? this.topic[key][this.lang] : '';\n    }\n\n    activeMetaDataText(key) {\n        return this.metaDataText(this.activeView, key);\n    }\n\n    updatePageTitle() {\n        document.title = `${this.topicMetaDataText('name')} - ${this.activeMetaDataText(\"short_name\")}`;\n    }\n\n    toggleMenu() {\n        const menu = this.shadowRoot.querySelector(\"ul.menu\");\n        const subtitle = this.shadowRoot.querySelector(\"h2.subtitle\");\n\n        if (menu === null || subtitle === null) {\n            return;\n        }\n\n        menu.classList.toggle('hidden');\n\n        if (this.menuHeight === -1) {\n            this.menuHeight = menu.clientHeight;\n        }\n\n        let topValue = subtitle.getBoundingClientRect().bottom;\n        let isMenuOverflow = this.menuHeight + topValue >= window.innerHeight ? true : false;\n        \n        if (isMenuOverflow && !menu.classList.contains('hidden')) {\n            menu.setAttribute('style', 'position: fixed;top: ' + topValue + 'px;bottom: 0;border-bottom: 0;overflow-y: auto;');\n            menu.scrollTop = 0;\n            document.body.setAttribute('style', 'overflow:hidden;');\n        \n        } else if (isMenuOverflow && menu.classList.contains('hidden')) {\n            document.body.removeAttribute('style', 'overflow:hidden;');\n            menu.removeAttribute('style');\n        }\n\n        const chevron = this.shadowRoot.querySelector(\"#menu-chevron-icon\");\n        if (chevron !== null) {\n            chevron.name = menu.classList.contains('hidden') ? 'chevron-down' : 'chevron-up';\n        }\n    }\n\n    hideMenu() {\n        const menu = this.shadowRoot.querySelector(\"ul.menu\");\n        if (menu && !menu.classList.contains('hidden'))\n            this.toggleMenu();\n    }\n\n    static get styles() {\n        // language=css\n        return css`\n            ${commonStyles.getThemeCSS()}\n            ${commonStyles.getGeneralCSS()}\n\n            .hidden {display: none}\n\n            h1.title {\n                margin-bottom: 0;\n                font-weight: 300;\n            }\n\n            #main {\n                display: grid;\n                grid-template-columns: minmax(180px, 17%) minmax(0, auto);\n                grid-template-rows: min-content min-content 1fr min-content;\n                grid-template-areas: \"header header\" \"headline headline\" \"sidebar main\" \"footer footer\";\n                max-width: 1400px;\n                margin: auto;\n                min-height: 100vh;\n            }\n\n            #main-logo {\n                padding: 0 50px 0 0;\n            }\n\n            header {\n                grid-area: header;\n                display: grid;\n                grid-template-columns: 50% 1px auto;\n                grid-template-rows: 60px 60px;\n                grid-template-areas: \"hd1-left hd1-middle hd1-right\" \"hd2-left . hd2-right\";\n                width: 100%;\n                max-width: 1060px;\n                margin: 0 auto;\n            }\n\n            aside { grid-area: sidebar; margin: 15px 15px; }\n            #headline { grid-area: headline; margin: 10px; text-align: center; }\n            main { grid-area: main; margin: 15px 15px; }\n            footer { grid-area: footer; margin: 15px; text-align: right; }\n\n            header .hd1-left {\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                grid-area: hd1-left;\n                text-align: right;\n                padding-right: 20px;\n            }\n\n            header .hd1-middle {\n                grid-area: hd1-middle;\n                background-color: #000;\n                background: linear-gradient(180deg, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 85%, rgba(0,0,0,0) 90%);\n            }\n\n            header .hd1-right {\n                grid-area: hd1-right;\n                display: flex;\n                justify-content: flex-start;\n                padding: 0 20px;\n                min-width: 0;\n                align-items: center;\n            }\n\n            header .hd1-right .auth-button {\n                min-width: 0;\n            }\n\n            header .hd2-left {\n                grid-area: hd2-left;\n                display: flex;\n                flex-direction: column;\n                white-space: nowrap;\n            }\n\n            header .hd2-left .header {\n                margin-left: 50px;\n            }\n\n            header .hd2-left a:hover {\n                color: #fff;\n                background-color: #000;\n            }\n\n            header .hd2-right {\n                grid-area: hd2-right;\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                text-align: right;\n            }\n\n            header a {\n                color: black;\n                display: inline;\n            }\n\n            aside ul.menu, footer ul.menu {\n                list-style: none;\n            }\n\n            ul.menu li.close {\n                display: none;\n            }\n\n            footer {\n                display: flex;\n                justify-content: flex-end;\n                flex-wrap: wrap;\n            }\n\n            footer > * {\n                margin: 0.5em 0 0 1em;\n            }\n\n            footer a {\n                border-bottom: 1px solid rgba(0,0,0,0.3);\n                padding: 0;\n            }\n\n            footer a:hover {\n                color: #fff;\n                background-color: #000;\n            }\n\n            /* We don't allow inline-svg */\n            /*\n            footer .int-link-external::after {\n                content: \"\\\\00a0\\\\00a0\\\\00a0\\\\00a0\";\n                background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%225.6842mm%22%20width%3D%225.6873mm%22%20version%3D%221.1%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20viewBox%3D%220%200%2020.151879%2020.141083%22%3E%3Cg%20transform%3D%22translate(-258.5%20-425.15)%22%3E%3Cpath%20style%3D%22stroke-linejoin%3Around%3Bstroke%3A%23000%3Bstroke-linecap%3Around%3Bstroke-width%3A1.2%3Bfill%3Anone%22%20d%3D%22m266.7%20429.59h-7.5029v15.002h15.002v-7.4634%22%2F%3E%3Cpath%20style%3D%22stroke-linejoin%3Around%3Bstroke%3A%23000%3Bstroke-linecap%3Around%3Bstroke-width%3A1.2%3Bfill%3Anone%22%20d%3D%22m262.94%20440.86%2015.002-15.002%22%2F%3E%3Cpath%20style%3D%22stroke-linejoin%3Around%3Bstroke%3A%23000%3Bstroke-linecap%3Around%3Bstroke-width%3A1.2%3Bfill%3Anone%22%20d%3D%22m270.44%20425.86h7.499v7.499%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E');\n                background-size:contain;\n                background-repeat: no-repeat;\n                background-position:center center;\n                margin: 0 0.5% 0 1.5%;\n                font-size:94%;\n            } \n            */\n\n            .menu a {\n                padding: 0.3em;\n                font-weight: 300;\n                color: #000;\n                display: block;\n            }\n\n            .menu a:hover {\n                color: #E4154B;\n            }\n\n            .menu a.selected {\n                color: var(--dbp-light);\n                background-color: var(--dbp-dark);\n            }\n\n            aside .subtitle {\n                display: none;\n                color: #4a4a4a;\n                font-size: 1.25rem;\n                font-weight: 300;\n                line-height: 1.25;\n                cursor: pointer;\n                text-align: center;\n            }\n\n            ul.menu.hidden {\n                display: block;\n            }\n\n            a { transition: background-color 0.15s ease 0s, color 0.15s ease 0s; }\n\n            .description {\n                text-align: left;\n                margin-bottom: 1rem;\n                display: none;\n            }\n\n            @media (max-width: 680px) {\n                #main {\n                    grid-template-columns: minmax(0, auto);\n                    grid-template-rows: min-content min-content min-content 1fr min-content;\n                    grid-template-areas: \"header\" \"headline\" \"sidebar\" \"main\" \"footer\";\n                }\n\n                header {\n                    grid-template-rows: 40px;\n                    grid-template-areas: \"hd1-left hd1-middle hd1-right\";\n                }\n\n                header .hd2-left, header .hd2-right {\n                    display: none;\n                }\n\n                aside {\n                    margin: 0;\n                    position: sticky;\n                    top: 0;\n                    width: 100%;\n                    background-color: white;\n                    z-index: 10;\n                }\n\n                aside h2.subtitle {\n                    display: block;\n                    border-bottom: 1px solid black;\n                    padding: 0.5em 0.5em;\n                }\n\n                aside .menu {\n                    border-bottom: black 1px solid;\n                    border-top-width: 0;\n                    width: 100%;\n                    position: absolute;\n                    background-color: white;\n                    z-index: 10;\n                }\n\n                .menu li {\n                    padding: 7px;\n                }\n\n                .menu a {\n                    padding: 8px;\n                }\n\n                ul.menu li.close {\n                    display: block;\n                    padding: 0 15px 15px 15px;\n                    text-align: right;\n                    cursor: pointer;\n                }\n\n                ul.menu.hidden {\n                    display: none;\n                }\n            }\n        `;\n    }\n\n    _createActivityElement(activity) {\n        // We have to create elements dynamically based on a tag name which isn't possible with lit-html.\n        // This means we pass the finished element to lit-html and have to handle element caching and\n        // event binding ourselves.\n\n        if (this._lastElm !== undefined) {\n            if (this._lastElm.tagName.toLowerCase() == activity.element.toLowerCase()) {\n                return this._lastElm;\n            } else {\n                this._onActivityRemoved(this._lastElm);\n                this._lastElm = undefined;\n            }\n        }\n\n        this.track('renderActivity', activity.element);\n\n        const elm = document.createElement(activity.element);\n        this._onActivityAdded(elm);\n        this._lastElm = elm;\n        return elm;\n    }\n\n    _onActivityAdded(element) {\n        for(const key of this.topic.attributes || []) {\n            let value = sessionStorage.getItem('dbp-attr-' + key);\n            if (value !== null) {\n                element.setAttribute(key, value);\n            }\n        }\n        this._attrObserver.observe(element, {attributes: true, attributeFilter: this.topic.attributes});\n    }\n\n    _onActivityRemoved(element) {\n        this._attrObserver.disconnect();\n    }\n\n    track(action, message) {\n        this.sendSetPropertyEvent('analytics-event', {'category': action, 'action': message});\n    }\n\n    _renderActivity() {\n        const act = this.metadata[this.activeView];\n        if (act === undefined)\n            return html``;\n\n        const elm =  this._createActivityElement(act);\n\n        // add subscriptions for the provider component\n        if (act.subscribe !== undefined) {\n            elm.setAttribute(\"subscribe\", act.subscribe);\n        }\n\n        // only add the entry-point-url attribute if it isn't subscribed\n        if (act.subscribe === undefined || !act.subscribe.includes(\"entry-point-url:\")) {\n            elm.setAttribute(\"entry-point-url\", this.entryPointUrl);\n        }\n\n        // only add the lang attribute if it isn't subscribed\n        if (act.subscribe === undefined || !act.subscribe.includes(\"lang:\")) {\n            elm.setAttribute(\"lang\", this.lang);\n        }\n\n        return elm;\n    }\n\n    _updateVisibleRoutes() {\n        let visibleRoutes = [];\n\n        for (let routingName of this.routes) {\n            const data = this.metadata[routingName];\n            const requiredRoles = data['required_roles'];\n            let visible = data['visible'];\n\n            // Hide them until the user is logged in and we know the roles of the user\n            for (let role of requiredRoles) {\n                if (!this._roles.includes(role)) {\n                    visible = false;\n                    break;\n                }\n            }\n\n            if (visible) {\n                visibleRoutes.push(routingName);\n            }\n        }\n\n        this.visibleRoutes = visibleRoutes;\n\n        const event = new CustomEvent(\"visibility-changed\", {\n            bubbles: false,\n            cancelable: true,\n        });\n        this.dispatchEvent(event);\n    }\n\n    render() {\n        const getSelectClasses = (name => {\n            return classMap({selected: this.activeView === name});\n        });\n\n        // We hide the app until we are either fully logged in or logged out\n        // At the same time when we hide the main app we show the main slot (e.g. a loading spinner)\n        const appHidden = (this._loginStatus == 'unknown' || this._loginStatus == 'logging-in');\n        const mainClassMap = classMap({hidden: appHidden});\n        const slotClassMap = classMap({hidden: !appHidden});\n\n        // XXX: Safari doesn't like CSS being applied to slots or via HTML,\n        // so we have to remove the slow instead of hiding it\n        if (!appHidden) {\n            this.updateComplete.then(() => {\n                const slot = this.shadowRoot.querySelector(\"slot\");\n                if (slot)\n                    slot.remove();\n            });\n        }\n\n        const prodClassMap = classMap({hidden: this.env === 'production' || this.env === 'demo' || this.env === ''});\n\n        this.updatePageTitle();\n\n        // build the menu\n        let menuTemplates = [];\n        for (let routingName of this.visibleRoutes) {\n            menuTemplates.push(html`<li><a @click=\"${(e) => this.onMenuItemClick(e)}\" href=\"${this.router.getPathname({component: routingName})}\" data-nav class=\"${getSelectClasses(routingName)}\" title=\"${this.metaDataText(routingName, \"description\")}\">${this.metaDataText(routingName, \"short_name\")}</a></li>`);\n        }\n\n        const imprintUrl = this.lang === \"en\" ?\n            \"https://krakenh2020.eu/legal-notice\" :\n            \"https://krakenh2020.eu/legal-notice\";\n\n        const kc = this.keycloakConfig;\n\n        return html`\n            <slot class=\"${slotClassMap}\"></slot>\n            <dbp-auth-keycloak subscribe=\"requested-login-status\" lang=\"${this.lang}\" entry-point-url=\"${this.entryPointUrl}\" url=\"${kc.url}\" realm=\"${kc.realm}\" client-id=\"${kc.clientId}\" silent-check-sso-redirect-uri=\"${kc.silentCheckSsoRedirectUri || ''}\" scope=\"${kc.scope || ''}\"  idp-hint=\"${kc.idpHint || ''}\" load-person ?force-login=\"${kc.forceLogin}\" ?try-login=\"${!kc.forceLogin}\"></dbp-auth-keycloak>\n            <dbp-matomo subscribe=\"auth,analytics-event\" endpoint=\"${this.matomoUrl}\" site-id=\"${this.matomoSiteId}\" git-info=\"${this.gitInfo}\"></dbp-matomo>\n            <div class=\"${mainClassMap}\">\n            <div id=\"main\">\n                <dbp-notification lang=\"${this.lang}\"></dbp-notification>\n                <header>\n                    <div class=\"hd1-left\">\n                        <dbp-language-select lang=\"${this.lang}\"></dbp-language-select>\n                    </div>\n                    <div class=\"hd1-middle\">\n                    </div>\n                    <div class=\"hd1-right\">\n                        <dbp-auth-menu-button subscribe=\"auth\" class=\"auth-button\" lang=\"${this.lang}\"></dbp-auth-menu-button>\n                    </div>\n                    <div class=\"hd2-left\">\n                        <div class=\"header\">\n                            ${this.shellName}<br>${this.shellSubname}\n                        </div>\n                    </div>\n                    <div class=\"hd2-right\">\n                        <dbp-tugraz-logo id=\"main-logo\" lang=\"${this.lang}\" class=\"${classMap({hidden: this.noBrand})}\"></dbp-tugraz-logo>\n                    </div>\n                </header>\n                <div id=\"headline\">\n                    <h1 class=\"title\">${this.topicMetaDataText('name')}</h1>\n                </div>\n                <aside>\n                    <h2 class=\"subtitle\" @click=\"${this.toggleMenu}\">\n                        ${this.subtitle}\n                        <dbp-icon name=\"chevron-down\" style=\"color: red\" id=\"menu-chevron-icon\"></dbp-icon>\n                    </h2>\n                    <ul class=\"menu hidden\">\n                        ${menuTemplates}\n                        <li class=\"close\" @click=\"${this.hideMenu}\"><dbp-icon name=\"close\" style=\"color: red\"></dbp-icon></li>\n                    </ul>\n                </aside>\n\n                <main>\n                    <p class=\"description\">${this.description}</p>\n                    ${ this._renderActivity() }\n                </main>\n\n                <footer>\n                    <a target=\"_blank\" rel=\"noopener\" class=\"int-link-external\" href=\"https://github.com/site/privacy/\">${i18n.t('privacy-policy')}</a>\n                    <a target=\"_blank\" rel=\"noopener\" class=\"int-link-external\" href=\"${imprintUrl}\">${i18n.t('imprint')}</a>\n                    <a rel=\"noopener\" class=\"int-link-external\" href=\"mailto:smore@tugraz.at\">${i18n.t('contact')}</a>\n                    <dbp-build-info class=\"${prodClassMap}\" git-info=\"${this.gitInfo}\" env=\"${this.env}\" build-url=\"${this.buildUrl}\" build-time=\"${this.buildTime}\"></dbp-build-info>\n                </footer>\n            </div>\n            </div>\n        `;\n    }\n}","export class Provider extends HTMLElement {\n    constructor() {\n        super();\n        this.callbackStore = [];\n        this.root = false;\n\n        // Previously we used direct properties like this[\"lang\"] (instead of this.properties[\"lang\"]) for storing the\n        // properties, but the \"lang\" property seems to be updated before the event from the MutationObserver, so we\n        // cannot observe a value change directly (as workaround we use another property (e.g. \"langValue\") instead of \"lang\")\n        this.properties = {};\n\n        // We need to store our own \"last values\" because we cannot be sure what the MutationObserver detects\n        this.lastProperties = {};\n\n        console.debug('Provider constructor()');\n    }\n\n    getProperty(name) {\n        return this.properties[name];\n    }\n\n    setProperty(name, value) {\n        this.lastProperties[name] = value;\n        this.properties[name] = value;\n    }\n\n    hasPropertyChanged(name, value) {\n        return this.lastProperties[name] !== value;\n    }\n\n    hasProperty(name) {\n        return Object.hasOwnProperty.call(this.properties, name);\n    }\n\n    connectedCallback() {\n        console.debug('Provider(' + this.id + ') connectedCallback()');\n\n        const that = this;\n\n        this.addEventListener('dbp-subscribe', function (e) {\n            const name = e.detail.name;\n            if (that.hasProperty(name) || that.root) {\n                console.debug('Provider(' + that.id + ') eventListener(\"dbp-subscribe\",..) name \"' + name + '\" found.');\n                that.callbackStore.push({name: name, callback: e.detail.callback, sender: e.detail.sender});\n\n                e.detail.callback(that.getProperty(name));\n                e.stopPropagation();\n            }\n        }, false);\n\n        this.addEventListener('dbp-unsubscribe', function (e) {\n            const name = e.detail.name;\n            const sender = e.detail.sender;\n            if (that.hasProperty(name) || that.root) {\n                console.debug('Provider(' + that.id + ') eventListener(\"dbp-unsubscribe\",..) name \"' + name + '\" found.');\n                that.callbackStore.forEach(item => {\n                    if (item.sender === sender && item.name === name) {\n                        const index = that.callbackStore.indexOf(item);\n                        that.callbackStore.splice(index, 1);\n                        console.debug('Provider(' + that.id + ') eventListener for name \"' + name + '\" removed.');\n                    }\n                });\n\n                e.stopPropagation();\n            }\n        }, false);\n\n        // listen to property changes\n        this.addEventListener('dbp-set-property', function (e) {\n            const name = e.detail.name;\n            const value = e.detail.value;\n\n            if (that.hasProperty(name) || that.root) {\n                console.debug('Provider(' + that.id + ') eventListener(\"dbp-set-property\",..) name \"' + name + '\" found.');\n                that.setProperty(name, value);\n\n                that.callbackStore.forEach(item => {\n                    if (item.name === name) {\n                        item.callback(value);\n                    }\n                });\n\n                e.stopPropagation();\n            }\n        }, false);\n\n        // Options for the observer (which mutations to observe)\n        const config = { attributes: true, childList: false, subtree: false };\n\n        // Callback function to execute when mutations are observed\n        const callback = function(mutationsList, observer) {\n            // Use traditional 'for loops' for IE 11\n            for(const mutation of mutationsList) {\n                if (mutation.type === 'attributes') {\n                    const name = mutation.attributeName;\n                    const value = that.getAttribute(name);\n\n                    if (that.hasPropertyChanged(name, value)) {\n                        console.debug('Provider (' + that.id + ') observed attribute \"' + name + '\" changed');\n                        that.setProperty(name, value);\n\n                        that.callbackStore.forEach(item => {\n                            if (item.name === name) {\n                                item.callback(value);\n                            }\n                        });\n                    }\n                }\n            }\n        };\n\n        // Create an observer instance linked to the callback function\n        const observer = new MutationObserver(callback);\n\n        // Start observing the target node for configured mutations\n        observer.observe(this, config);\n\n        // get all *not observed* attributes\n        if (this.hasAttributes()) {\n            const attrs = this.attributes;\n            for(let i = attrs.length - 1; i >= 0; i--) {\n                if (['id', 'class', 'style', 'data-tag-name'].includes(attrs[i].name)) {\n                    continue;\n                }\n\n                this.setProperty(attrs[i].name, attrs[i].value);\n                console.debug('Provider (' + that.id + ') found attribute \"' + attrs[i].name + '\" = \"' + attrs[i].value + '\"');\n            }\n        }\n    }\n\n    get id() {\n        return this.getAttribute('id');\n    }\n}\n","import {AppShell} from '@dbp-toolkit/app-shell';\nimport * as commonUtils from '@dbp-toolkit/common/utils';\nimport {Provider} from '@dbp-toolkit/provider';\n\ncommonUtils.defineCustomElement('dbp-provider', Provider);\ncommonUtils.defineCustomElement('vc4sm-frontend', AppShell);\n"],"names":["i18n","createInstance","en","de","createI18nInstance","cloneInstance","LanguageSelect","AdapterLitElement","constructor","_lang","languages","t","_getNextLanguage","lang","index","this","indexOf","next","_getPreviousLanguage","prev","length","type","String","Array","value","oldValue","oldNext","requestUpdate","sendSetPropertyEvent","changeLanguage","commonStyles.getThemeCSS","css","onClick","e","preventDefault","render","linkTitle","html","toUpperCase","send","options","event","CustomEvent","bubbles","cancelable","detail","window","dispatchEvent","alert","undefined","summary","body","console","log","JSONLD","baseApiUrl","entities","idToEntityNameMatchList","entityName","apiUrl","successFnc","failureFnc","instances","successFunctions","failureFunctions","push","token","initStarted","doInitialization","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","status","json","JSON","parse","responseText","entryPoints","property","startsWith","toLowerCase","apiDocUrl","utils.parseLinkHeader","getResponseHeader","docXhr","gatherEntities","executeFailureFunctions","supportedClasses","baseUrl","utils.parseBaseUrl","forEach","classData","entryPoint","instance","fnc","message","notify","getEntityForIdentifier","identifier","getEntityNameForIdentifier","getEntityForEntityName","getApiUrlForIdentifier","entity","Error","getApiUrlForEntityName","getApiIdentifierList","keys","expandMember","member","context","result","key","Object","compactMember","localContext","transformMembers","data","members","otherContext","results","that","assertType","condition","args","TypeError","format","i","replace","anyToString","x","prototype","toString","call","currentErrorHandler","defineProperty","exports","Global","self","global","globalThis","currentWarnHandler","Warning","code","warn","_a","stack","_b","InitEventWasCalledWhileDispatching","FalsyWasAssignedToCancelBubble","TruthyWasAssignedToReturnValue","NonCancelableEventWasCanceled","CanceledInPassiveListener","EventListenerWasDuplicated","OptionWasIgnored","InvalidEventListener","InvalidAttributeHandler","Event","NONE","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","eventInitDict","enumerable","opts","internalDataMap","set","Boolean","composed","target","currentTarget","stopPropagationFlag","stopImmediatePropagationFlag","canceledFlag","inPassiveListenerFlag","dispatchFlag","timeStamp","Date","now","$","composedPath","stopPropagation","stopImmediatePropagation","setCancelFlag","initEvent","WeakMap","name","retv","get","getOwnPropertyNames","DOMException","setPrototypeOf","ErrorCodeMap","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","VALIDATION_ERR","TYPE_MISMATCH_ERR","SECURITY_ERR","NETWORK_ERR","ABORT_ERR","URL_MISMATCH_ERR","QUOTA_EXCEEDED_ERR","TIMEOUT_ERR","INVALID_NODE_TYPE_ERR","DATA_CLONE_ERR","defineErrorCodeProperties","obj","configurable","EventWrapper","getWrapperClassOf","cancelBubble","defaultPrevented","internalDataMap$1","original","defineRedirectDescriptor","$$1","super","returnValue","wrapperClassCache","originalEvent","getPrototypeOf","wrapper","BaseEventWrapper","originalPrototype","CustomEventWrapper","defineWrapper","d","getOwnPropertyDescriptor","bind","isCapture","listener","flags","isPassive","isOnce","isRemoved","invokeCallback","callback","handleEvent","thrownError","maybeError","error","ErrorEvent","process","emit","reportError","findIndexOfListener","listeners","capture","addListener","list","passive","once","signal","signalListener","removeListener","addEventListener","createListener","cow","removeListenerAt","disableCow","setRemoved","removeEventListener","filter","_","splice","ensureListenerList","listenerMap","attrCallback","attrListener","EventTarget","internalDataMap$2","create","type0","callback0","options0","$$2","assertCallback","normalizeAddOptions","aborted","warnDuplicate","normalizeOptions","wrap","eventData","msg","captureStackTrace","defineProperties","keys$1","getEventAttributeValue","setEventAttributeValue","defineEventAttributeCallback","upsertEventAttributeListener","removeEventAttributeListener","defineEventAttribute","_eventClass","types","CustomEventTarget","async","importKeycloak","keycloakSrc","import","_keycloakMod","Keycloak","KeycloakWrapper","baseURL","realm","clientId","silentCheckSsoUri","idpHint","_baseURL","_realm","_clientId","_keycloak","_initDone","_silentCheckSsoUri","_idpHint","_checkId","MIN_VALIDITY","CHECK_INTERVAL","DEBUG","_onVisibilityChanged","document","close","visibilityState","authenticated","_checkTokeHasExpired","_onChanged","_onReady","refreshed","updateToken","assert","minValidity","clearInterval","setInterval","url","onTokenExpired","_onTokenExpired","onAuthRefreshSuccess","onAuthRefreshError","onAuthLogout","_onAuthLogout","onAuthSuccess","_onAuthSuccess","onAuthError","onReady","init","_ensureInstance","promiseType","pkceMethod","urlOrPath","URL","href","location","ensureURL","ms","promise","timeout","Promise","resolve","reject","id","setTimeout","clearTimeout","race","promiseTimeout","_keycloakInit","catch","isLoggingIn","search","_ensureInit","language","scope","login","kcLocale","locale","clearToken","logout","LoginStatus","freeze","UNKNOWN","LOGGING_IN","LOGGED_IN","LOGGING_OUT","LOGGED_OUT","AuthKeycloak","forceLogin","loadPerson","subject","personId","tryLogin","person","entryPointUrl","_loginStatus","requestedLoginStatus","keycloakUrl","silentCheckSsoRedirectUri","_onKCChanged","update","changedProperties","propName","_kcwrapper","_setLoginStatus","kc","newPerson","tokenChanged","idTokenParsed","preferred_username","sendSetPropertyEvents","initialize","jsonld","fetch","headers","then","response","auth","Cypress","DBPAuth","doInitializationOnce","force","properties","attribute","connectedCallback","_this2","handleLogin","disconnectedCallback","ScopedElementsMixin","AuthMenuButton","showImage","closeDropdown","onWindowResize","Icon","updateDropdownWidth","dropdown","shadowRoot","querySelector","viewportOffset","getBoundingClientRect","spaceToRIght","innerWidth","left","setAttribute","onLoginClicked","onLogoutClicked","setChevron","chevron","onDropdownClick","classList","toggle","contains","querySelectorAll","el","remove","renderLoggedIn","imageURL","image","renderLoggedOut","unsafeHTML","loggedIn","Notification","DBPLitElement","notificationBlock","notificationId","dt","getTime","c","r","Math","random","floor","createUUID","icon","iconHTML","summaryHTML","innerHTML","messageId","removeMessageId","updateComplete","messageElementId","element","removeChild","commonStyles.getGeneralCSS","commonStyles.getNotificationCSS","str","tokens","char","count","pattern","j","charCodeAt","lexer","prefixes","defaultPattern","escapeString","delimiter","path","tryConsume","mustConsume","nextType","consumeText","prefix","suffix","modifier","name_1","pattern_1","match","re","decode","pathname","m","exec","params","_loop_1","split","map","regexpToFunction","pathToRegexp","sensitive","stringToRegexp","strict","start","_c","end","_d","encode","endsWith","route","_i","tokens_1","mod","endToken","isEndDelimited","RegExp","tokensToRegexp","groupsRegex","execResult","source","regexpToRegexp","isArray","paths","parts","join","arrayToRegexp","val","decodeURIComponent","err","matchRoute","parentParams","matchResult","childMatches","childIndex","routeToSkip","done","rt","children","assign","charAt","substr","childRoute","parent","childMatch","resolveRoute","action","UniversalRouter","routes","root","pathnameOrContext","matches","nextMatches","_this","router","currentContext","resume","prevResult","parentRoute","isChildRoute","errorHandler","cacheRoutes","routesByName","has","generateUrls","ReferenceError","Map","regexpByRoute","encodeURIComponent","routeName","clear","regexp","fullPath","toPath","reFlags","validate","optional","repeat","segment","test","typeOfMessage","tokensToFunction","stringifyQueryParams","queryParams","_keys","query","Router","unioptions","getState","setState","setStateFromCurrentLocation","dispatchLocationChanged","oldPathName","page","newPathname","getPathname","referrerUrl","history","replaceState","pushState","updateFromPathname","partialState","combined","BuildInfo","env","gitInfo","buildUrl","buildTime","commonStyles.getTagCSS","date","TUGrazLogo","AppShellWelcome","LitElement","app","_app","itemTemplates","switchActivity","switchComponent","routing_name","visibleRoutes","metadata","description","appname","topic","appWelcomeMeta","visible","required_roles","pushEvent","_paq","commonUtils.defineCustomElement","MatomoElement","endpoint","siteId","isRunning","lastEvent","analyticsEvent","loginStatus","Number","setupMatomo","category","g","createElement","s","getElementsByTagName","defer","src","parentNode","insertBefore","content","getElementById","reason","AppShell","activeView","subtitle","basePath","keycloakConfig","noWelcomePage","menuHeight","_roles","matomoUrl","matomoSiteId","_attrObserver","MutationObserver","onAttributeObserved","shellName","shellSubname","noBrand","mutationsList","observer","mutation","attributeName","getAttribute","sessionStorage","setItem","topicURL","fetchOne","ok","jsondata","promises","activity","activities","actURL","p","module_src","unshift","customElements","initRouter","component","componentTag","state","updateLangIfChanged","reflect","fetchMetadata","documentElement","activeMetaDataText","_updateVisibleRoutes","onMenuItemClick","className","includes","hideMenu","onLanguageChanged","newLang","changed","offset","pageYOffset","updateFunc","header","title","style","getComputedStyle","marginTop","isNaN","parseInt","marginBottom","topValue","height","scrollTo","updatePageTitle","importNotify","metaDataText","routingName","topicMetaDataText","toggleMenu","menu","clientHeight","bottom","isMenuOverflow","innerHeight","scrollTop","removeAttribute","_createActivityElement","_lastElm","tagName","_onActivityRemoved","track","elm","_onActivityAdded","attributes","getItem","observe","attributeFilter","disconnect","_renderActivity","act","subscribe","requiredRoles","role","getSelectClasses","classMap","selected","appHidden","mainClassMap","hidden","slotClassMap","slot","prodClassMap","menuTemplates","imprintUrl","Provider","HTMLElement","callbackStore","lastProperties","debug","getProperty","setProperty","hasPropertyChanged","hasProperty","hasOwnProperty","sender","item","childList","subtree","hasAttributes","attrs"],"mappings":"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"}