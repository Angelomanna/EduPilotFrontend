{"version":3,"file":"vc4sm-frontend.js","sources":["../vendor/toolkit/packages/app-shell/src/i18n.js","../node_modules/@dbp-toolkit/language-select/src/i18n.js","../node_modules/@dbp-toolkit/language-select/src/language-select.js","../vendor/toolkit/packages/auth/src/i18n.js","../vendor/toolkit/packages/common/notification.js","../vendor/toolkit/packages/common/i18n.js","../vendor/toolkit/packages/common/jsonld.js","../node_modules/event-target-shim/index.js","../vendor/toolkit/packages/auth/src/keycloak.js","../vendor/toolkit/packages/auth/src/util.js","../vendor/toolkit/packages/auth/src/auth-keycloak.js","../vendor/toolkit/packages/auth/src/login-button.js","../vendor/toolkit/packages/app-shell/src/auth-menu-button.js","../vendor/toolkit/packages/notification/src/i18n.js","../vendor/toolkit/packages/notification/src/notification.js","../vendor/toolkit/packages/notification/src/utils.js","../node_modules/path-to-regexp/dist.es2015/index.js","../node_modules/universal-router/module.js","../node_modules/universal-router/generateUrls/module.js","../vendor/toolkit/packages/app-shell/src/router.js","../vendor/toolkit/packages/app-shell/src/build-info.js","../vendor/toolkit/packages/app-shell/src/tugraz-logo.js","../vendor/toolkit/packages/app-shell/src/dbp-app-shell-welcome.js","../vendor/toolkit/packages/matomo/src/matomo.js","../vendor/toolkit/packages/app-shell/src/app-shell.js","../src/vc4sm-frontend.js"],"sourcesContent":["import {createInstance} from '@dbp-toolkit/common/i18next.js';\n\nimport de from './i18n/de/translation.json';\nimport en from './i18n/en/translation.json';\n\nconst i18n = createInstance({en: en, de: de}, 'de', 'en');\n\nexport function createI18nInstance () {\n    return i18n.cloneInstance();\n}\n\n/**\n * Dummy function to mark strings as i18next keys for i18next-scanner\n *\n * @param {string} key\n * @returns {string} The key param as is\n */\nexport function i18nKey(key) {\n    return key;\n}","import {createInstance} from '@dbp-toolkit/common/i18next.js';\n\nimport de from './i18n/de/translation.json';\nimport en from './i18n/en/translation.json';\n\nexport const i18n = createInstance({en: en, de: de}, 'de', 'en');","import {html, css} from 'lit-element';\nimport {i18n} from './i18n.js';\nimport * as commonStyles from '@dbp-toolkit/common/styles';\nimport {AdapterLitElement} from \"@dbp-toolkit/provider/src/adapter-lit-element\";\n\n/**\n * Emits a dbp-language-changed event where event.detail.lang is the new selected language\n */\nexport class LanguageSelect extends AdapterLitElement {\n\n    constructor() {\n        super();\n        this._lang = 'de';\n        this.languages = ['de', 'en'];\n\n        this.onExternalChange = this.onExternalChange.bind(this);\n\n        // for the i18next scanner\n        i18n.t('de');\n        i18n.t('de-action');\n        i18n.t('en');\n        i18n.t('en-action');\n    }\n\n    _getNextLanguage(lang) {\n        var index = this.languages.indexOf(lang);\n        var next = this.languages[index + 1];\n        if (typeof next === 'undefined')\n            next = this.languages[0];\n        return next;\n    }\n\n    _getPreviousLanguage(lang) {\n        var index = this.languages.indexOf(lang);\n        var prev = this.languages[index - 1];\n        if (typeof prev === 'undefined')\n            prev = this.languages[this.languages.length - 1];\n        return prev;\n    }\n\n    static get properties() {\n        return {\n            lang: {type: String},\n            next: {type: String},\n            languages: {type: Array},\n        };\n    }\n\n    set lang(value) {\n        const oldValue = this.lang;\n        const oldNext = this.next;\n        this._lang = value;\n        this.requestUpdate('lang', oldValue);\n        this.requestUpdate('next', oldNext);\n\n        if (oldValue !== value) {\n            let event = new CustomEvent(\"dbp-language-changed\", {\n                bubbles: true,\n                composed: true,\n                detail: {'lang': value}\n            });\n            this.dispatchEvent(event);\n\n            // tell a dbp-provider to update the \"lang\" property\n            this.sendSetPropertyEvent('lang', value);\n\n            // Unlike other cases we use the next language for the translations so that\n            // users not knowing the current language can understand it.\n            // In case of more than two this doesn't make that much sense, but for now..\n            i18n.changeLanguage(this.next);\n        }\n    }\n\n    get lang() {\n        return this._lang;\n    }\n\n    set next(value) {\n        this.lang = this._getPreviousLanguage(value);\n    }\n\n    get next() {\n        return this._getNextLanguage(this.lang);\n    }\n\n    static get styles() {\n        // language=css\n        return [commonStyles.getThemeCSS(),\n            css`\n            :host {\n                display: inline-block;\n            }\n\n            a:hover {\n                background-color: var(--dbp-dark);\n                color: var(--dbp-light);\n                transition: none;\n            }\n\n            a {\n                padding: 0.3em;\n                display: inline-block;\n                text-decoration: none;\n                transition: background-color 0.15s, color 0.15s;\n                color: var(--dbp-dark);\n                border-radius: var(--dbp-border-radius);\n            }\n            `\n        ];\n    }\n\n    onExternalChange(e) {\n        this.lang = e.detail.lang;\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n        window.addEventListener('dbp-language-changed', this.onExternalChange);\n    }\n\n    disconnectedCallback() {\n        document.removeEventListener('dbp-language-changed', this.onExternalChange);\n        super.disconnectedCallback();\n    }\n\n    onClick(e) {\n        e.preventDefault();\n        this.lang = this.next;\n    }\n\n    render() {\n        var linkTitle = i18n.t(this.next + '-action');\n        return html`\n            <a href=\"#\" title=\"${linkTitle}\" @click=${this.onClick}>${this.next.toUpperCase()}</a>\n        `;\n    }\n}","import {createInstance} from '@dbp-toolkit/common/i18next.js';\n\nimport de from './i18n/de/translation.json';\nimport en from './i18n/en/translation.json';\n\nexport const i18n = createInstance({en: en, de: de}, 'de', 'en');","/**\n * Sends a notification via the event\n *\n * Type can be info/success/warning/danger\n *\n * example options:\n *\n * {\n *   \"summary\": \"Item deleted\",\n *   \"body\": \"Item foo was deleted!\",\n *   \"type\": \"info\",\n *   \"timeout\": 5,\n * }\n *\n * @param options\n */\nfunction send(options) {\n    const event = new CustomEvent(\"dbp-notification-send\", {\n        bubbles: true,\n        cancelable: true,\n        detail: options,\n    });\n\n    const result = window.dispatchEvent(event);\n\n    // true means the event was not handled\n    if (result) {\n        alert((options.summary !== undefined && options.summary !== \"\" ? options.summary + \": \" : \"\") + options.body);\n        console.log(\"Use the web component dbp-notification to show fancy notifications.\");\n    }\n}\n\nexport { send };\n","import {createInstance} from './i18next.js';\n\nimport de from './i18n/de/translation.json';\nimport en from './i18n/en/translation.json';\n\nexport const i18n = createInstance({en: en, de: de}, 'de', 'en');","\"use strict\";\n\nimport {send as notify} from './notification';\nimport * as utils from \"./utils\";\nimport {i18n} from \"./i18n\";\n\n// \"module.exports = class JSONLD\" doesn't work with rollup because of above \"import\"\nexport default class JSONLD {\n    constructor(baseApiUrl, entities) {\n        this.entities = entities;\n        this.baseApiUrl = baseApiUrl;\n\n        let idToEntityNameMatchList = {};\n        for (const entityName in entities) {\n            const id = entities[entityName][\"@id\"];\n            idToEntityNameMatchList[id] = entityName;\n        }\n\n        this.idToEntityNameMatchList = idToEntityNameMatchList;\n    }\n\n    static initialize(apiUrl, successFnc, failureFnc, lang = 'de') {\n        if (lang !== 'de') {\n            i18n.changeLanguage(lang);\n        }\n\n        // if init api call was already successfully finished execute the success function\n        if (JSONLD.instances[apiUrl] !== undefined) {\n            if (typeof successFnc == 'function') successFnc(JSONLD.instances[apiUrl]);\n\n            return;\n        }\n\n        // init the arrays\n        if (JSONLD.successFunctions[apiUrl] === undefined) JSONLD.successFunctions[apiUrl] = [];\n        if (JSONLD.failureFunctions[apiUrl] === undefined) JSONLD.failureFunctions[apiUrl] = [];\n\n        // add success and failure functions\n        if (typeof successFnc == 'function') JSONLD.successFunctions[apiUrl].push(successFnc);\n        if (typeof failureFnc == 'function') JSONLD.failureFunctions[apiUrl].push(failureFnc);\n    }\n\n    /**\n     * This should be run as soon as an api token is available (can be run multiple times)\n     *\n     * @param apiUrl\n     * @param token\n     */\n    static doInitializationOnce(apiUrl, token) {\n        // console.log(\"doInitializationOnce\", apiUrl, token);\n\n        // check if token is not set or api call was already started\n        if (!apiUrl || !token || JSONLD.initStarted[apiUrl] !== undefined) {\n            return;\n        }\n\n        JSONLD.initStarted[apiUrl] = true;\n        JSONLD.doInitialization(apiUrl, token);\n        // console.log(\"doInitializationOnce Done\", apiUrl, token);\n    }\n\n    static doInitialization(apiUrl, token) {\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"GET\", apiUrl, true);\n        xhr.setRequestHeader('Authorization', 'Bearer ' + token);\n\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState !== 4) {\n                return;\n            }\n\n            if (xhr.status === 200) {\n                const json = JSON.parse(xhr.responseText);\n\n                let entryPoints = {};\n                for (let property in json) {\n                    // for some reason the properties start with a lower case character\n                    if (!property.startsWith(\"@\")) entryPoints[property.toLowerCase()] = json[property];\n                }\n\n                // read the link header of the api response\n                //                const utils = require(\"./utils\");\n                const links = utils.parseLinkHeader(this.getResponseHeader(\"link\"));\n\n                // get the hydra apiDocumentation url\n                const apiDocUrl = links[\"http://www.w3.org/ns/hydra/core#apiDocumentation\"];\n\n                if (apiDocUrl !== undefined) {\n                    // load the hydra apiDocumentation\n                    const docXhr = new XMLHttpRequest();\n                    docXhr.open(\"GET\", apiDocUrl, true);\n                    docXhr.setRequestHeader(\"Content-Type\", \"application/json\");\n                    docXhr.onreadystatechange = function () {\n                        if (docXhr.readyState !== 4) {\n                            return;\n                        }\n\n                        if (docXhr.status === 200) {\n                            JSONLD.gatherEntities(docXhr, apiUrl, entryPoints);\n                        } else {\n                            JSONLD.executeFailureFunctions(apiUrl, i18n.t('jsonld.api-documentation-server', {apiUrl: apiDocUrl}));\n                        }\n                    };\n\n                    docXhr.send();\n                } else {\n                    JSONLD.executeFailureFunctions(apiUrl, i18n.t('jsonld.error-hydra-documentation-url-not-set', {apiUrl: apiUrl}));\n                }\n            } else {\n                JSONLD.executeFailureFunctions(apiUrl, i18n.t('jsonld.error-api-server', {apiUrl: apiUrl}));\n            }\n        };\n\n        xhr.send();\n    }\n\n    /**\n     * Gather the entities\n     *\n     * @param docXhr\n     * @param apiUrl\n     * @param entryPoints\n     */\n    static gatherEntities(docXhr, apiUrl, entryPoints) {\n        const json = JSON.parse(docXhr.responseText);\n        const supportedClasses = json[\"hydra:supportedClass\"];\n\n        let entities = {};\n        const baseUrl = utils.parseBaseUrl(apiUrl);\n\n        // gather the entities\n        supportedClasses.forEach(function (classData) {\n            // add entry point url\n            const entityName = classData[\"hydra:title\"];\n            let entryPoint = entryPoints[entityName.toLowerCase()];\n            if (entryPoint !== undefined && !entryPoint.startsWith(\"http\")) entryPoint = baseUrl + entryPoint;\n            classData[\"@entryPoint\"] = entryPoint;\n\n            entities[entityName] = classData;\n        });\n\n        const instance = new JSONLD(baseUrl, entities);\n        JSONLD.instances[apiUrl] = instance;\n\n        // return the initialized JSONLD object\n        for (const fnc of JSONLD.successFunctions[apiUrl]) if (typeof fnc == 'function') fnc(instance);\n        JSONLD.successFunctions[apiUrl] = [];\n    }\n\n    /**\n     * Execute failure functions and send general notification\n     *\n     * @param apiUrl\n     * @param message\n     */\n    static executeFailureFunctions(apiUrl, message = \"\") {\n        for (const fnc of JSONLD.failureFunctions[apiUrl]) if (typeof fnc == 'function') fnc();\n        JSONLD.failureFunctions[apiUrl] = [];\n\n        if (message !== \"\") {\n            notify({\n                \"summary\": i18n.t('error.summary'),\n                \"body\": message,\n                \"type\": \"danger\",\n            });\n        }\n    }\n\n    static getInstance(apiUrl) {\n        return JSONLD.instances[apiUrl];\n    }\n\n    getEntityForIdentifier(identifier) {\n        let entityName = this.getEntityNameForIdentifier(identifier);\n        return this.getEntityForEntityName(entityName);\n    }\n\n    getEntityForEntityName(entityName) {\n        return this.entities[entityName];\n    }\n\n    getApiUrlForIdentifier(identifier) {\n        const entity = this.getEntityForIdentifier(identifier);\n\n        if (entity === undefined || entity[\"@entryPoint\"] === undefined) {\n            throw new Error(`Entity with identifier \"${identifier}\" not found!`);\n        }\n\n        return entity[\"@entryPoint\"];\n    }\n\n    getApiUrlForEntityName(entityName) {\n        const entity = this.getEntityForEntityName(entityName);\n\n        if (entity === undefined || entity[\"@entryPoint\"] === undefined) {\n            throw new Error(`Entity \"${entityName}\" not found!`);\n        }\n\n        return entity[\"@entryPoint\"];\n    }\n\n    getEntityNameForIdentifier(identifier) {\n        return this.idToEntityNameMatchList[identifier];\n    }\n\n    getApiIdentifierList() {\n        let keys = [];\n        for (const property in this.idToEntityNameMatchList) {\n            keys.push(property);\n        }\n\n        return keys;\n    }\n\n    /**\n     * Expands a member of a list to a object with schema.org properties\n     *\n     * @param member\n     * @param [context]\n     */\n    expandMember(member, context) {\n        if (context === undefined) {\n            context = member[\"@context\"];\n        }\n\n        let result = {\"@id\": member[\"@id\"]};\n        for (const key of Object.keys(context)) {\n            const value = context[key];\n            if (member[key] !== undefined)\n                result[value] = member[key];\n        }\n\n        return result;\n    }\n\n    /**\n     * Compacts an expanded member of a list to a object with local properties\n     *\n     * @param member\n     * @param localContext\n     */\n    compactMember(member, localContext) {\n        let result = {};\n\n        for (const property in localContext) {\n            const value = member[localContext[property]];\n\n            if (value !== undefined) {\n                result[property] = value;\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Transforms hydra members to a local context\n     *\n     * @param data\n     * @param localContext\n     * @returns {Array} An array of transformed objects\n     */\n    transformMembers(data, localContext) {\n        const members = data['hydra:member'];\n\n        if (members === undefined || members.length === 0) {\n            return [];\n        }\n\n        const otherContext = data['@context'];\n        let results = [];\n        let that = this;\n\n        members.forEach(function (member) {\n            results.push(that.compactMember(that.expandMember(member, otherContext), localContext));\n        });\n\n        return results;\n    }\n}\n\nJSONLD.instances = {};\nJSONLD.successFunctions = {};\nJSONLD.failureFunctions = {};\nJSONLD.initStarted = {};\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/**\n * Assert a condition.\n * @param condition The condition that it should satisfy.\n * @param message The error message.\n * @param args The arguments for replacing placeholders in the message.\n */\nfunction assertType(condition, message, ...args) {\n    if (!condition) {\n        throw new TypeError(format(message, args));\n    }\n}\n/**\n * Convert a text and arguments to one string.\n * @param message The formating text\n * @param args The arguments.\n */\nfunction format(message, args) {\n    let i = 0;\n    return message.replace(/%[os]/gu, () => anyToString(args[i++]));\n}\n/**\n * Convert a value to a string representation.\n * @param x The value to get the string representation.\n */\nfunction anyToString(x) {\n    if (typeof x !== \"object\" || x === null) {\n        return String(x);\n    }\n    return Object.prototype.toString.call(x);\n}\n\nlet currentErrorHandler;\n/**\n * Set the error handler.\n * @param value The error handler to set.\n */\nfunction setErrorHandler(value) {\n    assertType(typeof value === \"function\" || value === undefined, \"The error handler must be a function or undefined, but got %o.\", value);\n    currentErrorHandler = value;\n}\n/**\n * Print a error message.\n * @param maybeError The error object.\n */\nfunction reportError(maybeError) {\n    try {\n        const error = maybeError instanceof Error\n            ? maybeError\n            : new Error(anyToString(maybeError));\n        // Call the user-defined error handler if exists.\n        if (currentErrorHandler) {\n            currentErrorHandler(error);\n            return;\n        }\n        // Dispatch an `error` event if this is on a browser.\n        if (typeof dispatchEvent === \"function\" &&\n            typeof ErrorEvent === \"function\") {\n            dispatchEvent(new ErrorEvent(\"error\", { error, message: error.message }));\n        }\n        // Emit an `uncaughtException` event if this is on Node.js.\n        //istanbul ignore else\n        else if (typeof process !== \"undefined\" &&\n            typeof process.emit === \"function\") {\n            process.emit(\"uncaughtException\", error);\n            return;\n        }\n        // Otherwise, print the error.\n        console.error(error);\n    }\n    catch (_a) {\n        // ignore.\n    }\n}\n\n/**\n * The global object.\n */\n//istanbul ignore next\nconst Global = typeof window !== \"undefined\"\n    ? window\n    : typeof self !== \"undefined\"\n        ? self\n        : typeof global !== \"undefined\"\n            ? global\n            : typeof globalThis !== \"undefined\"\n                ? globalThis\n                : undefined;\n\nlet currentWarnHandler;\n/**\n * Set the warning handler.\n * @param value The warning handler to set.\n */\nfunction setWarningHandler(value) {\n    assertType(typeof value === \"function\" || value === undefined, \"The warning handler must be a function or undefined, but got %o.\", value);\n    currentWarnHandler = value;\n}\n/**\n * The warning information.\n */\nclass Warning {\n    constructor(code, message) {\n        this.code = code;\n        this.message = message;\n    }\n    /**\n     * Report this warning.\n     * @param args The arguments of the warning.\n     */\n    warn(...args) {\n        var _a;\n        try {\n            // Call the user-defined warning handler if exists.\n            if (currentWarnHandler) {\n                currentWarnHandler({ ...this, args });\n                return;\n            }\n            // Otherwise, print the warning.\n            const stack = ((_a = new Error().stack) !== null && _a !== void 0 ? _a : \"\").replace(/^(?:.+?\\n){2}/gu, \"\\n\");\n            console.warn(this.message, ...args, stack);\n        }\n        catch (_b) {\n            // Ignore.\n        }\n    }\n}\n\nconst InitEventWasCalledWhileDispatching = new Warning(\"W01\", \"Unable to initialize event under dispatching.\");\nconst FalsyWasAssignedToCancelBubble = new Warning(\"W02\", \"Assigning any falsy value to 'cancelBubble' property has no effect.\");\nconst TruthyWasAssignedToReturnValue = new Warning(\"W03\", \"Assigning any truthy value to 'returnValue' property has no effect.\");\nconst NonCancelableEventWasCanceled = new Warning(\"W04\", \"Unable to preventDefault on non-cancelable events.\");\nconst CanceledInPassiveListener = new Warning(\"W05\", \"Unable to preventDefault inside passive event listener invocation.\");\nconst EventListenerWasDuplicated = new Warning(\"W06\", \"An event listener wasn't added because it has been added already: %o, %o\");\nconst OptionWasIgnored = new Warning(\"W07\", \"The %o option value was abandoned because the event listener wasn't added as duplicated.\");\nconst InvalidEventListener = new Warning(\"W08\", \"The 'callback' argument must be a function or an object that has 'handleEvent' method: %o\");\nconst InvalidAttributeHandler = new Warning(\"W09\", \"Event attribute handler must be a function: %o\");\n\n/*eslint-disable class-methods-use-this */\n/**\n * An implementation of `Event` interface, that wraps a given event object.\n * `EventTarget` shim can control the internal state of this `Event` objects.\n * @see https://dom.spec.whatwg.org/#event\n */\nclass Event {\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-none\n     */\n    static get NONE() {\n        return NONE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-capturing_phase\n     */\n    static get CAPTURING_PHASE() {\n        return CAPTURING_PHASE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-at_target\n     */\n    static get AT_TARGET() {\n        return AT_TARGET;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbling_phase\n     */\n    static get BUBBLING_PHASE() {\n        return BUBBLING_PHASE;\n    }\n    /**\n     * Initialize this event instance.\n     * @param type The type of this event.\n     * @param eventInitDict Options to initialize.\n     * @see https://dom.spec.whatwg.org/#dom-event-event\n     */\n    constructor(type, eventInitDict) {\n        Object.defineProperty(this, \"isTrusted\", {\n            value: false,\n            enumerable: true,\n        });\n        const opts = eventInitDict !== null && eventInitDict !== void 0 ? eventInitDict : {};\n        internalDataMap.set(this, {\n            type: String(type),\n            bubbles: Boolean(opts.bubbles),\n            cancelable: Boolean(opts.cancelable),\n            composed: Boolean(opts.composed),\n            target: null,\n            currentTarget: null,\n            stopPropagationFlag: false,\n            stopImmediatePropagationFlag: false,\n            canceledFlag: false,\n            inPassiveListenerFlag: false,\n            dispatchFlag: false,\n            timeStamp: Date.now(),\n        });\n    }\n    /**\n     * The type of this event.\n     * @see https://dom.spec.whatwg.org/#dom-event-type\n     */\n    get type() {\n        return $(this).type;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @see https://dom.spec.whatwg.org/#dom-event-target\n     */\n    get target() {\n        return $(this).target;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @deprecated Use the `target` property instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-srcelement\n     */\n    get srcElement() {\n        return $(this).target;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @see https://dom.spec.whatwg.org/#dom-event-currenttarget\n     */\n    get currentTarget() {\n        return $(this).currentTarget;\n    }\n    /**\n     * The event target of the current dispatching.\n     * This doesn't support node tree.\n     * @see https://dom.spec.whatwg.org/#dom-event-composedpath\n     */\n    composedPath() {\n        const currentTarget = $(this).currentTarget;\n        if (currentTarget) {\n            return [currentTarget];\n        }\n        return [];\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-none\n     */\n    get NONE() {\n        return NONE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-capturing_phase\n     */\n    get CAPTURING_PHASE() {\n        return CAPTURING_PHASE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-at_target\n     */\n    get AT_TARGET() {\n        return AT_TARGET;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbling_phase\n     */\n    get BUBBLING_PHASE() {\n        return BUBBLING_PHASE;\n    }\n    /**\n     * The current event phase.\n     * @see https://dom.spec.whatwg.org/#dom-event-eventphase\n     */\n    get eventPhase() {\n        return $(this).dispatchFlag ? 2 : 0;\n    }\n    /**\n     * Stop event bubbling.\n     * Because this shim doesn't support node tree, this merely changes the `cancelBubble` property value.\n     * @see https://dom.spec.whatwg.org/#dom-event-stoppropagation\n     */\n    stopPropagation() {\n        $(this).stopPropagationFlag = true;\n    }\n    /**\n     * `true` if event bubbling was stopped.\n     * @deprecated\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelbubble\n     */\n    get cancelBubble() {\n        return $(this).stopPropagationFlag;\n    }\n    /**\n     * Stop event bubbling if `true` is set.\n     * @deprecated Use the `stopPropagation()` method instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelbubble\n     */\n    set cancelBubble(value) {\n        if (value) {\n            $(this).stopPropagationFlag = true;\n        }\n        else {\n            FalsyWasAssignedToCancelBubble.warn();\n        }\n    }\n    /**\n     * Stop event bubbling and subsequent event listener callings.\n     * @see https://dom.spec.whatwg.org/#dom-event-stopimmediatepropagation\n     */\n    stopImmediatePropagation() {\n        const data = $(this);\n        data.stopPropagationFlag = data.stopImmediatePropagationFlag = true;\n    }\n    /**\n     * `true` if this event will bubble.\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbles\n     */\n    get bubbles() {\n        return $(this).bubbles;\n    }\n    /**\n     * `true` if this event can be canceled by the `preventDefault()` method.\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelable\n     */\n    get cancelable() {\n        return $(this).cancelable;\n    }\n    /**\n     * `true` if the default behavior will act.\n     * @deprecated Use the `defaultPrevented` proeprty instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-returnvalue\n     */\n    get returnValue() {\n        return !$(this).canceledFlag;\n    }\n    /**\n     * Cancel the default behavior if `false` is set.\n     * @deprecated Use the `preventDefault()` method instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-returnvalue\n     */\n    set returnValue(value) {\n        if (!value) {\n            setCancelFlag($(this));\n        }\n        else {\n            TruthyWasAssignedToReturnValue.warn();\n        }\n    }\n    /**\n     * Cancel the default behavior.\n     * @see https://dom.spec.whatwg.org/#dom-event-preventdefault\n     */\n    preventDefault() {\n        setCancelFlag($(this));\n    }\n    /**\n     * `true` if the default behavior was canceled.\n     * @see https://dom.spec.whatwg.org/#dom-event-defaultprevented\n     */\n    get defaultPrevented() {\n        return $(this).canceledFlag;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-composed\n     */\n    get composed() {\n        return $(this).composed;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-istrusted\n     */\n    //istanbul ignore next\n    get isTrusted() {\n        return false;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-timestamp\n     */\n    get timeStamp() {\n        return $(this).timeStamp;\n    }\n    /**\n     * @deprecated Don't use this method. The constructor did initialization.\n     */\n    initEvent(type, bubbles = false, cancelable = false) {\n        const data = $(this);\n        if (data.dispatchFlag) {\n            InitEventWasCalledWhileDispatching.warn();\n            return;\n        }\n        internalDataMap.set(this, {\n            ...data,\n            type: String(type),\n            bubbles: Boolean(bubbles),\n            cancelable: Boolean(cancelable),\n            target: null,\n            currentTarget: null,\n            stopPropagationFlag: false,\n            stopImmediatePropagationFlag: false,\n            canceledFlag: false,\n        });\n    }\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\nconst NONE = 0;\nconst CAPTURING_PHASE = 1;\nconst AT_TARGET = 2;\nconst BUBBLING_PHASE = 3;\n/**\n * Private data for event wrappers.\n */\nconst internalDataMap = new WeakMap();\n/**\n * Get private data.\n * @param event The event object to get private data.\n * @param name The variable name to report.\n * @returns The private data of the event.\n */\nfunction $(event, name = \"this\") {\n    const retv = internalDataMap.get(event);\n    assertType(retv != null, \"'%s' must be an object that Event constructor created, but got another one: %o\", name, event);\n    return retv;\n}\n/**\n * https://dom.spec.whatwg.org/#set-the-canceled-flag\n * @param data private data.\n */\nfunction setCancelFlag(data) {\n    if (data.inPassiveListenerFlag) {\n        CanceledInPassiveListener.warn();\n        return;\n    }\n    if (!data.cancelable) {\n        NonCancelableEventWasCanceled.warn();\n        return;\n    }\n    data.canceledFlag = true;\n}\n// Set enumerable\nObject.defineProperty(Event, \"NONE\", { enumerable: true });\nObject.defineProperty(Event, \"CAPTURING_PHASE\", { enumerable: true });\nObject.defineProperty(Event, \"AT_TARGET\", { enumerable: true });\nObject.defineProperty(Event, \"BUBBLING_PHASE\", { enumerable: true });\nconst keys = Object.getOwnPropertyNames(Event.prototype);\nfor (let i = 0; i < keys.length; ++i) {\n    if (keys[i] === \"constructor\") {\n        continue;\n    }\n    Object.defineProperty(Event.prototype, keys[i], { enumerable: true });\n}\n// Ensure `event instanceof window.Event` is `true`.\nif (typeof Global !== \"undefined\" && typeof Global.Event !== \"undefined\") {\n    Object.setPrototypeOf(Event.prototype, Global.Event.prototype);\n}\n\n/**\n * Create a new InvalidStateError instance.\n * @param message The error message.\n */\nfunction createInvalidStateError(message) {\n    if (Global.DOMException) {\n        return new Global.DOMException(message, \"InvalidStateError\");\n    }\n    if (DOMException == null) {\n        DOMException = class DOMException extends Error {\n            constructor(msg) {\n                super(msg);\n                if (Error.captureStackTrace) {\n                    Error.captureStackTrace(this, DOMException);\n                }\n            }\n            // eslint-disable-next-line class-methods-use-this\n            get code() {\n                return 11;\n            }\n            // eslint-disable-next-line class-methods-use-this\n            get name() {\n                return \"InvalidStateError\";\n            }\n        };\n        Object.defineProperties(DOMException.prototype, {\n            code: { enumerable: true },\n            name: { enumerable: true },\n        });\n        defineErrorCodeProperties(DOMException);\n        defineErrorCodeProperties(DOMException.prototype);\n    }\n    return new DOMException(message);\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\nlet DOMException;\nconst ErrorCodeMap = {\n    INDEX_SIZE_ERR: 1,\n    DOMSTRING_SIZE_ERR: 2,\n    HIERARCHY_REQUEST_ERR: 3,\n    WRONG_DOCUMENT_ERR: 4,\n    INVALID_CHARACTER_ERR: 5,\n    NO_DATA_ALLOWED_ERR: 6,\n    NO_MODIFICATION_ALLOWED_ERR: 7,\n    NOT_FOUND_ERR: 8,\n    NOT_SUPPORTED_ERR: 9,\n    INUSE_ATTRIBUTE_ERR: 10,\n    INVALID_STATE_ERR: 11,\n    SYNTAX_ERR: 12,\n    INVALID_MODIFICATION_ERR: 13,\n    NAMESPACE_ERR: 14,\n    INVALID_ACCESS_ERR: 15,\n    VALIDATION_ERR: 16,\n    TYPE_MISMATCH_ERR: 17,\n    SECURITY_ERR: 18,\n    NETWORK_ERR: 19,\n    ABORT_ERR: 20,\n    URL_MISMATCH_ERR: 21,\n    QUOTA_EXCEEDED_ERR: 22,\n    TIMEOUT_ERR: 23,\n    INVALID_NODE_TYPE_ERR: 24,\n    DATA_CLONE_ERR: 25,\n};\nfunction defineErrorCodeProperties(obj) {\n    const keys = Object.keys(ErrorCodeMap);\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i];\n        const value = ErrorCodeMap[key];\n        Object.defineProperty(obj, key, {\n            get() {\n                return value;\n            },\n            configurable: true,\n            enumerable: true,\n        });\n    }\n}\n\n/**\n * An implementation of `Event` interface, that wraps a given event object.\n * This class controls the internal state of `Event`.\n * @see https://dom.spec.whatwg.org/#interface-event\n */\nclass EventWrapper extends Event {\n    /**\n     * Wrap a given event object to control states.\n     * @param event The event-like object to wrap.\n     */\n    static wrap(event) {\n        return new (getWrapperClassOf(event))(event);\n    }\n    constructor(event) {\n        super(event.type, {\n            bubbles: event.bubbles,\n            cancelable: event.cancelable,\n            composed: event.composed,\n        });\n        if (event.cancelBubble) {\n            super.stopPropagation();\n        }\n        if (event.defaultPrevented) {\n            super.preventDefault();\n        }\n        internalDataMap$1.set(this, { original: event });\n        // Define accessors\n        const keys = Object.keys(event);\n        for (let i = 0; i < keys.length; ++i) {\n            const key = keys[i];\n            if (!(key in this)) {\n                Object.defineProperty(this, key, defineRedirectDescriptor(event, key));\n            }\n        }\n    }\n    stopPropagation() {\n        super.stopPropagation();\n        const { original } = $$1(this);\n        if (\"stopPropagation\" in original) {\n            original.stopPropagation();\n        }\n    }\n    get cancelBubble() {\n        return super.cancelBubble;\n    }\n    set cancelBubble(value) {\n        super.cancelBubble = value;\n        const { original } = $$1(this);\n        if (\"cancelBubble\" in original) {\n            original.cancelBubble = value;\n        }\n    }\n    stopImmediatePropagation() {\n        super.stopImmediatePropagation();\n        const { original } = $$1(this);\n        if (\"stopImmediatePropagation\" in original) {\n            original.stopImmediatePropagation();\n        }\n    }\n    get returnValue() {\n        return super.returnValue;\n    }\n    set returnValue(value) {\n        super.returnValue = value;\n        const { original } = $$1(this);\n        if (\"returnValue\" in original) {\n            original.returnValue = value;\n        }\n    }\n    preventDefault() {\n        super.preventDefault();\n        const { original } = $$1(this);\n        if (\"preventDefault\" in original) {\n            original.preventDefault();\n        }\n    }\n    get timeStamp() {\n        const { original } = $$1(this);\n        if (\"timeStamp\" in original) {\n            return original.timeStamp;\n        }\n        return super.timeStamp;\n    }\n}\n/**\n * Private data for event wrappers.\n */\nconst internalDataMap$1 = new WeakMap();\n/**\n * Get private data.\n * @param event The event object to get private data.\n * @returns The private data of the event.\n */\nfunction $$1(event) {\n    const retv = internalDataMap$1.get(event);\n    assertType(retv != null, \"'this' is expected an Event object, but got\", event);\n    return retv;\n}\n/**\n * Cache for wrapper classes.\n * @type {WeakMap<Object, Function>}\n * @private\n */\nconst wrapperClassCache = new WeakMap();\n// Make association for wrappers.\nwrapperClassCache.set(Object.prototype, EventWrapper);\nif (typeof Global !== \"undefined\" && typeof Global.Event !== \"undefined\") {\n    wrapperClassCache.set(Global.Event.prototype, EventWrapper);\n}\n/**\n * Get the wrapper class of a given prototype.\n * @param originalEvent The event object to wrap.\n */\nfunction getWrapperClassOf(originalEvent) {\n    const prototype = Object.getPrototypeOf(originalEvent);\n    if (prototype == null) {\n        return EventWrapper;\n    }\n    let wrapper = wrapperClassCache.get(prototype);\n    if (wrapper == null) {\n        wrapper = defineWrapper(getWrapperClassOf(prototype), prototype);\n        wrapperClassCache.set(prototype, wrapper);\n    }\n    return wrapper;\n}\n/**\n * Define new wrapper class.\n * @param BaseEventWrapper The base wrapper class.\n * @param originalPrototype The prototype of the original event.\n */\nfunction defineWrapper(BaseEventWrapper, originalPrototype) {\n    class CustomEventWrapper extends BaseEventWrapper {\n    }\n    const keys = Object.keys(originalPrototype);\n    for (let i = 0; i < keys.length; ++i) {\n        Object.defineProperty(CustomEventWrapper.prototype, keys[i], defineRedirectDescriptor(originalPrototype, keys[i]));\n    }\n    return CustomEventWrapper;\n}\n/**\n * Get the property descriptor to redirect a given property.\n */\nfunction defineRedirectDescriptor(obj, key) {\n    const d = Object.getOwnPropertyDescriptor(obj, key);\n    return {\n        get() {\n            const original = $$1(this).original;\n            const value = original[key];\n            if (typeof value === \"function\") {\n                return value.bind(original);\n            }\n            return value;\n        },\n        set(value) {\n            const original = $$1(this).original;\n            original[key] = value;\n        },\n        configurable: d.configurable,\n        enumerable: d.enumerable,\n    };\n}\n\n/**\n * Create a new listener.\n * @param callback The callback function.\n * @param capture The capture flag.\n * @param passive The passive flag.\n * @param once The once flag.\n * @param signal The abort signal.\n * @param signalListener The abort event listener for the abort signal.\n */\nfunction createListener(callback, capture, passive, once, signal, signalListener) {\n    return {\n        callback,\n        flags: (capture ? 1 /* Capture */ : 0) |\n            (passive ? 2 /* Passive */ : 0) |\n            (once ? 4 /* Once */ : 0),\n        signal,\n        signalListener,\n    };\n}\n/**\n * Set the `removed` flag to the given listener.\n * @param listener The listener to check.\n */\nfunction setRemoved(listener) {\n    listener.flags |= 8 /* Removed */;\n}\n/**\n * Check if the given listener has the `capture` flag or not.\n * @param listener The listener to check.\n */\nfunction isCapture(listener) {\n    return (listener.flags & 1 /* Capture */) === 1 /* Capture */;\n}\n/**\n * Check if the given listener has the `passive` flag or not.\n * @param listener The listener to check.\n */\nfunction isPassive(listener) {\n    return (listener.flags & 2 /* Passive */) === 2 /* Passive */;\n}\n/**\n * Check if the given listener has the `once` flag or not.\n * @param listener The listener to check.\n */\nfunction isOnce(listener) {\n    return (listener.flags & 4 /* Once */) === 4 /* Once */;\n}\n/**\n * Check if the given listener has the `removed` flag or not.\n * @param listener The listener to check.\n */\nfunction isRemoved(listener) {\n    return (listener.flags & 8 /* Removed */) === 8 /* Removed */;\n}\n/**\n * Call an event listener.\n * @param listener The listener to call.\n * @param target The event target object for `thisArg`.\n * @param event The event object for the first argument.\n * @param attribute `true` if this callback is an event attribute handler.\n */\nfunction invokeCallback({ callback }, target, event) {\n    try {\n        if (typeof callback === \"function\") {\n            callback.call(target, event);\n        }\n        else if (typeof callback.handleEvent === \"function\") {\n            callback.handleEvent(event);\n        }\n    }\n    catch (thrownError) {\n        reportError(thrownError);\n    }\n}\n\n/**\n * Find the index of given listener.\n * This returns `-1` if not found.\n * @param list The listener list.\n * @param callback The callback function to find.\n * @param capture The capture flag to find.\n */\nfunction findIndexOfListener({ listeners }, callback, capture) {\n    for (let i = 0; i < listeners.length; ++i) {\n        if (listeners[i].callback === callback &&\n            isCapture(listeners[i]) === capture) {\n            return i;\n        }\n    }\n    return -1;\n}\n/**\n * Add the given listener.\n * Does copy-on-write if needed.\n * @param list The listener list.\n * @param callback The callback function.\n * @param capture The capture flag.\n * @param passive The passive flag.\n * @param once The once flag.\n * @param signal The abort signal.\n */\nfunction addListener(list, callback, capture, passive, once, signal) {\n    let signalListener;\n    if (signal) {\n        signalListener = removeListener.bind(null, list, callback, capture);\n        signal.addEventListener(\"abort\", signalListener);\n    }\n    const listener = createListener(callback, capture, passive, once, signal, signalListener);\n    if (list.cow) {\n        list.cow = false;\n        list.listeners = [...list.listeners, listener];\n    }\n    else {\n        list.listeners.push(listener);\n    }\n    return listener;\n}\n/**\n * Remove a listener.\n * @param list The listener list.\n * @param callback The callback function to find.\n * @param capture The capture flag to find.\n * @returns `true` if it mutated the list directly.\n */\nfunction removeListener(list, callback, capture) {\n    const index = findIndexOfListener(list, callback, capture);\n    if (index !== -1) {\n        return removeListenerAt(list, index);\n    }\n    return false;\n}\n/**\n * Remove a listener.\n * @param list The listener list.\n * @param index The index of the target listener.\n * @param disableCow Disable copy-on-write if true.\n * @returns `true` if it mutated the `listeners` array directly.\n */\nfunction removeListenerAt(list, index, disableCow = false) {\n    const listener = list.listeners[index];\n    // Set the removed flag.\n    setRemoved(listener);\n    // Dispose the abort signal listener if exists.\n    if (listener.signal) {\n        listener.signal.removeEventListener(\"abort\", listener.signalListener);\n    }\n    // Remove it from the array.\n    if (list.cow && !disableCow) {\n        list.cow = false;\n        list.listeners = list.listeners.filter((_, i) => i !== index);\n        return false;\n    }\n    list.listeners.splice(index, 1);\n    return true;\n}\n\n/**\n * Create a new `ListenerListMap` object.\n */\nfunction createListenerListMap() {\n    return Object.create(null);\n}\n/**\n * Get the listener list of the given type.\n * If the listener list has not been initialized, initialize and return it.\n * @param listenerMap The listener list map.\n * @param type The event type to get.\n */\nfunction ensureListenerList(listenerMap, type) {\n    var _a;\n    return ((_a = listenerMap[type]) !== null && _a !== void 0 ? _a : (listenerMap[type] = {\n        attrCallback: undefined,\n        attrListener: undefined,\n        cow: false,\n        listeners: [],\n    }));\n}\n\n/**\n * An implementation of the `EventTarget` interface.\n * @see https://dom.spec.whatwg.org/#eventtarget\n */\nclass EventTarget {\n    /**\n     * Initialize this instance.\n     */\n    constructor() {\n        internalDataMap$2.set(this, createListenerListMap());\n    }\n    // Implementation\n    addEventListener(type0, callback0, options0) {\n        const listenerMap = $$2(this);\n        const { callback, capture, once, passive, signal, type, } = normalizeAddOptions(type0, callback0, options0);\n        if (callback == null || (signal === null || signal === void 0 ? void 0 : signal.aborted)) {\n            return;\n        }\n        const list = ensureListenerList(listenerMap, type);\n        // Find existing listener.\n        const i = findIndexOfListener(list, callback, capture);\n        if (i !== -1) {\n            warnDuplicate(list.listeners[i], passive, once, signal);\n            return;\n        }\n        // Add the new listener.\n        addListener(list, callback, capture, passive, once, signal);\n    }\n    // Implementation\n    removeEventListener(type0, callback0, options0) {\n        const listenerMap = $$2(this);\n        const { callback, capture, type } = normalizeOptions(type0, callback0, options0);\n        const list = listenerMap[type];\n        if (callback != null && list) {\n            removeListener(list, callback, capture);\n        }\n    }\n    // Implementation\n    dispatchEvent(e) {\n        const list = $$2(this)[String(e.type)];\n        if (list == null) {\n            return true;\n        }\n        const event = e instanceof Event ? e : EventWrapper.wrap(e);\n        const eventData = $(event, \"event\");\n        if (eventData.dispatchFlag) {\n            throw createInvalidStateError(\"This event has been in dispatching.\");\n        }\n        eventData.dispatchFlag = true;\n        eventData.target = eventData.currentTarget = this;\n        if (!eventData.stopPropagationFlag) {\n            const { cow, listeners } = list;\n            // Set copy-on-write flag.\n            list.cow = true;\n            // Call listeners.\n            for (let i = 0; i < listeners.length; ++i) {\n                const listener = listeners[i];\n                // Skip if removed.\n                if (isRemoved(listener)) {\n                    continue;\n                }\n                // Remove this listener if has the `once` flag.\n                if (isOnce(listener) && removeListenerAt(list, i, !cow)) {\n                    // Because this listener was removed, the next index is the\n                    // same as the current value.\n                    i -= 1;\n                }\n                // Call this listener with the `passive` flag.\n                eventData.inPassiveListenerFlag = isPassive(listener);\n                invokeCallback(listener, this, event);\n                eventData.inPassiveListenerFlag = false;\n                // Stop if the `event.stopImmediatePropagation()` method was called.\n                if (eventData.stopImmediatePropagationFlag) {\n                    break;\n                }\n            }\n            // Restore copy-on-write flag.\n            if (!cow) {\n                list.cow = false;\n            }\n        }\n        eventData.target = null;\n        eventData.currentTarget = null;\n        eventData.stopImmediatePropagationFlag = false;\n        eventData.stopPropagationFlag = false;\n        eventData.dispatchFlag = false;\n        return !eventData.canceledFlag;\n    }\n}\n/**\n * Internal data.\n */\nconst internalDataMap$2 = new WeakMap();\n/**\n * Get private data.\n * @param target The event target object to get private data.\n * @param name The variable name to report.\n * @returns The private data of the event.\n */\nfunction $$2(target, name = \"this\") {\n    const retv = internalDataMap$2.get(target);\n    assertType(retv != null, \"'%s' must be an object that EventTarget constructor created, but got another one: %o\", name, target);\n    return retv;\n}\n/**\n * Normalize options.\n * @param options The options to normalize.\n */\nfunction normalizeAddOptions(type, callback, options) {\n    var _a;\n    assertCallback(callback);\n    if (typeof options === \"object\" && options !== null) {\n        return {\n            type: String(type),\n            callback: callback !== null && callback !== void 0 ? callback : undefined,\n            capture: Boolean(options.capture),\n            passive: Boolean(options.passive),\n            once: Boolean(options.once),\n            signal: (_a = options.signal) !== null && _a !== void 0 ? _a : undefined,\n        };\n    }\n    return {\n        type: String(type),\n        callback: callback !== null && callback !== void 0 ? callback : undefined,\n        capture: Boolean(options),\n        passive: false,\n        once: false,\n        signal: undefined,\n    };\n}\n/**\n * Normalize options.\n * @param options The options to normalize.\n */\nfunction normalizeOptions(type, callback, options) {\n    assertCallback(callback);\n    if (typeof options === \"object\" && options !== null) {\n        return {\n            type: String(type),\n            callback: callback !== null && callback !== void 0 ? callback : undefined,\n            capture: Boolean(options.capture),\n        };\n    }\n    return {\n        type: String(type),\n        callback: callback !== null && callback !== void 0 ? callback : undefined,\n        capture: Boolean(options),\n    };\n}\n/**\n * Assert the type of 'callback' argument.\n * @param callback The callback to check.\n */\nfunction assertCallback(callback) {\n    if (typeof callback === \"function\" ||\n        (typeof callback === \"object\" &&\n            callback !== null &&\n            typeof callback.handleEvent === \"function\")) {\n        return;\n    }\n    if (callback == null || typeof callback === \"object\") {\n        InvalidEventListener.warn(callback);\n        return;\n    }\n    throw new TypeError(format(InvalidEventListener.message, [callback]));\n}\n/**\n * Print warning for duplicated.\n * @param listener The current listener that is duplicated.\n * @param passive The passive flag of the new duplicated listener.\n * @param once The once flag of the new duplicated listener.\n * @param signal The signal object of the new duplicated listener.\n */\nfunction warnDuplicate(listener, passive, once, signal) {\n    EventListenerWasDuplicated.warn(isCapture(listener) ? \"capture\" : \"bubble\", listener.callback);\n    if (isPassive(listener) !== passive) {\n        OptionWasIgnored.warn(\"passive\");\n    }\n    if (isOnce(listener) !== once) {\n        OptionWasIgnored.warn(\"once\");\n    }\n    if (listener.signal !== signal) {\n        OptionWasIgnored.warn(\"signal\");\n    }\n}\n// Set enumerable\nconst keys$1 = Object.getOwnPropertyNames(EventTarget.prototype);\nfor (let i = 0; i < keys$1.length; ++i) {\n    if (keys$1[i] === \"constructor\") {\n        continue;\n    }\n    Object.defineProperty(EventTarget.prototype, keys$1[i], { enumerable: true });\n}\n// Ensure `eventTarget instanceof window.EventTarget` is `true`.\nif (typeof Global !== \"undefined\" &&\n    typeof Global.EventTarget !== \"undefined\") {\n    Object.setPrototypeOf(EventTarget.prototype, Global.EventTarget.prototype);\n}\n\n/**\n * Get the current value of a given event attribute.\n * @param target The `EventTarget` object to get.\n * @param type The event type.\n */\nfunction getEventAttributeValue(target, type) {\n    var _a, _b;\n    const listMap = $$2(target, \"target\");\n    return (_b = (_a = listMap[type]) === null || _a === void 0 ? void 0 : _a.attrCallback) !== null && _b !== void 0 ? _b : null;\n}\n/**\n * Set an event listener to a given event attribute.\n * @param target The `EventTarget` object to set.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction setEventAttributeValue(target, type, callback) {\n    if (callback != null && typeof callback !== \"function\") {\n        InvalidAttributeHandler.warn(callback);\n    }\n    if (typeof callback === \"function\" ||\n        (typeof callback === \"object\" && callback !== null)) {\n        upsertEventAttributeListener(target, type, callback);\n    }\n    else {\n        removeEventAttributeListener(target, type);\n    }\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\n/**\n * Update or insert the given event attribute handler.\n * @param target The `EventTarget` object to set.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction upsertEventAttributeListener(target, type, callback) {\n    const list = ensureListenerList($$2(target, \"target\"), String(type));\n    list.attrCallback = callback;\n    if (list.attrListener == null) {\n        list.attrListener = addListener(list, defineEventAttributeCallback(list), false, false, false, undefined);\n    }\n}\n/**\n * Remove the given event attribute handler.\n * @param target The `EventTarget` object to remove.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction removeEventAttributeListener(target, type) {\n    const listMap = $$2(target, \"target\");\n    const list = listMap[String(type)];\n    if (list && list.attrListener) {\n        removeListener(list, list.attrListener.callback, false);\n        list.attrCallback = list.attrListener = undefined;\n    }\n}\n/**\n * Define the callback function for the given listener list object.\n * It calls `attrCallback` property if the property value is a function.\n * @param list The `ListenerList` object.\n */\nfunction defineEventAttributeCallback(list) {\n    return function (event) {\n        const callback = list.attrCallback;\n        if (typeof callback === \"function\") {\n            callback.call(this, event);\n        }\n    };\n}\n\n/**\n * Define an `EventTarget` class that has event attibutes.\n * @param types The types to define event attributes.\n * @deprecated Use `getEventAttributeValue`/`setEventAttributeValue` pair on your derived class instead because of static analysis friendly.\n */\nfunction defineCustomEventTarget(...types) {\n    class CustomEventTarget extends EventTarget {\n    }\n    for (let i = 0; i < types.length; ++i) {\n        defineEventAttribute(CustomEventTarget.prototype, types[i]);\n    }\n    return CustomEventTarget;\n}\n/**\n * Define an event attribute.\n * @param target The `EventTarget` object to define an event attribute.\n * @param type The event type to define.\n * @param _eventClass Unused, but to infer `Event` class type.\n * @deprecated Use `getEventAttributeValue`/`setEventAttributeValue` pair on your derived class instead because of static analysis friendly.\n */\nfunction defineEventAttribute(target, type, _eventClass) {\n    Object.defineProperty(target, `on${type}`, {\n        get() {\n            return getEventAttributeValue(this, type);\n        },\n        set(value) {\n            setEventAttributeValue(this, type, value);\n        },\n        configurable: true,\n        enumerable: true,\n    });\n}\n\nexports.Event = Event;\nexports.EventTarget = EventTarget;\nexports.default = EventTarget;\nexports.defineCustomEventTarget = defineCustomEventTarget;\nexports.defineEventAttribute = defineEventAttribute;\nexports.getEventAttributeValue = getEventAttributeValue;\nexports.setErrorHandler = setErrorHandler;\nexports.setEventAttributeValue = setEventAttributeValue;\nexports.setWarningHandler = setWarningHandler;\n//# sourceMappingURL=index.js.map\n","import {EventTarget} from \"event-target-shim\";  // Because EventTarget() doesn't exist on Safari\n\n\n/**\n * Imports the keycloak JS API as if it was a module.\n *\n * @param baseUrl {string}\n */\nasync function importKeycloak(baseUrl) {\n    const keycloakSrc = baseUrl + '/js/keycloak.min.js';\n    // Importing will write it to window so we take it from there\n    await import(keycloakSrc);\n    if (importKeycloak._keycloakMod !== undefined)\n        return importKeycloak._keycloakMod;\n    importKeycloak._keycloakMod = window.Keycloak;\n    delete window.Keycloak;\n    return importKeycloak._keycloakMod;\n}\n\n\nconst promiseTimeout = function(ms, promise) {\n    let timeout = new Promise((resolve, reject) => {\n      let id = setTimeout(() => {\n        clearTimeout(id);\n        reject('Timed out in '+ ms + 'ms.');\n      }, ms);\n    });\n\n    return Promise.race([\n      promise,\n      timeout\n    ]);\n};\n\n\n/**\n * Returns a URL for a relative path or URL\n *\n * @param {string} urlOrPath\n */\nconst ensureURL = function(urlOrPath) {\n    try {\n        return new URL(urlOrPath).href;\n    } catch (e) {\n        return new URL(urlOrPath, window.location.href).href;\n    }\n};\n\n\n/**\n * Wraps the keycloak API to support async/await, adds auto token refreshing and consolidates all\n * events into one native \"changed\" event\n * \n * The \"changed\" event has the real keycloak instance as \"detail\"\n */\nexport class KeycloakWrapper extends EventTarget {\n\n    constructor(baseURL, realm, clientId, silentCheckSsoUri, idpHint) {\n        super();\n\n        this._baseURL = baseURL;\n        this._realm = realm;\n        this._clientId = clientId;\n        this._keycloak = null;\n        this._initDone = false;\n        this._silentCheckSsoUri = silentCheckSsoUri;\n        this._idpHint = idpHint;\n        this._checkId = null;\n\n        /* Minimum validity of the token in seconds */\n        this.MIN_VALIDITY = 20;\n\n        /* Interval at which the token validity is checked, in seconds */\n        this.CHECK_INTERVAL = 10;\n\n        /* Enables extra debug logging */\n        this.DEBUG = false;\n\n        this._onVisibilityChanged = this._onVisibilityChanged.bind(this);\n        document.addEventListener(\"visibilitychange\", this._onVisibilityChanged);\n    }\n\n    /**\n     * This needs to be called or the instance will leak;\n     */\n    close() {\n        document.removeEventListener(\"visibilitychange\", this._onVisibilityChanged);\n    }\n\n    _onVisibilityChanged() {\n        let isVisible = (document.visibilityState === 'visible');\n        if (isVisible && this._keycloak.authenticated) {\n            this._checkTokeHasExpired();\n        }\n    }\n\n    _onChanged() {\n        const event = new CustomEvent(\"changed\", {\n            detail: this._keycloak,\n            bubbles: true,\n            composed: true\n        });\n        this.dispatchEvent(event);\n    }\n\n    _onReady(authenticated) {\n        // Avoid emitting changed when nothing has changed on init()\n        if (authenticated)\n            this._onChanged();\n    }\n\n    async _onTokenExpired() {\n        console.log('Token has expired');\n        let refreshed = false;\n\n        try {\n            // -1 means force a refresh\n            refreshed = await this._keycloak.updateToken(-1);\n        } catch (error) {\n            console.log('Failed to refresh the token', error);\n            return;\n        }\n\n        console.assert(refreshed, \"token should have been refreshed\");\n    }\n\n    async _checkTokeHasExpired() {\n        let refreshed;\n\n        let minValidity = this.MIN_VALIDITY + this.CHECK_INTERVAL;\n        if (this.DEBUG) {\n            console.log(`Updating token if not valid for at least ${minValidity}s`);\n        }\n        try {\n            refreshed = await this._keycloak.updateToken(minValidity);\n        } catch (error) {\n            console.log('Failed to refresh the token', error);\n        }\n\n        if (this.DEBUG && refreshed)\n            console.log(\"token has been refreshed\");\n    }\n\n    async _onAuthSuccess() {\n        // We check every once in a while if the token is still valid and\n        // and refresh it if needed.\n        if (this._checkId !== null) {\n            clearInterval(this._checkId);\n            this._checkId = null;\n        }\n        this._checkId = setInterval(this._checkTokeHasExpired.bind(this), this.CHECK_INTERVAL * 1000);\n\n        this._onChanged();\n    }\n\n    async _onAuthLogout() {\n        if (this._checkId !== null) {\n            clearInterval(this._checkId);\n            this._checkId = null;\n        }\n\n        this._onChanged();\n    }\n\n    async _ensureInstance() {\n        if (this._keycloak !== null)\n            return;\n\n        const Keycloak = await importKeycloak(this._baseURL);\n\n        this._keycloak = Keycloak({\n            url: this._baseURL,\n            realm: this._realm,\n            clientId: this._clientId,\n        });\n\n        this._keycloak.onTokenExpired = this._onTokenExpired.bind(this);\n        this._keycloak.onAuthRefreshSuccess = this._onChanged.bind(this);\n        this._keycloak.onAuthRefreshError = this._onChanged.bind(this);\n        this._keycloak.onAuthLogout = this._onAuthLogout.bind(this);\n        this._keycloak.onAuthSuccess = this._onAuthSuccess.bind(this);\n        this._keycloak.onAuthError = this._onChanged.bind(this);\n        this._keycloak.onReady = this._onReady.bind(this);\n    }\n\n    async _keycloakInit(options) {\n        // https://gitlab.tugraz.at/dbp/apps/library/issues/41\n        // retry the keycloak init in case it fails, maybe it helps :/\n        try {\n            return await this._keycloak.init(options);\n        } catch (e) {\n            return await this._keycloak.init(options);\n        }\n    }\n\n    async _ensureInit() {\n        await this._ensureInstance();\n        if (this._initDone)\n            return;\n        this._initDone = true;\n\n        const options = {\n            promiseType: 'native',\n            pkceMethod: 'S256',\n        };\n\n        if (this.DEBUG) {\n            options['enableLogging'] = true;\n        }\n\n        if (this._silentCheckSsoUri) {\n\n            options['onLoad'] = 'check-sso';\n            options['silentCheckSsoRedirectUri'] = ensureURL(this._silentCheckSsoUri);\n\n            // When silent-sso-check is active but the iframe doesn't load/work we will\n            // never return here, so add a timeout and emit a signal so the app can continue\n            await promiseTimeout(5000, this._keycloakInit(options)).catch(() => {\n                console.log('Login timed out');\n                this._onChanged();\n            });\n        } else {\n            await this._keycloakInit(options);\n        }\n\n    }\n\n    /**\n     * If this returns true you need to call login() at one point to finish the login process.\n     */\n    isLoggingIn() {\n        const href = window.location.href;\n        return (href.search('[&#]state=') >= 0 && href.search('[&#]session_state=') >= 0);\n    }\n\n    /**\n     * Logs the user in. Might lead to a site refresh or the user needing to authenticate.\n     *\n     * @param {object} options\n     * @param {string} [options.lang] - The locale to use on the keycloak login page\n     */\n    async login(options) {\n        await this._ensureInit();\n\n        options = options || {};\n        const language = options['lang'] || 'en';\n        const scope = options['scope'] || '';\n\n        if (!this._keycloak.authenticated) {\n            await this._keycloak.login({\n                kcLocale: language,  // Keycloak < 9.0\n                locale: language,\n                scope: scope,\n                idpHint: this._idpHint,\n            });\n        }\n    }\n\n    /**\n     * Logs the user in if it is possible without leaving the page or the user needing to authenticate again.\n     */\n    async tryLogin() {\n        await this._ensureInit();\n    }\n\n    /**\n     * Logs the user out locally, but not with keycloak. Login will instantly log the user back in without\n     * requiring a re-auth.\n     */\n    async localLogout() {\n        this._keycloak.clearToken();\n    }\n\n    /**\n     * Log the user out from keycloak.\n     */\n    async logout() {\n        await this._ensureInit();\n        this._keycloak.logout();\n    }\n}","export const LoginStatus = Object.freeze({\n    UNKNOWN: 'unknown',\n    LOGGING_IN: 'logging-in',\n    LOGGED_IN: 'logged-in',\n    LOGGING_OUT: 'logging-out',\n    LOGGED_OUT: 'logged-out',\n});\n","import {i18n} from './i18n.js';\nimport JSONLD from '@dbp-toolkit/common/jsonld';\nimport  {KeycloakWrapper} from './keycloak.js';\nimport {LoginStatus} from './util.js';\nimport {AdapterLitElement} from \"@dbp-toolkit/provider/src/adapter-lit-element\";\n\n\n/**\n * Keycloak auth web component\n * https://www.keycloak.org/docs/latest/securing_apps/index.html#_javascript_adapter\n *\n * Emits a dbp-set-property event for the attribute \"auth\":\n *   auth.subject: Keycloak username\n *   auth.login-status: Login status (see object LoginStatus)\n *   auth.token: Keycloak token to send with your requests\n *   auth.user-full-name: Full name of the user\n *   auth.person-id: Person identifier of the user\n *   auth.person: Person json object of the user (optional, enable by setting the `load-person` attribute)\n */\nexport class AuthKeycloak extends AdapterLitElement {\n    constructor() {\n        super();\n        this.lang = 'de';\n        this.forceLogin = false;\n        this.loadPerson = false;\n        this.token = \"\";\n        this.subject = \"\";\n        this.name = \"\";\n        this.personId = \"\";\n        this.tryLogin = false;\n        this.person = null;\n        this.entryPointUrl = '';\n        this._loginStatus = LoginStatus.UNKNOWN;\n        this.requestedLoginStatus = LoginStatus.UNKNOWN;\n\n        // Keycloak config\n        this.keycloakUrl = null;\n        this.realm = null;\n        this.clientId = null;\n        this.silentCheckSsoRedirectUri = null;\n        this.scope = null;\n        this.idpHint = '';\n\n        this._onKCChanged = this._onKCChanged.bind(this);\n    }\n\n    update(changedProperties) {\n        // console.log(\"changedProperties\", changedProperties);\n        changedProperties.forEach((oldValue, propName) => {\n            switch (propName) {\n                case 'lang':\n                    i18n.changeLanguage(this.lang);\n                break;\n                case 'requestedLoginStatus':\n                    console.log(\"requested-login-status changed\", this.requestedLoginStatus);\n                    switch(this.requestedLoginStatus) {\n                        case LoginStatus.LOGGED_IN:\n                            this._kcwrapper.login({lang: this.lang, scope: this.scope || ''});\n                        break;\n                        case LoginStatus.LOGGED_OUT:\n                            // Keycloak will redirect right away without emitting events, so we have\n                            // to do this manually here\n                            if (this._loginStatus === LoginStatus.LOGGED_IN) {\n                                this._setLoginStatus(LoginStatus.LOGGING_OUT);\n                            }\n                            this._kcwrapper.logout();\n                            // In case logout was aborted, for example with beforeunload,\n                            // revert back to being logged in\n                            if (this._loginStatus === LoginStatus.LOGGING_OUT) {\n                                this._setLoginStatus(LoginStatus.LOGGED_IN);\n                            }\n                        break;\n                    }\n                break;\n            }\n        });\n\n        super.update(changedProperties);\n    }\n\n    _onKCChanged(event) {\n        const kc = event.detail;\n        let newPerson = false;\n\n        if (kc.authenticated) {\n            let tokenChanged = (this.token !== kc.token);\n            this.name = kc.idTokenParsed.name;\n            this.token = kc.token;\n\n            this.subject = kc.subject;\n            const personId = kc.idTokenParsed.preferred_username;\n            if (personId !== this.personId) {\n                this.person = null;\n                newPerson = true;\n            }\n            this.personId = personId;\n\n            this.sendSetPropertyEvents();\n            this._setLoginStatus(LoginStatus.LOGGED_IN, tokenChanged || newPerson);\n        } else {\n            if (this._loginStatus === LoginStatus.LOGGED_IN) {\n                this._setLoginStatus(LoginStatus.LOGGING_OUT);\n            }\n            this.name = \"\";\n            this.token = \"\";\n            this.subject = \"\";\n            this.personId = \"\";\n            this.person = null;\n\n            this.sendSetPropertyEvents();\n            this._setLoginStatus(LoginStatus.LOGGED_OUT);\n        }\n\n        const that = this;\n\n        if (newPerson && this.loadPerson) {\n            JSONLD.initialize(this.entryPointUrl, (jsonld) => {\n                // find the correct api url for the current person\n                // we are fetching the logged-in person directly to respect the REST philosophy\n                // see: https://github.com/api-platform/api-platform/issues/337\n                const apiUrl = jsonld.getApiUrlForEntityName(\"Person\") + '/' + that.personId;\n\n                fetch(apiUrl, {\n                    headers: {\n                        'Content-Type': 'application/ld+json',\n                        'Authorization': 'Bearer ' + that.token,\n                    },\n                })\n                .then(response => response.json())\n                .then((person) => {\n                    that.person = person;\n                    this.sendSetPropertyEvents();\n                    this._setLoginStatus(this._loginStatus, true);\n                });\n            }, {}, that.lang);\n        }\n    }\n\n    sendSetPropertyEvents() {\n        const auth = {\n            'login-status': this._loginStatus,\n            'subject': this.subject,\n            'token': this.token,\n            'user-full-name': this.name,\n            'person-id': this.personId,\n            'person': this.person,\n        };\n\n        // inject a window.DBPAuth variable for cypress\n        if (window.Cypress) {\n            window.DBPAuth = auth;\n        }\n\n        this.sendSetPropertyEvent('auth', auth);\n        JSONLD.doInitializationOnce(this.entryPointUrl, this.token);\n\n        // this.sendSetPropertyEvent('auth-subject', this.subject);\n        // this.sendSetPropertyEvent('auth-token', this.token);\n        // this.sendSetPropertyEvent('user-full-name', this.name);\n        // this.sendSetPropertyEvent('person-id', this.personId);\n        // this.sendSetPropertyEvent('person', this.person);\n    }\n\n    _setLoginStatus(status, force) {\n        if (this._loginStatus === status && !force)\n            return;\n\n        this._loginStatus = status;\n        this.sendSetPropertyEvents();\n    }\n\n    static get properties() {\n        return {\n            ...super.properties,\n            lang: { type: String },\n            forceLogin: { type: Boolean, attribute: 'force-login' },\n            tryLogin: { type: Boolean, attribute: 'try-login' },\n            loadPerson: { type: Boolean, attribute: 'load-person' },\n            entryPointUrl: { type: String, attribute: 'entry-point-url' },\n            name: { type: String, attribute: false },\n            token: { type: String, attribute: false },\n            subject: { type: String, attribute: false },\n            personId: { type: String, attribute: false },\n            person: { type: Object, attribute: false },\n            _loginStatus: { type: String, attribute: false },\n            keycloakUrl: { type: String, attribute: 'url' },\n            realm: { type: String },\n            clientId: { type: String, attribute: 'client-id' },\n            silentCheckSsoRedirectUri: { type: String, attribute: 'silent-check-sso-redirect-uri' },\n            scope: { type: String },\n            idpHint: { type: String, attribute: 'idp-hint' },\n            requestedLoginStatus: { type: String, attribute: 'requested-login-status' },\n        };\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n\n        if (!this.keycloakUrl)\n            throw Error(\"url not set\");\n        if (!this.realm)\n            throw Error(\"realm not set\");\n        if (!this.clientId)\n            throw Error(\"client-id not set\");\n\n        this._kcwrapper = new KeycloakWrapper(this.keycloakUrl, this.realm, this.clientId, this.silentCheckSsoRedirectUri, this.idpHint);\n        this._kcwrapper.addEventListener('changed', this._onKCChanged);\n\n        const handleLogin = async () => {\n            if (this.forceLogin || this._kcwrapper.isLoggingIn()) {\n                this._setLoginStatus(LoginStatus.LOGGING_IN);\n                await this._kcwrapper.login({lang: this.lang, scope: this.scope || ''});\n            } else if (this.tryLogin) {\n                this._setLoginStatus(LoginStatus.LOGGING_IN);\n                await this._kcwrapper.tryLogin();\n                if (this._loginStatus === LoginStatus.LOGGING_IN)\n                    this._setLoginStatus(LoginStatus.LOGGED_OUT);\n            } else {\n                this._setLoginStatus(LoginStatus.LOGGED_OUT);\n            }\n        };\n\n        handleLogin();\n    }\n\n    disconnectedCallback() {\n        this._kcwrapper.close();\n        this._kcwrapper.removeEventListener('changed', this._onKCChanged);\n\n        super.disconnectedCallback();\n    }\n}","import {i18n} from './i18n.js';\nimport {html, css} from 'lit-element';\nimport {unsafeHTML} from 'lit-html/directives/unsafe-html.js';\nimport {ScopedElementsMixin} from '@open-wc/scoped-elements';\nimport * as commonStyles from '@dbp-toolkit/common/styles';\nimport {LoginStatus} from './util.js';\nimport {AdapterLitElement} from \"../../provider/src/adapter-lit-element\";\n\nlet logoutSVG = `\n<svg\n   viewBox=\"0 0 100 100\"\n   y=\"0px\"\n   x=\"0px\"\n   id=\"icon\"\n   role=\"img\"\n   version=\"1.1\">\n<g\n   id=\"g6\">\n  <path\n     d=\"m 20.749313,38.894934 -5.885859,6.967885 h 43.408213 c 1.839331,0 3.433418,1.741972 3.433418,4.064599 0,2.322628 -1.471465,4.064599 -3.433418,4.064599 H 14.863454 l 5.885859,6.967883 c 1.348843,1.596808 1.348843,4.064599 0,5.661406 -1.348843,1.596808 -3.433418,1.596808 -4.782261,0 L 1.9881356,49.927418 15.967052,33.378693 c 1.348843,-1.596806 3.433418,-1.596806 4.782261,0 1.348843,1.596807 1.348843,4.064599 0,5.516241 z\"\n     id=\"path2\"\n     style=\"stroke-width:1.33417916\"\n     inkscape:connector-curvature=\"0\" />\n  <path\n     style=\"stroke-width:0.67017764\"\n     d=\"M 61.663665,16.308792 C 48.158763,16.560171 35.913199,25.828579 30.896087,38.197464 34.816744,37.806184 40.033349,39.91491 41.470306,35.017776 50.594944,21.215302 72.517616,20.362655 82.800384,33.07637 93.497261,44.618596 90.228387,65.093356 76.499603,72.791214 64.104901,80.786232 45.895432,75.593227 39.470306,62.310745 35.613955,62.60637 27.974792,60.593775 32.925384,66.267776 41.232037,82.878292 64.023613,89.46919 79.876556,79.765823 96.140149,70.989504 102.10102,48.145494 91.970306,32.629104 85.705979,22.257901 73.793809,15.772382 61.663665,16.308792 Z\"\n     id=\"path4\"\n     inkscape:connector-curvature=\"0\" />\n</g>\n</svg>\n`;\n\nlet loginSVG = `\n<svg\n   viewBox=\"0 0 100 100\"\n   y=\"0px\"\n   x=\"0px\"\n   id=\"icon\"\n   role=\"img\"\n   version=\"1.1\">\n<g\n   id=\"g6\">\n    <path\n   style=\"stroke-width:1.33417916\"\n   id=\"path2\"\n   d=\"m 42.943908,38.894934 5.885859,6.967885 H 5.4215537 c -1.8393311,0 -3.4334181,1.741972 -3.4334181,4.064599 0,2.322628 1.4714649,4.064599 3.4334181,4.064599 H 48.829767 L 42.943908,60.9599 c -1.348843,1.596808 -1.348843,4.064599 0,5.661406 1.348843,1.596808 3.433418,1.596808 4.782261,0 L 61.705085,49.927418 47.726169,33.378693 c -1.348843,-1.596806 -3.433418,-1.596806 -4.782261,0 -1.348843,1.596807 -1.348843,4.064599 0,5.516241 z\" />\n    <path\n   id=\"path4\"\n   d=\"m 50,2.3007812 c -18.777325,0 -35.049449,10.9124408 -42.8261719,26.7246098 H 13.390625 C 20.672112,16.348362 34.336876,7.8007812 50,7.8007812 73.3,7.8007812 92.300781,26.7 92.300781,50 92.300781,73.3 73.3,92.300781 50,92.300781 c -15.673389,0 -29.345175,-8.60579 -36.623047,-21.326172 H 7.1640625 C 14.942553,86.8272 31.242598,97.800781 50.099609,97.800781 76.399609,97.800781 97.900391,76.4 97.900391,50 97.800391,23.7 76.3,2.3007812 50,2.3007812 Z\" />\n</g>\n</svg>\n`;\n\nlet loggingInSVG = `\n<svg\n   viewBox=\"0 0 100 100\"\n   y=\"0px\"\n   x=\"0px\"\n   id=\"icon\"\n   role=\"img\"\n   version=\"1.1\">\n</svg>\n`;\n\nexport class LoginButton extends ScopedElementsMixin(AdapterLitElement) {\n\n    constructor() {\n        super();\n        this.lang = 'de';\n        this.auth = {};\n    }\n\n    static get scopedElements() {\n        return {\n        };\n    }\n\n    static get properties() {\n        return {\n            lang: { type: String },\n            auth: { type: Object },\n        };\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n    }\n\n    disconnectedCallback() {\n        super.disconnectedCallback();\n    }\n\n    _onLoginClicked(e) {\n        this.sendSetPropertyEvent('requested-login-status', LoginStatus.LOGGED_IN);\n        e.preventDefault();\n    }\n\n    _onLogoutClicked(e) {\n        this.sendSetPropertyEvent('requested-login-status', LoginStatus.LOGGED_OUT);\n        e.preventDefault();\n    }\n\n    update(changedProperties) {\n        changedProperties.forEach((oldValue, propName) => {\n            if (propName === \"lang\") {\n                i18n.changeLanguage(this.lang);\n            }\n        });\n\n        super.update(changedProperties);\n    }\n\n    static get styles() {\n        // language=css\n        return [\n            commonStyles.getThemeCSS(),\n            css`\n            :host {\n                display: inline-block;\n            }\n\n            a {\n                color: currentColor;\n                cursor: pointer;\n                text-decoration: none;\n            }\n\n            .login-box {\n                display: flex;\n                align-items: center;\n                padding: 0.3em 0.4em;\n                transition: background-color 0.15s, color 0.15s;\n            }\n\n            .login-box svg {\n                width: 1.1em;\n                height: 1.1em;\n                display: flex;\n            }\n\n            .login-box:hover svg path {\n                fill: var(--dbp-light);\n            }\n\n            .login-box:hover {\n                background-color: var(--dbp-dark);\n                color: var(--dbp-light);\n                cursor: pointer;\n                transition: none;\n            }\n\n            .login-box .label {\n                padding-left: 0.2em;\n            }\n            `\n        ];\n    }\n\n    render() {\n        if (this.auth['login-status'] === LoginStatus.LOGGING_IN) {\n            // try to keep the layout the same to avoid layout shifts\n            return html`\n                <a href=\"#\">\n                    <div class=\"login-box login-button\">\n                        <div class=\"icon\">${unsafeHTML(loggingInSVG)}</div>\n                        <div class=\"label\">&#8203;</div>\n                    </div>\n                </a>\n            `;\n        } else if (this.auth['login-status'] === LoginStatus.LOGGED_IN) {\n            return html`\n                <a href=\"#\" @click=\"${this._onLogoutClicked}\">\n                    <div class=\"login-box login-button\">\n                        <div class=\"icon\">${unsafeHTML(logoutSVG)}</div>\n                        <div class=\"label\">${i18n.t('logout')}</div>\n                    </div>\n                </a>\n            `;\n        } else {\n            return html`\n                <a href=\"#\" @click=\"${this._onLoginClicked}\">\n                    <div class=\"login-box login-button\">\n                        <div class=\"icon\">${unsafeHTML(loginSVG)}</div>\n                        <div class=\"label\">${i18n.t('login')}</div>\n                    </div>\n                </a>\n            `;\n        }\n    }\n}","import {createI18nInstance} from './i18n.js';\nimport {html, css} from 'lit-element';\nimport {unsafeHTML} from 'lit-html/directives/unsafe-html.js';\nimport {ScopedElementsMixin} from '@open-wc/scoped-elements';\nimport * as commonStyles from '@dbp-toolkit/common/styles';\nimport {Icon} from '@dbp-toolkit/common';\nimport {AdapterLitElement} from \"@dbp-toolkit/provider/src/adapter-lit-element\";\nimport {LoginStatus} from \"@dbp-toolkit/auth/src/util\";\n\n\nconst i18n = createI18nInstance();\n\nexport class AuthMenuButton extends ScopedElementsMixin(AdapterLitElement) {\n\n    constructor() {\n        super();\n        this.lang = 'de';\n        this.showImage = false;\n        this.auth = {};\n\n        this.closeDropdown = this.closeDropdown.bind(this);\n        this.onWindowResize = this.onWindowResize.bind(this);\n    }\n\n    static get scopedElements() {\n        return {\n            'dbp-icon': Icon,\n        };\n    }\n\n    static get properties() {\n        return {\n            ...super.properties,\n            lang: { type: String },\n            showImage: { type: Boolean, attribute: 'show-image' },\n            auth: { type: Object },\n        };\n    }\n\n    onWindowResize() {\n        this.updateDropdownWidth();\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n\n        window.addEventListener('resize', this.onWindowResize);\n        document.addEventListener('click', this.closeDropdown);\n    }\n\n    disconnectedCallback() {\n        window.removeEventListener('resize', this.onWindowResize);\n        document.removeEventListener('click', this.closeDropdown);\n        super.disconnectedCallback();\n    }\n\n    /**\n     * Set the dropdown width to almost the width of the web component\n     * We need to set the width manually because a percent width is in relation to the viewport\n     */\n    updateDropdownWidth() {\n        const dropdown = this.shadowRoot.querySelector(\"div.dropdown-menu\");\n\n        if (!dropdown) {\n            return;\n        }\n\n        let viewportOffset = this.getBoundingClientRect();\n        let spaceToRIght = window.innerWidth - viewportOffset.left;\n        dropdown.setAttribute(\"style\", `width: ${spaceToRIght - 20}px`);\n    }\n\n    onLoginClicked(e) {\n        this.sendSetPropertyEvent('requested-login-status', LoginStatus.LOGGED_IN);\n        e.preventDefault();\n    }\n\n    onLogoutClicked(e) {\n        this.sendSetPropertyEvent('requested-login-status', LoginStatus.LOGGED_OUT);\n    }\n\n    update(changedProperties) {\n        changedProperties.forEach((oldValue, propName) => {\n            if (propName === \"lang\") {\n                i18n.changeLanguage(this.lang);\n            }\n        });\n\n        super.update(changedProperties);\n    }\n\n    static get styles() {\n        // language=css\n        return css`\n            ${commonStyles.getThemeCSS()}\n\n            :host {\n                display: inline-block;\n            }\n\n            a {\n                color: currentColor;\n                cursor: pointer;\n                text-decoration: none;\n            }\n\n            img {\n                border-width: var(--dbp-border-width);\n                border-color: var(--dbp-dark);\n                border-style: solid;\n            }\n\n            .dropdown.is-active .dropdown-menu, .dropdown.is-hoverable:hover .dropdown-menu {\n                display: block;\n            }\n\n            .dropdown-menu {\n                display: none;\n                min-width: 5em;\n                max-width: 25em;\n                position: absolute;\n                z-index: 20;\n                border: solid 1px black;\n                border-radius: var(--dbp-border-radius);\n                overflow: hidden;\n                background-color: white;\n            }\n\n            .dropdown-content {\n                background-color: white;\n                padding-bottom: 0.5rem;\n                padding-top: 0.5rem;\n            }\n\n            .dropdown-content img {\n                max-width: 120px;\n            }\n\n            .menu a {\n                /*padding: 0.3em;*/\n                font-weight: 400;\n                color: #000;\n                display: block;\n                text-decoration: none;\n            }\n\n            .menu a:hover {\n                color: #E4154B;\n            }\n\n            .menu a.selected { color: white; background-color: black; }\n\n            .dropdown-item {\n                color: #4a4a4a;\n                display: block;\n                font-size: 0.875rem;\n                line-height: 1.5;\n                padding: 0.375rem 1rem;\n                position: relative;\n            }\n\n              .dropdown, img.login {\n                cursor: pointer;\n            }\n\n            a.dropdown-item {\n                width: initial !important;\n            }\n\n            .main-button {\n                min-width: 150px;\n            }\n\n            .menu-icon {\n                height: 1em;\n                width: 1em;\n                vertical-align: -0.1rem;\n            }\n\n            .login-box svg {\n                width: 1.1em;\n                height: 1.1em;\n                display: flex;\n            }\n\n            .login-button {\n                padding: 0.3em 0.4em;\n                transition: background-color 0.15s, color 0.15s;\n            }\n\n            .login-button:hover {\n                background-color: var(--dbp-dark);\n                color: var(--dbp-light);\n                cursor: pointer;\n                transition: none;\n            }\n\n            .login-box {\n                display: flex;\n                align-items: center;\n            }\n\n            .login-box:hover svg path {\n                fill: var(--dbp-light);\n            }\n\n            .login-box .label {\n                padding-left: 0.2em;\n            }\n\n            .dropdown-trigger {\n                display: flex;\n                align-items: center;\n            }\n\n            .dropdown-trigger .name {\n                white-space: nowrap;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                min-width: 0;\n                margin-right: 0.5em\n            }\n        `;\n    }\n\n    setChevron(name) {\n        const chevron = this.shadowRoot.querySelector(\"#menu-chevron-icon\");\n        if (chevron !== null) {\n            chevron.name = name;\n        }\n    }\n\n    onDropdownClick(event) {\n        event.stopPropagation();\n        event.currentTarget.classList.toggle('is-active');\n        this.setChevron(event.currentTarget.classList.contains('is-active') ? 'chevron-up' : 'chevron-down');\n        this.updateDropdownWidth();\n    }\n\n    closeDropdown() {\n        var dropdowns = this.shadowRoot.querySelectorAll('.dropdown');\n        dropdowns.forEach(function (el) {\n            el.classList.remove('is-active');\n        });\n        this.setChevron('chevron-down');\n    }\n\n    renderLoggedIn() {\n        const person = this.auth.person;\n        const imageURL = (this.showImage && person && person.image) ? person.image : null;\n\n        return html`\n            <div class=\"dropdown\" @click=\"${this.onDropdownClick}\">\n                <a href=\"#\">\n                    <div class=\"dropdown-trigger login-button\">\n                        <div class=\"name\">${this.auth['user-full-name']}</div>\n                        <dbp-icon class=\"menu-icon\" name=\"chevron-down\" id=\"menu-chevron-icon\"></dbp-icon>\n                    </div>\n                </a>\n                <div class=\"dropdown-menu\" id=\"dropdown-menu2\" role=\"menu\">\n                    <div class=\"dropdown-content\" @blur=\"${this.closeDropdown}\">\n                        ${imageURL ? html`<div class=\"dropdown-item\"><img alt=\"\" src=\"${imageURL}\"></div>` : ''}\n                        <div class=\"menu\">\n                            <a href=\"#\" @click=\"${this.onLogoutClicked}\" class=\"dropdown-item\">${i18n.t('logout')}</a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;\n    }\n\n    renderLoggedOut() {\n        let loginSVG = `\n        <svg\n           viewBox=\"0 0 100 100\"\n           y=\"0px\"\n           x=\"0px\"\n           id=\"icon\"\n           role=\"img\"\n           version=\"1.1\">\n        <g\n           id=\"g6\">\n            <path\n           style=\"stroke-width:1.33417916\"\n           id=\"path2\"\n           d=\"m 42.943908,38.894934 5.885859,6.967885 H 5.4215537 c -1.8393311,0 -3.4334181,1.741972 -3.4334181,4.064599 0,2.322628 1.4714649,4.064599 3.4334181,4.064599 H 48.829767 L 42.943908,60.9599 c -1.348843,1.596808 -1.348843,4.064599 0,5.661406 1.348843,1.596808 3.433418,1.596808 4.782261,0 L 61.705085,49.927418 47.726169,33.378693 c -1.348843,-1.596806 -3.433418,-1.596806 -4.782261,0 -1.348843,1.596807 -1.348843,4.064599 0,5.516241 z\" />\n            <path\n           id=\"path4\"\n           d=\"m 50,2.3007812 c -18.777325,0 -35.049449,10.9124408 -42.8261719,26.7246098 H 13.390625 C 20.672112,16.348362 34.336876,7.8007812 50,7.8007812 73.3,7.8007812 92.300781,26.7 92.300781,50 92.300781,73.3 73.3,92.300781 50,92.300781 c -15.673389,0 -29.345175,-8.60579 -36.623047,-21.326172 H 7.1640625 C 14.942553,86.8272 31.242598,97.800781 50.099609,97.800781 76.399609,97.800781 97.900391,76.4 97.900391,50 97.800391,23.7 76.3,2.3007812 50,2.3007812 Z\" />\n        </g>\n        </svg>\n        `;\n\n        return html`\n            <a href=\"#\" @click=\"${this.onLoginClicked}\">\n                <div class=\"login-box login-button\">\n                    <div class=\"icon\">${unsafeHTML(loginSVG)}</div>\n                    <div class=\"label\">${i18n.t('login')}</div>\n                </div>\n            </a>\n        `;\n    }\n\n    render() {\n        const loggedIn = (this.auth['login-status'] === 'logged-in');\n        return html`\n            <div class=\"authbox\">\n                ${loggedIn ? this.renderLoggedIn() : this.renderLoggedOut()}\n            </div>\n        `;\n    }\n}","import {createInstance} from '@dbp-toolkit/common/i18next.js';\n\nimport de from './i18n/de/translation.json';\nimport en from './i18n/en/translation.json';\n\nexport const i18n = createInstance({en: en, de: de}, 'de', 'en');","import {i18n} from './i18n';\nimport {createUUID} from './utils';\nimport {css, html} from 'lit-element';\nimport DBPLitElement from '@dbp-toolkit/common/dbp-lit-element';\nimport * as commonStyles from '@dbp-toolkit/common/styles';\n\n/**\n * Notification web component\n */\nexport class Notification extends DBPLitElement {\n    constructor() {\n        super();\n        this.lang = 'de';\n    }\n\n    /**\n     * See: https://lit-element.polymer-project.org/guide/properties#initialize\n     */\n    static get properties() {\n        return {\n            ...super.properties,\n            lang: { type: String },\n        };\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n        i18n.changeLanguage(this.lang);\n        const that = this;\n\n        window.addEventListener(\"dbp-notification-send\", (e) => {\n            if (typeof e.detail === 'undefined') {\n                return;\n            }\n\n            that.notificationBlock = that._(\"#notification\");\n            const notificationId = `notification-${createUUID()}`;\n\n            const type = typeof e.detail.type !== 'undefined' ? e.detail.type : \"info\";\n            const body = typeof e.detail.body !== 'undefined' ? e.detail.body : \"\";\n            const summary = typeof e.detail.summary !== 'undefined' ? e.detail.summary : \"\";\n            const timeout = typeof e.detail.timeout !== 'undefined' ? e.detail.timeout : 0;\n            const icon = typeof e.detail.icon !== 'undefined' ? e.detail.icon : '';\n            const iconHTML = icon !== '' ? `<dbp-icon name=\"${icon}\"></dbp-icon>` : \"\";\n            const summaryHTML = summary !== \"\" ? `<h3>${summary}</h3>` : \"\";\n\n            that.notificationBlock.innerHTML = `\n                <div id=\"${notificationId}\" class=\"notification is-${type}\">\n                    <button id=\"${notificationId}-button\" onclick=\"parentNode.parentNode.removeChild(parentNode)\" class=\"delete\"></button>\n                    ${summaryHTML}\n                    ${iconHTML} ${body}\n                </div>\n            ` + that.notificationBlock.innerHTML;\n\n            const messageId = `#${notificationId}`;\n\n            if (timeout > 0) {\n                setTimeout(() => {\n                    that.removeMessageId(messageId);\n                }, timeout * 1000);\n            }\n\n            // mark the event as handled\n            e.preventDefault();\n        });\n\n        this.updateComplete.then(()=>{\n        });\n    }\n\n    removeMessageId(messageElementId) {\n        const element = this._(messageElementId);\n\n        if (element) {\n            this.notificationBlock.removeChild(element);\n        }\n    }\n\n    static get styles() {\n        // language=css\n        return css`\n            ${commonStyles.getThemeCSS()}\n            ${commonStyles.getGeneralCSS()}\n            ${commonStyles.getNotificationCSS()}\n\n            .notification:not(:last-child) {\n                margin-bottom: 1.5rem;\n            }\n\n            .notification h3 {\n                font-weight: bold;\n                margin-bottom: 3px;\n            }\n\n            .delete, .modal-close {\n                -moz-appearance: none;\n                -webkit-appearance: none;\n                background-color: rgba(10,10,10,.2);\n                border: none;\n                border-radius: 290486px;\n                cursor: pointer;\n                pointer-events: auto;\n                display: inline-block;\n                flex-grow: 0;\n                flex-shrink: 0;\n                font-size: 0;\n                height: 20px;\n                max-height: 20px;\n                max-width: 20px;\n                min-height: 20px;\n                min-width: 20px;\n                outline: 0;\n                position: relative;\n                vertical-align: top;\n                width: 20px;\n            }\n\n            .delete::before, .modal-close::before, .delete::after, .modal-close::after {\n                background-color: white;\n                content: \"\";\n                display: block;\n                left: 50%;\n                position: absolute;\n                top: 50%;\n                -webkit-transform: translateX(-50%) translateY(-50%) rotate(45deg);\n                        transform: translateX(-50%) translateY(-50%) rotate(45deg);\n                -webkit-transform-origin: center center;\n                        transform-origin: center center;\n            }\n\n            .delete::before, .modal-close::before {\n                height: 2px;\n                width: 50%;\n            }\n\n            .delete::after, .modal-close::after {\n                height: 50%;\n                width: 2px;\n            }\n\n            .delete:hover, .modal-close:hover, .delete:focus, .modal-close:focus {\n                background-color: rgba(10, 10, 10, 0.3);\n            }\n\n            .delete:active, .modal-close:active {\n                background-color: rgba(10, 10, 10, 0.4);\n            }\n\n            #notification {\n                position: fixed; top: 0; max-width: 500px; margin: 0.75em auto; left: 0; right: 0; z-index: 1000; padding: 0;\n            }\n\n            .notification h3 {\n                margin: 0 0 3px 0;\n                font: inherit;\n                font-weight: bold; \n            }\n        `;\n    }\n\n    render() {\n        return html`\n            <div class=\"columns\">\n                <div class=\"column\" id=\"notification\">\n                </div>\n            </div>\n        `;\n    }\n}","export const createUUID = () => {\n    let dt = new Date().getTime();\n    const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n        const r = (dt + Math.random()*16)%16 | 0;\n        dt = Math.floor(dt/16);\n        return (c==='x' ? r :(r&0x3|0x8)).toString(16);\n    });\n\n    return uuid;\n};\n\n","/**\n * Tokenize input string.\n */\nfunction lexer(str) {\n    var tokens = [];\n    var i = 0;\n    while (i < str.length) {\n        var char = str[i];\n        if (char === \"*\" || char === \"+\" || char === \"?\") {\n            tokens.push({ type: \"MODIFIER\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \"\\\\\") {\n            tokens.push({ type: \"ESCAPED_CHAR\", index: i++, value: str[i++] });\n            continue;\n        }\n        if (char === \"{\") {\n            tokens.push({ type: \"OPEN\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \"}\") {\n            tokens.push({ type: \"CLOSE\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \":\") {\n            var name = \"\";\n            var j = i + 1;\n            while (j < str.length) {\n                var code = str.charCodeAt(j);\n                if (\n                // `0-9`\n                (code >= 48 && code <= 57) ||\n                    // `A-Z`\n                    (code >= 65 && code <= 90) ||\n                    // `a-z`\n                    (code >= 97 && code <= 122) ||\n                    // `_`\n                    code === 95) {\n                    name += str[j++];\n                    continue;\n                }\n                break;\n            }\n            if (!name)\n                throw new TypeError(\"Missing parameter name at \" + i);\n            tokens.push({ type: \"NAME\", index: i, value: name });\n            i = j;\n            continue;\n        }\n        if (char === \"(\") {\n            var count = 1;\n            var pattern = \"\";\n            var j = i + 1;\n            if (str[j] === \"?\") {\n                throw new TypeError(\"Pattern cannot start with \\\"?\\\" at \" + j);\n            }\n            while (j < str.length) {\n                if (str[j] === \"\\\\\") {\n                    pattern += str[j++] + str[j++];\n                    continue;\n                }\n                if (str[j] === \")\") {\n                    count--;\n                    if (count === 0) {\n                        j++;\n                        break;\n                    }\n                }\n                else if (str[j] === \"(\") {\n                    count++;\n                    if (str[j + 1] !== \"?\") {\n                        throw new TypeError(\"Capturing groups are not allowed at \" + j);\n                    }\n                }\n                pattern += str[j++];\n            }\n            if (count)\n                throw new TypeError(\"Unbalanced pattern at \" + i);\n            if (!pattern)\n                throw new TypeError(\"Missing pattern at \" + i);\n            tokens.push({ type: \"PATTERN\", index: i, value: pattern });\n            i = j;\n            continue;\n        }\n        tokens.push({ type: \"CHAR\", index: i, value: str[i++] });\n    }\n    tokens.push({ type: \"END\", index: i, value: \"\" });\n    return tokens;\n}\n/**\n * Parse a string for the raw tokens.\n */\nexport function parse(str, options) {\n    if (options === void 0) { options = {}; }\n    var tokens = lexer(str);\n    var _a = options.prefixes, prefixes = _a === void 0 ? \"./\" : _a;\n    var defaultPattern = \"[^\" + escapeString(options.delimiter || \"/#?\") + \"]+?\";\n    var result = [];\n    var key = 0;\n    var i = 0;\n    var path = \"\";\n    var tryConsume = function (type) {\n        if (i < tokens.length && tokens[i].type === type)\n            return tokens[i++].value;\n    };\n    var mustConsume = function (type) {\n        var value = tryConsume(type);\n        if (value !== undefined)\n            return value;\n        var _a = tokens[i], nextType = _a.type, index = _a.index;\n        throw new TypeError(\"Unexpected \" + nextType + \" at \" + index + \", expected \" + type);\n    };\n    var consumeText = function () {\n        var result = \"\";\n        var value;\n        // tslint:disable-next-line\n        while ((value = tryConsume(\"CHAR\") || tryConsume(\"ESCAPED_CHAR\"))) {\n            result += value;\n        }\n        return result;\n    };\n    while (i < tokens.length) {\n        var char = tryConsume(\"CHAR\");\n        var name = tryConsume(\"NAME\");\n        var pattern = tryConsume(\"PATTERN\");\n        if (name || pattern) {\n            var prefix = char || \"\";\n            if (prefixes.indexOf(prefix) === -1) {\n                path += prefix;\n                prefix = \"\";\n            }\n            if (path) {\n                result.push(path);\n                path = \"\";\n            }\n            result.push({\n                name: name || key++,\n                prefix: prefix,\n                suffix: \"\",\n                pattern: pattern || defaultPattern,\n                modifier: tryConsume(\"MODIFIER\") || \"\"\n            });\n            continue;\n        }\n        var value = char || tryConsume(\"ESCAPED_CHAR\");\n        if (value) {\n            path += value;\n            continue;\n        }\n        if (path) {\n            result.push(path);\n            path = \"\";\n        }\n        var open = tryConsume(\"OPEN\");\n        if (open) {\n            var prefix = consumeText();\n            var name_1 = tryConsume(\"NAME\") || \"\";\n            var pattern_1 = tryConsume(\"PATTERN\") || \"\";\n            var suffix = consumeText();\n            mustConsume(\"CLOSE\");\n            result.push({\n                name: name_1 || (pattern_1 ? key++ : \"\"),\n                pattern: name_1 && !pattern_1 ? defaultPattern : pattern_1,\n                prefix: prefix,\n                suffix: suffix,\n                modifier: tryConsume(\"MODIFIER\") || \"\"\n            });\n            continue;\n        }\n        mustConsume(\"END\");\n    }\n    return result;\n}\n/**\n * Compile a string to a template function for the path.\n */\nexport function compile(str, options) {\n    return tokensToFunction(parse(str, options), options);\n}\n/**\n * Expose a method for transforming tokens into the path function.\n */\nexport function tokensToFunction(tokens, options) {\n    if (options === void 0) { options = {}; }\n    var reFlags = flags(options);\n    var _a = options.encode, encode = _a === void 0 ? function (x) { return x; } : _a, _b = options.validate, validate = _b === void 0 ? true : _b;\n    // Compile all the tokens into regexps.\n    var matches = tokens.map(function (token) {\n        if (typeof token === \"object\") {\n            return new RegExp(\"^(?:\" + token.pattern + \")$\", reFlags);\n        }\n    });\n    return function (data) {\n        var path = \"\";\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            if (typeof token === \"string\") {\n                path += token;\n                continue;\n            }\n            var value = data ? data[token.name] : undefined;\n            var optional = token.modifier === \"?\" || token.modifier === \"*\";\n            var repeat = token.modifier === \"*\" || token.modifier === \"+\";\n            if (Array.isArray(value)) {\n                if (!repeat) {\n                    throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to not repeat, but got an array\");\n                }\n                if (value.length === 0) {\n                    if (optional)\n                        continue;\n                    throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to not be empty\");\n                }\n                for (var j = 0; j < value.length; j++) {\n                    var segment = encode(value[j], token);\n                    if (validate && !matches[i].test(segment)) {\n                        throw new TypeError(\"Expected all \\\"\" + token.name + \"\\\" to match \\\"\" + token.pattern + \"\\\", but got \\\"\" + segment + \"\\\"\");\n                    }\n                    path += token.prefix + segment + token.suffix;\n                }\n                continue;\n            }\n            if (typeof value === \"string\" || typeof value === \"number\") {\n                var segment = encode(String(value), token);\n                if (validate && !matches[i].test(segment)) {\n                    throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to match \\\"\" + token.pattern + \"\\\", but got \\\"\" + segment + \"\\\"\");\n                }\n                path += token.prefix + segment + token.suffix;\n                continue;\n            }\n            if (optional)\n                continue;\n            var typeOfMessage = repeat ? \"an array\" : \"a string\";\n            throw new TypeError(\"Expected \\\"\" + token.name + \"\\\" to be \" + typeOfMessage);\n        }\n        return path;\n    };\n}\n/**\n * Create path match function from `path-to-regexp` spec.\n */\nexport function match(str, options) {\n    var keys = [];\n    var re = pathToRegexp(str, keys, options);\n    return regexpToFunction(re, keys, options);\n}\n/**\n * Create a path match function from `path-to-regexp` output.\n */\nexport function regexpToFunction(re, keys, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.decode, decode = _a === void 0 ? function (x) { return x; } : _a;\n    return function (pathname) {\n        var m = re.exec(pathname);\n        if (!m)\n            return false;\n        var path = m[0], index = m.index;\n        var params = Object.create(null);\n        var _loop_1 = function (i) {\n            // tslint:disable-next-line\n            if (m[i] === undefined)\n                return \"continue\";\n            var key = keys[i - 1];\n            if (key.modifier === \"*\" || key.modifier === \"+\") {\n                params[key.name] = m[i].split(key.prefix + key.suffix).map(function (value) {\n                    return decode(value, key);\n                });\n            }\n            else {\n                params[key.name] = decode(m[i], key);\n            }\n        };\n        for (var i = 1; i < m.length; i++) {\n            _loop_1(i);\n        }\n        return { path: path, index: index, params: params };\n    };\n}\n/**\n * Escape a regular expression string.\n */\nfunction escapeString(str) {\n    return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n}\n/**\n * Get the flags for a regexp from the options.\n */\nfunction flags(options) {\n    return options && options.sensitive ? \"\" : \"i\";\n}\n/**\n * Pull out keys from a regexp.\n */\nfunction regexpToRegexp(path, keys) {\n    if (!keys)\n        return path;\n    var groupsRegex = /\\((?:\\?<(.*?)>)?(?!\\?)/g;\n    var index = 0;\n    var execResult = groupsRegex.exec(path.source);\n    while (execResult) {\n        keys.push({\n            // Use parenthesized substring match if available, index otherwise\n            name: execResult[1] || index++,\n            prefix: \"\",\n            suffix: \"\",\n            modifier: \"\",\n            pattern: \"\"\n        });\n        execResult = groupsRegex.exec(path.source);\n    }\n    return path;\n}\n/**\n * Transform an array into a regexp.\n */\nfunction arrayToRegexp(paths, keys, options) {\n    var parts = paths.map(function (path) { return pathToRegexp(path, keys, options).source; });\n    return new RegExp(\"(?:\" + parts.join(\"|\") + \")\", flags(options));\n}\n/**\n * Create a path regexp from string input.\n */\nfunction stringToRegexp(path, keys, options) {\n    return tokensToRegexp(parse(path, options), keys, options);\n}\n/**\n * Expose a function for taking tokens and returning a RegExp.\n */\nexport function tokensToRegexp(tokens, keys, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.strict, strict = _a === void 0 ? false : _a, _b = options.start, start = _b === void 0 ? true : _b, _c = options.end, end = _c === void 0 ? true : _c, _d = options.encode, encode = _d === void 0 ? function (x) { return x; } : _d;\n    var endsWith = \"[\" + escapeString(options.endsWith || \"\") + \"]|$\";\n    var delimiter = \"[\" + escapeString(options.delimiter || \"/#?\") + \"]\";\n    var route = start ? \"^\" : \"\";\n    // Iterate over the tokens and create our regexp string.\n    for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\n        var token = tokens_1[_i];\n        if (typeof token === \"string\") {\n            route += escapeString(encode(token));\n        }\n        else {\n            var prefix = escapeString(encode(token.prefix));\n            var suffix = escapeString(encode(token.suffix));\n            if (token.pattern) {\n                if (keys)\n                    keys.push(token);\n                if (prefix || suffix) {\n                    if (token.modifier === \"+\" || token.modifier === \"*\") {\n                        var mod = token.modifier === \"*\" ? \"?\" : \"\";\n                        route += \"(?:\" + prefix + \"((?:\" + token.pattern + \")(?:\" + suffix + prefix + \"(?:\" + token.pattern + \"))*)\" + suffix + \")\" + mod;\n                    }\n                    else {\n                        route += \"(?:\" + prefix + \"(\" + token.pattern + \")\" + suffix + \")\" + token.modifier;\n                    }\n                }\n                else {\n                    route += \"(\" + token.pattern + \")\" + token.modifier;\n                }\n            }\n            else {\n                route += \"(?:\" + prefix + suffix + \")\" + token.modifier;\n            }\n        }\n    }\n    if (end) {\n        if (!strict)\n            route += delimiter + \"?\";\n        route += !options.endsWith ? \"$\" : \"(?=\" + endsWith + \")\";\n    }\n    else {\n        var endToken = tokens[tokens.length - 1];\n        var isEndDelimited = typeof endToken === \"string\"\n            ? delimiter.indexOf(endToken[endToken.length - 1]) > -1\n            : // tslint:disable-next-line\n                endToken === undefined;\n        if (!strict) {\n            route += \"(?:\" + delimiter + \"(?=\" + endsWith + \"))?\";\n        }\n        if (!isEndDelimited) {\n            route += \"(?=\" + delimiter + \"|\" + endsWith + \")\";\n        }\n    }\n    return new RegExp(route, flags(options));\n}\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n */\nexport function pathToRegexp(path, keys, options) {\n    if (path instanceof RegExp)\n        return regexpToRegexp(path, keys);\n    if (Array.isArray(path))\n        return arrayToRegexp(path, keys, options);\n    return stringToRegexp(path, keys, options);\n}\n//# sourceMappingURL=index.js.map","/*! Universal Router | MIT License | https://www.kriasoft.com/universal-router/ */\n\nimport { match } from 'path-to-regexp';\n\nfunction decode(val) {\n  try {\n    return decodeURIComponent(val);\n  } catch (err) {\n    return val;\n  }\n}\n\nfunction matchRoute(route, baseUrl, options, pathname, parentParams) {\n  var matchResult;\n  var childMatches;\n  var childIndex = 0;\n  return {\n    next: function next(routeToSkip) {\n      if (route === routeToSkip) {\n        return {\n          done: true,\n          value: false\n        };\n      }\n\n      if (!matchResult) {\n        var rt = route;\n        var end = !rt.children;\n\n        if (!rt.match) {\n          rt.match = match(rt.path || '', Object.assign({\n            end: end\n          }, options));\n        }\n\n        matchResult = rt.match(pathname);\n\n        if (matchResult) {\n          var _matchResult = matchResult,\n              path = _matchResult.path;\n          matchResult.path = !end && path.charAt(path.length - 1) === '/' ? path.substr(1) : path;\n          matchResult.params = Object.assign({}, parentParams, {}, matchResult.params);\n          return {\n            done: false,\n            value: {\n              route: route,\n              baseUrl: baseUrl,\n              path: matchResult.path,\n              params: matchResult.params\n            }\n          };\n        }\n      }\n\n      if (matchResult && route.children) {\n        while (childIndex < route.children.length) {\n          if (!childMatches) {\n            var childRoute = route.children[childIndex];\n            childRoute.parent = route;\n            childMatches = matchRoute(childRoute, baseUrl + matchResult.path, options, pathname.substr(matchResult.path.length), matchResult.params);\n          }\n\n          var childMatch = childMatches.next(routeToSkip);\n\n          if (!childMatch.done) {\n            return {\n              done: false,\n              value: childMatch.value\n            };\n          }\n\n          childMatches = null;\n          childIndex++;\n        }\n      }\n\n      return {\n        done: true,\n        value: false\n      };\n    }\n  };\n}\n\nfunction resolveRoute(context, params) {\n  if (typeof context.route.action === 'function') {\n    return context.route.action(context, params);\n  }\n\n  return undefined;\n}\n\nfunction isChildRoute(parentRoute, childRoute) {\n  var route = childRoute;\n\n  while (route) {\n    route = route.parent;\n\n    if (route === parentRoute) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar UniversalRouter = function () {\n  function UniversalRouter(routes, options) {\n    if (!routes || typeof routes !== 'object') {\n      throw new TypeError('Invalid routes');\n    }\n\n    this.options = Object.assign({\n      decode: decode\n    }, options);\n    this.baseUrl = this.options.baseUrl || '';\n    this.root = Array.isArray(routes) ? {\n      path: '',\n      children: routes,\n      parent: null\n    } : routes;\n    this.root.parent = null;\n  }\n\n  var _proto = UniversalRouter.prototype;\n\n  _proto.resolve = function resolve(pathnameOrContext) {\n    var _this = this;\n\n    var context = Object.assign({\n      router: this\n    }, this.options.context, {}, typeof pathnameOrContext === 'string' ? {\n      pathname: pathnameOrContext\n    } : pathnameOrContext);\n    var matchResult = matchRoute(this.root, this.baseUrl, this.options, context.pathname.substr(this.baseUrl.length));\n    var resolve = this.options.resolveRoute || resolveRoute;\n    var matches;\n    var nextMatches;\n    var currentContext = context;\n\n    function next(resume, parent, prevResult) {\n      if (parent === void 0) {\n        parent = !matches.done && matches.value.route;\n      }\n\n      var routeToSkip = prevResult === null && !matches.done && matches.value.route;\n      matches = nextMatches || matchResult.next(routeToSkip);\n      nextMatches = null;\n\n      if (!resume) {\n        if (matches.done || !isChildRoute(parent, matches.value.route)) {\n          nextMatches = matches;\n          return Promise.resolve(null);\n        }\n      }\n\n      if (matches.done) {\n        var error = new Error('Route not found');\n        error.status = 404;\n        return Promise.reject(error);\n      }\n\n      currentContext = Object.assign({}, context, {}, matches.value);\n      return Promise.resolve(resolve(currentContext, matches.value.params)).then(function (result) {\n        if (result !== null && result !== undefined) {\n          return result;\n        }\n\n        return next(resume, parent, result);\n      });\n    }\n\n    context.next = next;\n    return Promise.resolve().then(function () {\n      return next(true, _this.root);\n    })[\"catch\"](function (error) {\n      if (_this.options.errorHandler) {\n        return _this.options.errorHandler(error, currentContext);\n      }\n\n      throw error;\n    });\n  };\n\n  return UniversalRouter;\n}();\n\nexport default UniversalRouter;\n//# sourceMappingURL=module.js.map\n","/*! Universal Router | MIT License | https://www.kriasoft.com/universal-router/ */\n\nimport { parse, tokensToFunction } from 'path-to-regexp';\n\nfunction cacheRoutes(routesByName, route, routes) {\n  if (route.name && routesByName.has(route.name)) {\n    throw new Error(\"Route \\\"\" + route.name + \"\\\" already exists\");\n  }\n\n  if (route.name) {\n    routesByName.set(route.name, route);\n  }\n\n  if (routes) {\n    for (var i = 0; i < routes.length; i++) {\n      var childRoute = routes[i];\n      childRoute.parent = route;\n      cacheRoutes(routesByName, childRoute, childRoute.children);\n    }\n  }\n}\n\nfunction generateUrls(router, options) {\n  if (!router) {\n    throw new ReferenceError('Router is not defined');\n  }\n\n  var routesByName = new Map();\n  var regexpByRoute = new Map();\n  var opts = Object.assign({\n    encode: encodeURIComponent\n  }, options);\n  return function (routeName, params) {\n    var route = routesByName.get(routeName);\n\n    if (!route) {\n      routesByName.clear();\n      regexpByRoute.clear();\n      cacheRoutes(routesByName, router.root, router.root.children);\n      route = routesByName.get(routeName);\n\n      if (!route) {\n        throw new Error(\"Route \\\"\" + routeName + \"\\\" not found\");\n      }\n    }\n\n    var regexp = regexpByRoute.get(route);\n\n    if (!regexp) {\n      var fullPath = '';\n      var rt = route;\n\n      while (rt) {\n        var path = Array.isArray(rt.path) ? rt.path[0] : rt.path;\n\n        if (path) {\n          fullPath = path + fullPath;\n        }\n\n        rt = rt.parent;\n      }\n\n      var tokens = parse(fullPath, opts);\n      var toPath = tokensToFunction(tokens, opts);\n      var keys = Object.create(null);\n\n      for (var i = 0; i < tokens.length; i++) {\n        var token = tokens[i];\n\n        if (typeof token !== 'string') {\n          keys[token.name] = true;\n        }\n      }\n\n      regexp = {\n        toPath: toPath,\n        keys: keys\n      };\n      regexpByRoute.set(route, regexp);\n    }\n\n    var url = router.baseUrl + regexp.toPath(params) || '/';\n\n    if (opts.stringifyQueryParams && params) {\n      var queryParams = {};\n\n      var _keys = Object.keys(params);\n\n      for (var _i = 0; _i < _keys.length; _i++) {\n        var key = _keys[_i];\n\n        if (!regexp.keys[key]) {\n          queryParams[key] = params[key];\n        }\n      }\n\n      var query = opts.stringifyQueryParams(queryParams);\n\n      if (query) {\n        url += query.charAt(0) === '?' ? query : \"?\" + query;\n      }\n    }\n\n    return url;\n  };\n}\n\nexport default generateUrls;\n//# sourceMappingURL=module.js.map\n","import UniversalRouter from 'universal-router';\nimport generateUrls from 'universal-router/generateUrls';\n\n/**\n * A wrapper around UniversalRouter which adds history integration\n */\nexport class Router {\n\n    /**\n     * @param {Array} routes The routes passed to UniversalRouter\n     * @param {object} options Options\n     * @param {string} options.routeName The main route name\n     * @param {Function} options.getState Function which should return the current state\n     * @param {Function} options.setState Function which gets passed the new state based on the route\n     * @param {object} unioptions options passed to UniversalRouter\n     */\n    constructor(routes, options, unioptions) {\n        this.getState = options.getState;\n        this.setState = options.setState;\n        // XXX: We only have one route atm\n        // If we need more we need to pass the route name to each function\n        this.routeName = options.routeName;\n\n        console.assert(this.getState);\n        console.assert(this.setState);\n        console.assert(this.routeName);\n\n        // https://github.com/kriasoft/universal-router\n        this.router = new UniversalRouter(routes, unioptions);\n\n        window.addEventListener('popstate', (event) => {\n            this.setStateFromCurrentLocation();\n            this.dispatchLocationChanged();\n        });\n    }\n\n    /**\n     * In case something else has changed the location, update the app state accordingly.\n     */\n    setStateFromCurrentLocation() {\n        const oldPathName = location.pathname;\n        this.router.resolve({pathname: oldPathName}).then(page => {\n            const newPathname = this.getPathname(page);\n            // In case of a router redirect, set the new location\n            if (newPathname !== oldPathName) {\n                const referrerUrl = location.href;\n                window.history.replaceState({}, '', newPathname);\n                this.dispatchLocationChanged(referrerUrl);\n            }\n            this.setState(page);\n        }).catch((e) => {\n            // In case we can't resolve the location, just leave things as is.\n            // This happens when a user enters a wrong URL or when testing with karma.\n        });\n    }\n\n    /**\n     * Update the router after some internal state change.\n     */\n    update() {\n        // Queue updates so we can call this multiple times when changing state\n        // without it resulting in multiple location changes\n        setTimeout(() => {\n            const newPathname = this.getPathname();\n            const oldPathname = location.pathname;\n            if (newPathname === oldPathname)\n                return;\n            const referrerUrl = location.href;\n            window.history.pushState({}, '', newPathname);\n            this.dispatchLocationChanged(referrerUrl);\n        });\n    }\n\n    /**\n     * Given a new routing path set the location and the app state.\n     *\n     * @param {string} pathname\n     */\n    updateFromPathname(pathname) {\n        this.router.resolve({pathname: pathname}).then(page => {\n            if (location.pathname === pathname)\n                return;\n            const referrerUrl = location.href;\n            window.history.pushState({}, '', pathname);\n            this.setState(page);\n            this.dispatchLocationChanged(referrerUrl);\n        }).catch((err) => {\n            throw new Error(`Route not found: ${pathname}: ${err}`);\n        });\n    }\n\n    /**\n     * Pass some new router state to get a new router path that can\n     * be passed to updateFromPathname() later on. If nothing is\n     * passed the current state is used.\n     *\n     * @param {object} [partialState] The optional partial new state\n     * @returns {string} The new path\n     */\n    getPathname(partialState) {\n        const currentState = this.getState();\n        if (partialState === undefined)\n            partialState = {};\n        let combined = {...currentState, ...partialState};\n        return generateUrls(this.router)(this.routeName, combined);\n    }\n\n    dispatchLocationChanged(referrerUrl = \"\") {\n        // fire a locationchanged event\n        window.dispatchEvent(new CustomEvent('locationchanged', {\n            detail: {\n                referrerUrl: referrerUrl,\n            },\n            bubbles: true\n        }));\n    }\n}\n","import {html, css} from 'lit-element';\nimport * as commonStyles from '@dbp-toolkit/common/styles';\nimport {AdapterLitElement} from \"@dbp-toolkit/provider/src/adapter-lit-element\";\n\nexport class BuildInfo extends AdapterLitElement {\n\n    constructor() {\n        super();\n        this.env = '';\n        this.gitInfo = '';\n        this.buildUrl = '';\n        this.buildTime = '';\n    }\n\n    static get properties() {\n        return {\n            ...super.properties,\n            env: { type: String },\n            buildUrl: { type: String, attribute: \"build-url\" },\n            buildTime: { type: String, attribute: \"build-time\" },\n            gitInfo: { type: String, attribute: \"git-info\" }\n        };\n    }\n\n    static get styles() {\n        return css`\n            ${commonStyles.getThemeCSS()}\n            ${commonStyles.getGeneralCSS()}\n            ${commonStyles.getTagCSS()}\n\n            :host {\n                display: inline-block;\n            }\n        `;\n    } \n\n    render() {\n        const date = new Date(this.buildTime);\n\n        return html`\n            <a href=\"${this.buildUrl}\" style=\"float: right\">\n                <div class=\"tags has-addons\" title=\"Build Time: ${date.toString()}\">\n                    <span class=\"tag is-light\">build</span>\n                    <span class=\"tag is-dark\">${this.gitInfo} (${this.env})</span>\n                </div>\n            </a>\n        `;\n    }\n}","import {html, css} from 'lit-element';\nimport * as commonStyles from '@dbp-toolkit/common/styles';\nimport {createI18nInstance} from './i18n.js';\nimport {AdapterLitElement} from \"@dbp-toolkit/provider/src/adapter-lit-element\";\n\nconst i18n = createI18nInstance();\n\nexport class TUGrazLogo extends AdapterLitElement {\n\n    constructor() {\n        super();\n\n        this.lang = i18n.language;\n    }\n\n    static get properties() {\n        return {\n            ...super.properties,\n            lang: { type: String }\n        };\n    }\n\n    update(changedProperties) {\n        changedProperties.forEach((oldValue, propName) => {\n            if (propName === \"lang\") {\n                i18n.changeLanguage(this.lang);\n            }\n        });\n        super.update(changedProperties);\n    }\n\n    static get styles() {\n        return css`\n            ${commonStyles.getThemeCSS()}\n            ${commonStyles.getGeneralCSS()}\n\n            :host {\n                display: inline-block;\n            }\n\n            #claim\n            {\n                font-size: 12px;\n                text-align: right;\n                padding: 0 17px 0 0;\n                line-height: 17px;\n                letter-spacing: 2px;\n                vertical-align: top;\n                text-transform: uppercase;\n                display: inline-block;\n                white-space: nowrap;\n            }\n\n            #img {\n                overflow: visible;\n            }\n\n            a:hover path, a:focus path {\n                fill:#000 !important;\n                transition:none;\n            }\n\n             * {\n                transition:fill 0.15s, stroke 0.15s;\n            }\n        `;\n    } \n\n    render() {\n        return html`\n            <a href=\"https://www.tugraz.at\" title=\"TU Graz Home\" target=\"_blank\" rel=\"noopener\">\n                <div id=\"claim\">\n                    <div class=\"int-header-logo-claim-single\">${i18n.t('logo.word1')}</div>\n                    <div class=\"int-header-logo-claim-single\">${i18n.t('logo.word2')}</div>\n                    <div class=\"int-header-logo-claim-single\">${i18n.t('logo.word3')}</div>\n                </div>\n                <svg id=\"img\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns=\"http://www.w3.org/2000/svg\" xml:space=\"preserve\" height=\"51.862\" width=\"141.1\" version=\"1.1\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\" viewBox=\"0 0 141.10001 51.862499\"><g transform=\"matrix(1.25 0 0 -1.25 0 51.862)\"><g transform=\"scale(.1)\"><path style=\"fill:#e4154b\" d=\"m0 103.73h207.45v207.46l-207.45 0.01v-207.47z\"></path><path style=\"fill:#e4154b\" d=\"m228.19 103.73h207.46v207.46h-207.46v-207.46z\"></path><path style=\"fill:#e4154b\" d=\"m456.41 103.73h207.44v207.46h-207.44v-207.46z\"></path><path style=\"fill:#e4154b\" d=\"m103.72 0h207.47v207.46h-207.47v-207.46z\"></path><path style=\"fill:#e4154b\" d=\"m352.68 207.46h207.44v207.46h-207.44v-207.46z\"></path><path style=\"fill:#231f20\" d=\"m751.04 277.91h-66.426v33.195h171.19v-33.195h-66.407v-173.73h-38.359v173.73\"></path><path style=\"fill:#231f20\" d=\"m1048.3 180.22c0-12.461-2.25-23.711-6.72-33.75-4.5-10.039-10.61-18.555-18.36-25.567-7.76-7.031-16.9-12.421-27.503-16.21-10.605-3.809-22.109-5.7036-34.551-5.7036-12.422 0-23.945 1.8946-34.551 5.7036-10.605 3.789-19.824 9.179-27.656 16.21-7.851 7.012-13.984 15.528-18.34 25.567-4.394 10.039-6.582 21.289-6.582 33.75v130.89h38.379v-129.59c0-5.039 0.801-10.351 2.442-15.898 1.64-5.547 4.336-10.664 8.125-15.332s8.789-8.516 15.039-11.523c6.211-3.008 13.926-4.512 23.144-4.512 9.199 0 16.914 1.504 23.145 4.512 6.23 3.007 11.25 6.855 15.039 11.523 3.77 4.668 6.48 9.785 8.12 15.332 1.63 5.547 2.45 10.859 2.45 15.898v129.59h38.38v-130.89\"></path><path style=\"fill:#231f20\" d=\"m832.56 75.664c-7.597 3.2812-17.46 4.8632-25.332 4.8632-22.929 0-35.605-14.434-35.605-33.184 0-18.613 12.383-32.637 33.34-32.637 5.351 0 9.59 0.5274 12.969 1.3086v23.867h-20.84v14.414h39.687v-49.297c-10.41-2.6172-21.25-4.707-31.816-4.707-31.797 0-53.906 14.805-53.906 45.742 0 31.348 20.566 48.906 53.906 48.906 11.406 0 20.41-1.4453 28.867-3.8086l-1.27-15.469\"></path><path style=\"fill:#231f20\" d=\"m856.2 69.375h16.758v-15.332h0.293c0.84 6.289 8.574 16.914 19.824 16.914 1.836 0 3.828 0 5.782-0.5273v-17.715c-1.68 0.918-5.059 1.4454-8.457 1.4454-15.333 0-15.333-17.832-15.333-27.52v-24.785h-18.867v67.52\"></path><path style=\"fill:#231f20\" d=\"m913.75 65.84c7.324 3.1446 17.187 5.1172 25.215 5.1172 22.09 0 31.23-8.5351 31.23-28.457v-8.6523c0-6.8165 0.156-11.934 0.293-16.914 0.137-5.1172 0.41-9.8242 0.84-15.078h-16.602c-0.703 3.5352-0.703 8.0078-0.839 10.098h-0.293c-4.36-7.4618-13.81-11.661-22.38-11.661-12.793 0-25.332 7.207-25.332 20.059 0 10.078 5.195 15.976 12.383 19.258 7.187 3.2812 16.464 3.9453 24.355 3.9453h10.41c0 10.879-5.195 14.551-16.328 14.551-8.008 0-16.035-2.8907-22.363-7.3438l-0.586 15.078zm22.11-52.715c5.782 0 10.274 2.3633 13.223 6.0352 3.105 3.8086 3.945 8.6523 3.945 13.906h-8.164c-8.437 0-20.957-1.3086-20.957-11.68 0-5.7617 5.195-8.2617 11.953-8.2617\"></path><path style=\"fill:#231f20\" d=\"m985.69 69.375h57.422v-14.414l-36.04-39.473h37.31v-13.633h-60.235v14.297l36.715 39.59h-35.172v13.633\"></path><path style=\"fill:#e4154b\" d=\"m1059.6 0h69.102v69.121h-69.102v-69.121z\"></path></g></g></svg>\n            </a>\n        `;\n    }\n}","import {createI18nInstance} from './i18n.js';\nimport {css, html, LitElement} from 'lit-element';\nimport {ScopedElementsMixin} from '@open-wc/scoped-elements';\nimport * as commonUtils from '@dbp-toolkit/common/utils';\nimport * as commonStyles from '@dbp-toolkit/common/styles';\n\nconst i18n = createI18nInstance();\n\nclass AppShellWelcome extends ScopedElementsMixin(LitElement) {\n\n    constructor() {\n        super();\n        this.lang = i18n.language;\n    }\n\n    static get properties() {\n        return {\n            lang: { type: String },\n        };\n    }\n\n    static set app(app) {\n        this._app = app;\n    }\n\n    update(changedProperties) {\n        changedProperties.forEach((oldValue, propName) => {\n            if (propName === \"lang\") {\n                i18n.changeLanguage(this.lang);\n            }\n        });\n\n        super.update(changedProperties);\n    }\n\n    static get styles() {\n        // language=css\n        return css`\n            ${commonStyles.getThemeCSS()}\n            ${commonStyles.getGeneralCSS()}\n\n            p { line-height: 1.8em }\n            .item {padding-top: 0.5em;}\n            .description {\n                padding-left: 2em;\n                font-style: italic;\n                margin-top: -1px;\n                line-height: initial;\n            }\n\n            h2 a:hover {\n                color: #E4154B;\n            }\n        `;\n    }\n\n    render() {\n        const app = AppShellWelcome._app;\n        let metadata = app.metadata;\n        let itemTemplates = [];\n\n        const switchActivity = (e, data) => {\n            e.preventDefault();\n            app.switchComponent(data.routing_name);\n        };\n\n        for (let [key, data] of Object.entries(metadata)) {\n\n            if (data['visible'] && (key !== \"welcome\")) {\n                itemTemplates.push(html`\n                    <div class=\"item\">\n                        <h2><a href=\"#\" @click=${(e) => {switchActivity(e, data);}}>${data.name[this.lang]}</a></h2>\n                        <p class=\"description\">${data.description[this.lang]}</p>\n                    </div>`);\n            }\n        }\n\n        return html`\n            <p>${i18n.t('welcome.headline', {appname: app.topic.name[this.lang]})}\n            ${app.topic.description[this.lang] }</p>\n            <br>\n            ${itemTemplates}\n        `;\n    }\n}\n\nexport const appWelcomeMeta = {\n    \"element\": \"dbp-app-shell-welcome\",\n    \"module_src\": \"\",\n    \"routing_name\": \"welcome\",\n    \"name\": {\n      \"de\": \"Willkommen\",\n      \"en\": \"Welcome\"\n    },\n    \"short_name\": {\n      \"de\": \"Willkommen\",\n      \"en\": \"Welcome\"\n    },\n    \"description\": {\n      \"de\": \"\",\n      \"en\": \"\"\n    },\n    visible: true,\n    required_roles: [],\n};\n\ncommonUtils.defineCustomElement('dbp-app-shell-welcome', AppShellWelcome);\n","import DBPLitElement from '@dbp-toolkit/common/dbp-lit-element';\nimport {LoginStatus} from \"@dbp-toolkit/auth/src/util\";\n\nfunction pushEvent(event) {\n    window._paq = window._paq || [];\n    window._paq.push(event);\n}\n\nexport class MatomoElement extends DBPLitElement {\n\n    constructor() {\n        super();\n        this.endpoint = '';\n        this.siteId = -1;\n        this.isRunning = false;\n        this.lastEvent = [];\n        this.gitInfo = '';\n        this.auth = {};\n        this.analyticsEvent = {};\n        this.loginStatus = '';\n    }\n\n\n    static get properties() {\n        return {\n            ...super.properties,\n            endpoint: { type: String },\n            siteId: { type: Number, attribute: 'site-id' },\n            gitInfo: { type: Number, attribute: 'git-info' },\n            auth: { type: Object },\n            analyticsEvent: { type: Object, attribute: 'analytics-event' },\n        };\n    }\n\n    update(changedProperties) {\n        changedProperties.forEach((oldValue, propName) => {\n            switch (propName) {\n                case 'auth':\n                {\n                    const loginStatus = this.auth['login-status'];\n\n                    if (this.loginStatus !== loginStatus) {\n                        this.setupMatomo(loginStatus === LoginStatus.LOGGED_IN);\n                        this.loginStatus = loginStatus;\n                    }\n                }\n                break;\n                case 'analyticsEvent':\n                {\n                    console.log('MatomoElement(' + this.isRunning + ') analyticsEvent: ' +\n                        this.analyticsEvent.action + ', ' + this.analyticsEvent.message);\n                    const event = ['trackEvent', this.analyticsEvent.category, this.analyticsEvent.action,\n                        this.analyticsEvent.name, this.analyticsEvent.value];\n\n                    if (this.isRunning) {\n                        pushEvent(event);\n                    } else {\n                        this.lastEvent = event;\n                    }\n                }\n                break;\n            }\n        });\n\n        super.update(changedProperties);\n    }\n\n    render() {\n        return ``;\n    }\n\n    setupMatomo(loggedIn) {\n        if (loggedIn && ! this.isRunning) {\n            if (this.siteId === -1) {\n                console.log('site id missing, skipping matomo...');\n                return;\n            }\n            if (this.endpoint === '') {\n                console.log('endpoint missing, skipping matomo...');\n                return;\n            }\n            console.log('add matomo...');\n\n            pushEvent(['setCustomVariable', 1, \"GitCommit\", this.gitInfo, \"visit\"]);\n            pushEvent(['enableHeartBeatTimer']);\n            pushEvent(['disableCookies']);\n            pushEvent(['trackPageView']);\n            pushEvent(['enableLinkTracking']);\n\n            (function (endpoint, siteId) {\n                pushEvent(['setTrackerUrl', endpoint+'matomo.php']);\n                pushEvent(['setSiteId', siteId]);\n\n                var g = document.createElement('script');\n                var s = document.getElementsByTagName('script')[0];\n                g.type = 'text/javascript';\n                g.async = true;\n                g.defer = true;\n                g.src = endpoint + 'matomo.js';\n                s.parentNode.insertBefore(g, s);\n            })(this.endpoint, this.siteId);\n\n            // track changed locations\n            window.addEventListener('locationchanged', function(e) {\n                pushEvent(['setReferrerUrl', e.detail.referrerUrl]);\n                pushEvent(['setCustomUrl', location.href]);\n                // pushEvent(['setDocumentTitle', '']);\n                pushEvent(['trackPageView']);\n\n                // make Matomo aware of newly added content\n                var content = document.getElementById('content');\n                pushEvent(['MediaAnalytics::scanForMedia', content]);\n                pushEvent(['FormAnalytics::scanForForms', content]);\n                pushEvent(['trackContentImpressionsWithinNode', content]);\n            });\n\n            // track errors\n            window.addEventListener('error', function(e) {\n                pushEvent(['trackEvent', 'Error', e.error.message + '\\n' + e.error.stack]);\n            });\n\n            window.addEventListener('unhandledrejection', function(e) {\n                pushEvent(['trackEvent', 'UnhandledRejection', e.reason]);\n            });\n\n            this.isRunning = true;\n            if (this.lastEvent.length > 0) {\n                console.log('MatomoElement* (' + this.isRunning + '): ' + this.lastEvent[1] + ', ' + this.lastEvent[2]);\n                pushEvent(this.lastEvent);\n                this.lastEvent = [];\n            }\n            return;\n        }\n        if (! loggedIn && this.isRunning) {\n            // TODO: remove those event listeners\n            console.log('remove matomo...');\n            this.isRunning = false;\n        }\n    }\n}\n","import {createI18nInstance} from './i18n.js';\nimport {html, css} from 'lit-element';\nimport {ScopedElementsMixin} from '@open-wc/scoped-elements';\nimport {LanguageSelect} from '@dbp-toolkit/language-select';\nimport {Icon} from '@dbp-toolkit/common';\nimport {AuthKeycloak} from '@dbp-toolkit/auth';\nimport {AuthMenuButton} from './auth-menu-button.js';\nimport {Notification} from '@dbp-toolkit/notification';\nimport * as commonStyles from '@dbp-toolkit/common/styles';\nimport {classMap} from 'lit-html/directives/class-map.js';\nimport {Router} from './router.js';\nimport {BuildInfo} from './build-info.js';\nimport {TUGrazLogo} from './tugraz-logo.js';\nimport {send as notify} from '@dbp-toolkit/common/notification';\nimport {appWelcomeMeta} from './dbp-app-shell-welcome.js';\nimport {MatomoElement} from \"@dbp-toolkit/matomo/src/matomo\";\nimport {AdapterLitElement} from \"@dbp-toolkit/provider/src/adapter-lit-element\";\n\n\nconst i18n = createI18nInstance();\n\n/**\n * In case the application gets updated future dynamic imports might fail.\n * This sends a notification suggesting the user to reload the page.\n *\n * uage: importNotify(import('<path>'));\n *\n * @param {Promise} promise\n */\nconst importNotify = async (promise) => {\n    try {\n        return await promise;\n    } catch (error) {\n        console.log(error);\n        notify({\n            \"body\": i18n.t('page-updated-needs-reload'),\n            \"type\": \"info\",\n            \"icon\": \"warning\"\n        });\n        throw error;\n    }\n};\n\nexport class AppShell extends ScopedElementsMixin(AdapterLitElement) {\n    constructor() {\n        super();\n        this.lang = i18n.language;\n        this.activeView = '';\n        this.entryPointUrl = '';\n        this.subtitle = '';\n        this.description = '';\n        this.routes = [];\n        this.metadata = {};\n        this.topic = {};\n        this.basePath = '/';\n        this.keycloakConfig = null;\n        this.noWelcomePage = false;\n        this.menuHeight = -1;\n        this.gitInfo = '';\n        this.env = '';\n        this.buildUrl = '';\n        this.buildTime = '';\n        this._loginStatus = 'unknown';\n        this._roles = [];\n\n        this.matomoUrl = '';\n        this.matomoSiteId = -1;\n\n        this._attrObserver = new MutationObserver(this.onAttributeObserved);\n\n        this.shellName = 'TU Graz';\n        this.shellSubname= 'Graz University of Technology';\n        this.noBrand = false;\n        this.auth = {};\n    }\n\n    static get scopedElements() {\n        return {\n          'dbp-language-select': LanguageSelect,\n          'dbp-tugraz-logo': TUGrazLogo,\n          'dbp-build-info': BuildInfo,\n          'dbp-auth-keycloak': AuthKeycloak,\n          'dbp-auth-menu-button': AuthMenuButton,\n          'dbp-notification': Notification,\n          'dbp-icon': Icon,\n          'dbp-matomo': MatomoElement,\n        };\n    }\n\n    onAttributeObserved(mutationsList, observer) {\n        for(let mutation of mutationsList) {\n            if (mutation.type === 'attributes') {\n                const key = mutation.attributeName;\n                const value = mutation.target.getAttribute(key);\n                sessionStorage.setItem('dbp-attr-' + key, value);\n            }\n        }\n    }\n\n    /**\n     * Fetches the metadata of the components we want to use in the menu, dynamically imports the js modules for them,\n     * then triggers a rebuilding of the menu and resolves the current route\n     *\n     * @param {string} topicURL The topic metadata URL or relative path to load things from\n     */\n    async fetchMetadata(topicURL) {\n        let metadata = {};\n        let routes = [];\n\n        const result = await (await fetch(topicURL, {\n            headers: {'Content-Type': 'application/json'}\n        })).json();\n\n        this.topic = result;\n\n        const fetchOne = async (url) => {\n              const result = await fetch(url, {\n                headers: {'Content-Type': 'application/json'}\n            });\n            if (!result.ok)\n                throw result;\n\n            const jsondata = await result.json();\n            if (jsondata[\"element\"] === undefined)\n                throw new Error(\"no element defined in metadata\");\n\n            return jsondata;\n        };\n\n        let promises = [];\n        for (const activity of result.activities) {\n            const actURL = new URL(activity.path, new URL(topicURL, window.location).href).href;\n            promises.push([activity.visible === undefined || activity.visible, actURL, fetchOne(actURL)]);\n        }\n\n        for (const [visible, actURL, p] of promises) {\n            try {\n                const activity = await p;\n                activity.visible = visible;\n                // Resolve module_src relative to the location of the json file\n                activity.module_src = new URL(activity.module_src, actURL).href;\n                activity.required_roles = activity.required_roles || [];\n                metadata[activity.routing_name] = activity;\n                routes.push(activity.routing_name);\n            } catch (error) {\n                console.log(error);\n            }\n        }\n\n        if (!this.noWelcomePage) {\n            // Inject the welcome activity\n            routes.unshift(\"welcome\");\n            metadata = Object.assign(metadata, {\n                \"welcome\": appWelcomeMeta,\n            });\n            customElements.get(\"dbp-app-shell-welcome\").app = this;\n        }\n\n        // this also triggers a rebuilding of the menu\n        this.metadata = metadata;\n        this.routes = routes;\n\n        // Switch to the first route if none is selected\n        if (!this.activeView)\n            this.switchComponent(routes[0]);\n        else\n            this.switchComponent(this.activeView);\n\n    }\n\n    initRouter() {\n        const routes = [\n            {\n                path: '',\n                action: (context) => {\n                    return {\n                        lang: this.lang,\n                        component: '',\n                    };\n                }\n            },\n            {\n                path: '/:lang',\n                children: [\n                    {\n                        path: '',\n                        action: (context, params) => {\n                            return {\n                                lang: params.lang,\n                                component: '',\n                            };\n                        }\n                    },\n                    {\n                        name: 'mainRoute',\n                        path: '/:component',\n                        action: (context, params) => {\n                            // remove the additional parameters added by Keycloak\n                            let componentTag = params.component.toLowerCase().replace(/&.+/,\"\");\n                            return {\n                                lang: params.lang,\n                                component: componentTag,\n                            };\n                        },\n                    },\n                ],\n            },\n        ];\n\n        this.router = new Router(routes, {\n            routeName: 'mainRoute',\n            getState: () => {\n                return {\n                    component: this.activeView,\n                    lang: this.lang,\n                };\n            },\n            setState: (state) => {\n                this.updateLangIfChanged(state.lang);\n                this.switchComponent(state.component);\n            }\n        }, {\n            baseUrl: new URL(this.basePath, window.location).pathname.replace(/\\/$/, ''),\n        });\n\n        this.router.setStateFromCurrentLocation();\n    }\n\n    static get properties() {\n        return {\n            ...super.properties,\n            lang: { type: String, reflect: true },\n            src: { type: String },\n            basePath: { type: String, attribute: 'base-path' },\n            activeView: { type: String, attribute: false},\n            entryPointUrl: { type: String, attribute: 'entry-point-url' },\n            keycloakConfig: { type: Object, attribute: 'keycloak-config' },\n            metadata: { type: Object, attribute: false },\n            topic: { type: Object, attribute: false },\n            subtitle: { type: String, attribute: false },\n            description: { type: String, attribute: false },\n            _loginStatus: { type: Boolean, attribute: false },\n            _roles: { type: Array, attribute: false },\n            matomoUrl: { type: String, attribute: \"matomo-url\" },\n            matomoSiteId: { type: Number, attribute: \"matomo-site-id\" },\n            noWelcomePage: { type: Boolean, attribute: \"no-welcome-page\" },\n            shellName: { type: String, attribute: \"shell-name\" },\n            shellSubname: { type: String, attribute: \"shell-subname\" },\n            noBrand: { type: Boolean, attribute: \"no-brand\" },\n            gitInfo: { type: String, attribute: \"git-info\" },\n            buildUrl: { type: String, attribute: \"build-url\" },\n            buildTime: { type: String, attribute: \"build-time\" },\n            env: { type: String },\n            auth: { type: Object },\n        };\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n\n        if (this.src)\n            this.fetchMetadata(this.src);\n        this.initRouter();\n    }\n\n    /**\n     * Switches language if another language is requested\n     *\n     * @param {string} lang\n     */\n    updateLangIfChanged(lang) {\n        if (this.lang !== lang) {\n            this.lang = lang;\n            this.router.update();\n\n            // tell a dbp-provider to update the \"lang\" property\n            this.sendSetPropertyEvent('lang', lang);\n        }\n    }\n\n    update(changedProperties) {\n        changedProperties.forEach((oldValue, propName) => {\n            switch (propName) {\n                case 'lang':\n                    i18n.changeLanguage(this.lang);\n                    // For screen readers\n                    document.documentElement.setAttribute(\"lang\", this.lang);\n                    i18n.changeLanguage(this.lang);\n\n                    this.router.update();\n                    this.subtitle = this.activeMetaDataText(\"short_name\");\n                    this.description = this.activeMetaDataText(\"description\");\n                break;\n                case 'auth':\n                {\n                    if (this.auth.person) {\n                        this._roles = this.auth.person['roles'];\n                    } else {\n                        this._roles = [];\n                    }\n\n                    const loginStatus = this.auth['login-status'];\n                    if (loginStatus !== this._loginStatus) {\n                        console.log('Login status: ' + loginStatus);\n                    }\n\n                    this._loginStatus = loginStatus;\n\n                    // Clear the session storage when the user logs out\n                    if (this._loginStatus === 'logging-out') {\n                        sessionStorage.clear();\n                    }\n                }\n                break;\n            }\n        });\n\n        super.update(changedProperties);\n    }\n\n    onMenuItemClick(e) {\n        e.preventDefault();\n\n        // if not the current page was clicked we need to check if the page can be left\n        if (!e.currentTarget.className.includes(\"selected\")) {\n            // simulate a \"beforeunload\" event\n            const event = new CustomEvent(\"beforeunload\", {\n                bubbles: true,\n                cancelable: true,\n            });\n\n            const eventResult = window.dispatchEvent(event);\n\n            // if someone canceled the \"beforeunload\" event we don't want to leave the page\n            if (!eventResult) {\n                return;\n            }\n        }\n\n        const link = e.composedPath()[0];\n        const location = link.getAttribute('href');\n        this.router.updateFromPathname(location);\n        this.hideMenu();\n    }\n\n    onLanguageChanged(e) {\n        const newLang = e.detail.lang;\n        const changed = (this.lang !== newLang);\n        this.lang = newLang;\n        if (changed) {\n            this.router.update();\n            this.subtitle = this.activeMetaDataText(\"short_name\");\n            this.description = this.activeMetaDataText(\"description\");\n        }\n    }\n\n    switchComponent(componentTag) {\n        let offset = window.pageYOffset;\n        const changed = (componentTag !== this.activeView);\n        this.activeView = componentTag;\n        if (changed)\n            this.router.update();\n        const metadata = this.metadata[componentTag];\n\n        if (metadata === undefined) {\n            return;\n        }\n\n        let updateFunc = () => {\n           \n            if (offset > 0) {\n\n                const header = this.shadowRoot.querySelector(\"header\");\n                const title = this.shadowRoot.querySelector(\"#headline\");\n\n                if (header === null || title === null) {\n                    return;\n                }\n\n                let style = getComputedStyle(title);\n                let marginTop = isNaN(parseInt(style.marginTop, 10)) ? 0 : parseInt(style.marginTop, 10);\n                let marginBottom = isNaN(parseInt(style.marginBottom, 10)) ? 0 : parseInt(style.marginBottom, 10);\n\n                let topValue = header.getBoundingClientRect().height + title.getBoundingClientRect().height + marginTop + marginBottom;\n\n                if (offset < topValue) {\n                    window.scrollTo(0, offset);\n                } else {\n                    window.scrollTo(0, topValue);\n                }\n            }\n            this.updatePageTitle();\n            this.subtitle = this.activeMetaDataText(\"short_name\");\n            this.description = this.activeMetaDataText(\"description\");\n        };\n\n        // If it is empty assume the element is already registered through other means\n        if (!metadata.module_src) {\n            updateFunc();\n            return;\n        }\n\n        importNotify(import(metadata.module_src)).then(() => {\n            updateFunc();\n        }).catch((e) => {\n            console.error(`Error loading ${ metadata.element }`);\n            throw e;\n        });\n    }\n\n    metaDataText(routingName, key) {\n        const metadata = this.metadata[routingName];\n        return metadata !== undefined && metadata[key] !== undefined ? metadata[key][this.lang] : '';\n    }\n\n    topicMetaDataText(key) {\n        return (this.topic[key] !== undefined) ? this.topic[key][this.lang] : '';\n    }\n\n    activeMetaDataText(key) {\n        return this.metaDataText(this.activeView, key);\n    }\n\n    updatePageTitle() {\n        document.title = `${this.topicMetaDataText('name')} - ${this.activeMetaDataText(\"short_name\")}`;\n    }\n\n    toggleMenu() {\n        const menu = this.shadowRoot.querySelector(\"ul.menu\");\n        const subtitle = this.shadowRoot.querySelector(\"h2.subtitle\");\n\n        if (menu === null || subtitle === null) {\n            return;\n        }\n\n        menu.classList.toggle('hidden');\n\n        if (this.menuHeight === -1) {\n            this.menuHeight = menu.clientHeight;\n        }\n\n        let topValue = subtitle.getBoundingClientRect().bottom;\n        let isMenuOverflow = this.menuHeight + topValue >= window.innerHeight ? true : false;\n        \n        if (isMenuOverflow && !menu.classList.contains('hidden')) {\n            menu.setAttribute('style', 'position: fixed;top: ' + topValue + 'px;bottom: 0;border-bottom: 0;overflow-y: auto;');\n            menu.scrollTop = 0;\n            document.body.setAttribute('style', 'overflow:hidden;');\n        \n        } else if (isMenuOverflow && menu.classList.contains('hidden')) {\n            document.body.removeAttribute('style', 'overflow:hidden;');\n            menu.removeAttribute('style');\n        }\n\n        const chevron = this.shadowRoot.querySelector(\"#menu-chevron-icon\");\n        if (chevron !== null) {\n            chevron.name = menu.classList.contains('hidden') ? 'chevron-down' : 'chevron-up';\n        }\n    }\n\n    hideMenu() {\n        const menu = this.shadowRoot.querySelector(\"ul.menu\");\n        if (menu && !menu.classList.contains('hidden'))\n            this.toggleMenu();\n    }\n\n    static get styles() {\n        // language=css\n        return css`\n            ${commonStyles.getThemeCSS()}\n            ${commonStyles.getGeneralCSS()}\n\n            .hidden {display: none}\n\n            h1.title {\n                margin-bottom: 0;\n                font-weight: 300;\n            }\n\n            #main {\n                display: grid;\n                grid-template-columns: minmax(180px, 17%) minmax(0, auto);\n                grid-template-rows: min-content min-content 1fr min-content;\n                grid-template-areas: \"header header\" \"headline headline\" \"sidebar main\" \"footer footer\";\n                max-width: 1400px;\n                margin: auto;\n                min-height: 100vh;\n            }\n\n            #main-logo {\n                padding: 0 50px 0 0;\n            }\n\n            header {\n                grid-area: header;\n                display: grid;\n                grid-template-columns: 50% 1px auto;\n                grid-template-rows: 60px 60px;\n                grid-template-areas: \"hd1-left hd1-middle hd1-right\" \"hd2-left . hd2-right\";\n                width: 100%;\n                max-width: 1060px;\n                margin: 0 auto;\n            }\n\n            aside { grid-area: sidebar; margin: 15px 15px; }\n            #headline { grid-area: headline; margin: 10px; text-align: center; }\n            main { grid-area: main; margin: 15px 15px; }\n            footer { grid-area: footer; margin: 15px; text-align: right; }\n\n            header .hd1-left {\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                grid-area: hd1-left;\n                text-align: right;\n                padding-right: 20px;\n            }\n\n            header .hd1-middle {\n                grid-area: hd1-middle;\n                background-color: #000;\n                background: linear-gradient(180deg, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 85%, rgba(0,0,0,0) 90%);\n            }\n\n            header .hd1-right {\n                grid-area: hd1-right;\n                display: flex;\n                justify-content: flex-start;\n                padding: 0 20px;\n                min-width: 0;\n                align-items: center;\n            }\n\n            header .hd1-right .auth-button {\n                min-width: 0;\n            }\n\n            header .hd2-left {\n                grid-area: hd2-left;\n                display: flex;\n                flex-direction: column;\n                white-space: nowrap;\n            }\n\n            header .hd2-left .header {\n                margin-left: 50px;\n            }\n\n            header .hd2-left a:hover {\n                color: #fff;\n                background-color: #000;\n            }\n\n            header .hd2-right {\n                grid-area: hd2-right;\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                text-align: right;\n            }\n\n            header a {\n                color: black;\n                display: inline;\n            }\n\n            aside ul.menu, footer ul.menu {\n                list-style: none;\n            }\n\n            ul.menu li.close {\n                display: none;\n            }\n\n            footer {\n                display: flex;\n                justify-content: flex-end;\n                flex-wrap: wrap;\n            }\n\n            footer > * {\n                margin: 0.5em 0 0 1em;\n            }\n\n            footer a {\n                border-bottom: 1px solid rgba(0,0,0,0.3);\n                padding: 0;\n            }\n\n            footer a:hover {\n                color: #fff;\n                background-color: #000;\n            }\n\n            /* We don't allow inline-svg */\n            /*\n            footer .int-link-external::after {\n                content: \"\\\\00a0\\\\00a0\\\\00a0\\\\00a0\";\n                background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%225.6842mm%22%20width%3D%225.6873mm%22%20version%3D%221.1%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20viewBox%3D%220%200%2020.151879%2020.141083%22%3E%3Cg%20transform%3D%22translate(-258.5%20-425.15)%22%3E%3Cpath%20style%3D%22stroke-linejoin%3Around%3Bstroke%3A%23000%3Bstroke-linecap%3Around%3Bstroke-width%3A1.2%3Bfill%3Anone%22%20d%3D%22m266.7%20429.59h-7.5029v15.002h15.002v-7.4634%22%2F%3E%3Cpath%20style%3D%22stroke-linejoin%3Around%3Bstroke%3A%23000%3Bstroke-linecap%3Around%3Bstroke-width%3A1.2%3Bfill%3Anone%22%20d%3D%22m262.94%20440.86%2015.002-15.002%22%2F%3E%3Cpath%20style%3D%22stroke-linejoin%3Around%3Bstroke%3A%23000%3Bstroke-linecap%3Around%3Bstroke-width%3A1.2%3Bfill%3Anone%22%20d%3D%22m270.44%20425.86h7.499v7.499%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E');\n                background-size:contain;\n                background-repeat: no-repeat;\n                background-position:center center;\n                margin: 0 0.5% 0 1.5%;\n                font-size:94%;\n            } \n            */\n\n            .menu a {\n                padding: 0.3em;\n                font-weight: 300;\n                color: #000;\n                display: block;\n            }\n\n            .menu a:hover {\n                color: #E4154B;\n            }\n\n            .menu a.selected {\n                color: var(--dbp-light);\n                background-color: var(--dbp-dark);\n            }\n\n            aside .subtitle {\n                display: none;\n                color: #4a4a4a;\n                font-size: 1.25rem;\n                font-weight: 300;\n                line-height: 1.25;\n                cursor: pointer;\n                text-align: center;\n            }\n\n            ul.menu.hidden {\n                display: block;\n            }\n\n            a { transition: background-color 0.15s ease 0s, color 0.15s ease 0s; }\n\n            .description {\n                text-align: left;\n                margin-bottom: 1rem;\n                display: none;\n            }\n\n            @media (max-width: 680px) {\n                #main {\n                    grid-template-columns: minmax(0, auto);\n                    grid-template-rows: min-content min-content min-content 1fr min-content;\n                    grid-template-areas: \"header\" \"headline\" \"sidebar\" \"main\" \"footer\";\n                }\n\n                header {\n                    grid-template-rows: 40px;\n                    grid-template-areas: \"hd1-left hd1-middle hd1-right\";\n                }\n\n                header .hd2-left, header .hd2-right {\n                    display: none;\n                }\n\n                aside {\n                    margin: 0;\n                    position: sticky;\n                    top: 0;\n                    width: 100%;\n                    background-color: white;\n                    z-index: 10;\n                }\n\n                aside h2.subtitle {\n                    display: block;\n                    border-bottom: 1px solid black;\n                    padding: 0.5em 0.5em;\n                }\n\n                aside .menu {\n                    border-bottom: black 1px solid;\n                    border-top-width: 0;\n                    width: 100%;\n                    position: absolute;\n                    background-color: white;\n                    z-index: 10;\n                }\n\n                .menu li {\n                    padding: 7px;\n                }\n\n                .menu a {\n                    padding: 8px;\n                }\n\n                ul.menu li.close {\n                    display: block;\n                    padding: 0 15px 15px 15px;\n                    text-align: right;\n                    cursor: pointer;\n                }\n\n                ul.menu.hidden {\n                    display: none;\n                }\n            }\n        `;\n    }\n\n    _createActivityElement(activity) {\n        // We have to create elements dynamically based on a tag name which isn't possible with lit-html.\n        // This means we pass the finished element to lit-html and have to handle element caching and\n        // event binding ourselves.\n\n        if (this._lastElm !== undefined) {\n            if (this._lastElm.tagName.toLowerCase() == activity.element.toLowerCase()) {\n                return this._lastElm;\n            } else {\n                this._onActivityRemoved(this._lastElm);\n                this._lastElm = undefined;\n            }\n        }\n\n        this.track('renderActivity', activity.element);\n\n        const elm = document.createElement(activity.element);\n        this._onActivityAdded(elm);\n        this._lastElm = elm;\n        return elm;\n    }\n\n    _onActivityAdded(element) {\n        for(const key of this.topic.attributes || []) {\n            let value = sessionStorage.getItem('dbp-attr-' + key);\n            if (value !== null) {\n                element.setAttribute(key, value);\n            }\n        }\n        this._attrObserver.observe(element, {attributes: true, attributeFilter: this.topic.attributes});\n    }\n\n    _onActivityRemoved(element) {\n        this._attrObserver.disconnect();\n    }\n\n    track(action, message) {\n        this.sendSetPropertyEvent('analytics-event', {'category': action, 'action': message});\n    }\n\n    _renderActivity() {\n        const act = this.metadata[this.activeView];\n        if (act === undefined)\n            return html``;\n\n        const elm =  this._createActivityElement(act);\n\n        // add subscriptions for the provider component\n        if (act.subscribe !== undefined) {\n            elm.setAttribute(\"subscribe\", act.subscribe);\n        }\n\n        // only add the entry-point-url attribute if it isn't subscribed\n        if (act.subscribe === undefined || !act.subscribe.includes(\"entry-point-url:\")) {\n            elm.setAttribute(\"entry-point-url\", this.entryPointUrl);\n        }\n\n        // only add the lang attribute if it isn't subscribed\n        if (act.subscribe === undefined || !act.subscribe.includes(\"lang:\")) {\n            elm.setAttribute(\"lang\", this.lang);\n        }\n\n        return elm;\n    }\n\n    render() {\n        const getSelectClasses = (name => {\n            return classMap({selected: this.activeView === name});\n        });\n\n        // We hide the app until we are either fully logged in or logged out\n        // At the same time when we hide the main app we show the main slot (e.g. a loading spinner)\n        const appHidden = (this._loginStatus == 'unknown' || this._loginStatus == 'logging-in');\n        const mainClassMap = classMap({hidden: appHidden});\n        const slotClassMap = classMap({hidden: !appHidden});\n\n        // XXX: Safari doesn't like CSS being applied to slots or via HTML,\n        // so we have to remove the slow instead of hiding it\n        if (!appHidden) {\n            this.updateComplete.then(() => {\n                const slot = this.shadowRoot.querySelector(\"slot\");\n                if (slot)\n                    slot.remove();\n            });\n        }\n\n        const prodClassMap = classMap({hidden: this.env === 'production' || this.env === 'demo' || this.env === ''});\n\n        this.updatePageTitle();\n\n        // build the menu\n        let menuTemplates = [];\n        for (let routingName of this.routes) {\n            const data = this.metadata[routingName];\n            const requiredRoles = data['required_roles'];\n            let visible = data['visible'];\n\n            // Hide them until the user is logged in and we knwo the roles of the user\n            for (let role of requiredRoles) {\n                if (!this._roles.includes(role)) {\n                    visible = false;\n                    break;\n                }\n            }\n\n            if (visible) {\n                menuTemplates.push(html`<li><a @click=\"${(e) => this.onMenuItemClick(e)}\" href=\"${this.router.getPathname({component: routingName})}\" data-nav class=\"${getSelectClasses(routingName)}\" title=\"${this.metaDataText(routingName, \"description\")}\">${this.metaDataText(routingName, \"short_name\")}</a></li>`);\n            }\n        }\n\n        const imprintUrl = this.lang === \"en\" ?\n            \"https://krakenh2020.eu/legal-notice\" :\n            \"https://krakenh2020.eu/legal-notice\";\n\n        const kc = this.keycloakConfig;\n\n        return html`\n            <slot class=\"${slotClassMap}\"></slot>\n            <dbp-auth-keycloak subscribe=\"requested-login-status\" lang=\"${this.lang}\" entry-point-url=\"${this.entryPointUrl}\" url=\"${kc.url}\" realm=\"${kc.realm}\" client-id=\"${kc.clientId}\" silent-check-sso-redirect-uri=\"${kc.silentCheckSsoRedirectUri || ''}\" scope=\"${kc.scope || ''}\"  idp-hint=\"${kc.idpHint || ''}\" load-person ?force-login=\"${kc.forceLogin}\" ?try-login=\"${!kc.forceLogin}\"></dbp-auth-keycloak>\n            <dbp-matomo subscribe=\"auth,analytics-event\" endpoint=\"${this.matomoUrl}\" site-id=\"${this.matomoSiteId}\" git-info=\"${this.gitInfo}\"></dbp-matomo>\n            <div class=\"${mainClassMap}\">\n            <div id=\"main\">\n                <dbp-notification lang=\"${this.lang}\"></dbp-notification>\n                <header>\n                    <div class=\"hd1-left\">\n                        <dbp-language-select lang=\"${this.lang}\"></dbp-language-select>\n                    </div>\n                    <div class=\"hd1-middle\">\n                    </div>\n                    <div class=\"hd1-right\">\n                        <dbp-auth-menu-button subscribe=\"auth\" class=\"auth-button\" lang=\"${this.lang}\"></dbp-auth-menu-button>\n                    </div>\n                    <div class=\"hd2-left\">\n                        <div class=\"header\">\n                            ${this.shellName}<br>${this.shellSubname}\n                        </div>\n                    </div>\n                    <div class=\"hd2-right\">\n                        <dbp-tugraz-logo id=\"main-logo\" lang=\"${this.lang}\" class=\"${classMap({hidden: this.noBrand})}\"></dbp-tugraz-logo>\n                    </div>\n                </header>\n                <div id=\"headline\">\n                    <h1 class=\"title\">${this.topicMetaDataText('name')}</h1>\n                </div>\n                <aside>\n                    <h2 class=\"subtitle\" @click=\"${this.toggleMenu}\">\n                        ${this.subtitle}\n                        <dbp-icon name=\"chevron-down\" style=\"color: red\" id=\"menu-chevron-icon\"></dbp-icon>\n                    </h2>\n                    <ul class=\"menu hidden\">\n                        ${menuTemplates}\n                        <li class=\"close\" @click=\"${this.hideMenu}\"><dbp-icon name=\"close\" style=\"color: red\"></dbp-icon></li>\n                    </ul>\n                </aside>\n\n                <main>\n                    <p class=\"description\">${this.description}</p>\n                    ${ this._renderActivity() }\n                </main>\n\n                <footer>\n                    <a target=\"_blank\" rel=\"noopener\" class=\"int-link-external\" href=\"https://github.com/site/privacy/\">${i18n.t('privacy-policy')}</a>\n                    <a target=\"_blank\" rel=\"noopener\" class=\"int-link-external\" href=\"${imprintUrl}\">${i18n.t('imprint')}</a>\n                    <a rel=\"noopener\" class=\"int-link-external\" href=\"mailto:smore@tugraz.at\">${i18n.t('contact')}</a>\n                    <dbp-build-info class=\"${prodClassMap}\" git-info=\"${this.gitInfo}\" env=\"${this.env}\" build-url=\"${this.buildUrl}\" build-time=\"${this.buildTime}\"></dbp-build-info>\n                </footer>\n            </div>\n            </div>\n        `;\n    }\n}","import {AppShell} from '@dbp-toolkit/app-shell';\nimport * as commonUtils from '@dbp-toolkit/common/utils';\n\ncommonUtils.defineCustomElement('vc4sm-frontend', AppShell);\n"],"names":["i18n","createInstance","en","de","createI18nInstance","cloneInstance","LanguageSelect","AdapterLitElement","constructor","_lang","languages","onExternalChange","this","bind","t","_getNextLanguage","lang","index","indexOf","next","_getPreviousLanguage","prev","length","type","String","Array","value","oldValue","oldNext","requestUpdate","event","CustomEvent","bubbles","composed","detail","dispatchEvent","sendSetPropertyEvent","changeLanguage","commonStyles.getThemeCSS","css","e","connectedCallback","window","addEventListener","disconnectedCallback","document","removeEventListener","onClick","preventDefault","render","linkTitle","html","toUpperCase","send","options","cancelable","alert","undefined","summary","body","console","log","JSONLD","baseApiUrl","entities","idToEntityNameMatchList","entityName","apiUrl","successFnc","failureFnc","instances","successFunctions","failureFunctions","push","token","initStarted","doInitialization","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","status","json","JSON","parse","responseText","entryPoints","property","startsWith","toLowerCase","apiDocUrl","utils.parseLinkHeader","getResponseHeader","docXhr","gatherEntities","executeFailureFunctions","supportedClasses","baseUrl","utils.parseBaseUrl","forEach","classData","entryPoint","instance","fnc","message","notify","getEntityForIdentifier","identifier","getEntityNameForIdentifier","getEntityForEntityName","getApiUrlForIdentifier","entity","Error","getApiUrlForEntityName","getApiIdentifierList","keys","expandMember","member","context","result","key","Object","compactMember","localContext","transformMembers","data","members","otherContext","results","that","assertType","condition","args","TypeError","format","i","replace","anyToString","x","prototype","toString","call","currentErrorHandler","defineProperty","exports","Global","self","global","globalThis","currentWarnHandler","Warning","code","warn","_a","stack","_b","InitEventWasCalledWhileDispatching","FalsyWasAssignedToCancelBubble","TruthyWasAssignedToReturnValue","NonCancelableEventWasCanceled","CanceledInPassiveListener","EventListenerWasDuplicated","OptionWasIgnored","InvalidEventListener","InvalidAttributeHandler","Event","NONE","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","eventInitDict","enumerable","opts","internalDataMap","set","Boolean","target","currentTarget","stopPropagationFlag","stopImmediatePropagationFlag","canceledFlag","inPassiveListenerFlag","dispatchFlag","timeStamp","Date","now","$","composedPath","stopPropagation","stopImmediatePropagation","setCancelFlag","initEvent","WeakMap","name","retv","get","getOwnPropertyNames","DOMException","setPrototypeOf","ErrorCodeMap","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","VALIDATION_ERR","TYPE_MISMATCH_ERR","SECURITY_ERR","NETWORK_ERR","ABORT_ERR","URL_MISMATCH_ERR","QUOTA_EXCEEDED_ERR","TIMEOUT_ERR","INVALID_NODE_TYPE_ERR","DATA_CLONE_ERR","defineErrorCodeProperties","obj","configurable","EventWrapper","getWrapperClassOf","cancelBubble","defaultPrevented","internalDataMap$1","original","defineRedirectDescriptor","$$1","super","returnValue","wrapperClassCache","originalEvent","getPrototypeOf","wrapper","BaseEventWrapper","originalPrototype","CustomEventWrapper","defineWrapper","d","getOwnPropertyDescriptor","isCapture","listener","flags","isPassive","isOnce","isRemoved","invokeCallback","callback","handleEvent","thrownError","maybeError","error","ErrorEvent","process","emit","reportError","findIndexOfListener","listeners","capture","addListener","list","passive","once","signal","signalListener","removeListener","createListener","cow","removeListenerAt","disableCow","setRemoved","filter","_","splice","ensureListenerList","listenerMap","attrCallback","attrListener","EventTarget","internalDataMap$2","create","type0","callback0","options0","$$2","assertCallback","normalizeAddOptions","aborted","warnDuplicate","normalizeOptions","wrap","eventData","msg","captureStackTrace","defineProperties","keys$1","getEventAttributeValue","setEventAttributeValue","defineEventAttributeCallback","upsertEventAttributeListener","removeEventAttributeListener","defineEventAttribute","_eventClass","types","CustomEventTarget","async","importKeycloak","keycloakSrc","import","_keycloakMod","Keycloak","KeycloakWrapper","baseURL","realm","clientId","silentCheckSsoUri","idpHint","_baseURL","_realm","_clientId","_keycloak","_initDone","_silentCheckSsoUri","_idpHint","_checkId","MIN_VALIDITY","CHECK_INTERVAL","DEBUG","_onVisibilityChanged","close","visibilityState","authenticated","_checkTokeHasExpired","_onChanged","_onReady","refreshed","updateToken","assert","minValidity","clearInterval","setInterval","url","onTokenExpired","_onTokenExpired","onAuthRefreshSuccess","onAuthRefreshError","onAuthLogout","_onAuthLogout","onAuthSuccess","_onAuthSuccess","onAuthError","onReady","init","_ensureInstance","promiseType","pkceMethod","urlOrPath","URL","href","location","ensureURL","ms","promise","timeout","Promise","resolve","reject","id","setTimeout","clearTimeout","race","promiseTimeout","_keycloakInit","catch","isLoggingIn","search","_ensureInit","language","scope","login","kcLocale","locale","clearToken","logout","LoginStatus","freeze","UNKNOWN","LOGGING_IN","LOGGED_IN","LOGGING_OUT","LOGGED_OUT","AuthKeycloak","forceLogin","loadPerson","subject","personId","tryLogin","person","entryPointUrl","_loginStatus","requestedLoginStatus","keycloakUrl","silentCheckSsoRedirectUri","_onKCChanged","update","changedProperties","propName","_kcwrapper","_setLoginStatus","kc","newPerson","tokenChanged","idTokenParsed","preferred_username","sendSetPropertyEvents","initialize","jsonld","fetch","headers","then","response","auth","Cypress","DBPAuth","doInitializationOnce","force","properties","attribute","_this2","handleLogin","ScopedElementsMixin","AuthMenuButton","showImage","closeDropdown","onWindowResize","Icon","updateDropdownWidth","dropdown","shadowRoot","querySelector","viewportOffset","getBoundingClientRect","spaceToRIght","innerWidth","left","setAttribute","onLoginClicked","onLogoutClicked","setChevron","chevron","onDropdownClick","classList","toggle","contains","querySelectorAll","el","remove","renderLoggedIn","imageURL","image","renderLoggedOut","unsafeHTML","loggedIn","Notification","DBPLitElement","notificationBlock","notificationId","dt","getTime","c","r","Math","random","floor","createUUID","icon","iconHTML","summaryHTML","innerHTML","messageId","removeMessageId","updateComplete","messageElementId","element","removeChild","commonStyles.getGeneralCSS","commonStyles.getNotificationCSS","str","tokens","char","count","pattern","j","charCodeAt","lexer","prefixes","defaultPattern","escapeString","delimiter","path","tryConsume","mustConsume","nextType","consumeText","prefix","suffix","modifier","name_1","pattern_1","match","re","decode","pathname","m","exec","params","_loop_1","split","map","regexpToFunction","pathToRegexp","sensitive","stringToRegexp","strict","start","_c","end","_d","encode","endsWith","route","_i","tokens_1","mod","endToken","isEndDelimited","RegExp","tokensToRegexp","groupsRegex","execResult","source","regexpToRegexp","isArray","paths","parts","join","arrayToRegexp","val","decodeURIComponent","err","matchRoute","parentParams","matchResult","childMatches","childIndex","routeToSkip","done","rt","children","assign","charAt","substr","childRoute","parent","childMatch","resolveRoute","action","UniversalRouter","routes","root","pathnameOrContext","matches","nextMatches","_this","router","currentContext","resume","prevResult","parentRoute","isChildRoute","errorHandler","cacheRoutes","routesByName","has","generateUrls","ReferenceError","Map","regexpByRoute","encodeURIComponent","routeName","clear","regexp","fullPath","toPath","reFlags","validate","optional","repeat","segment","test","typeOfMessage","tokensToFunction","stringifyQueryParams","queryParams","_keys","query","Router","unioptions","getState","setState","setStateFromCurrentLocation","dispatchLocationChanged","oldPathName","page","newPathname","getPathname","referrerUrl","history","replaceState","pushState","updateFromPathname","partialState","combined","BuildInfo","env","gitInfo","buildUrl","buildTime","commonStyles.getTagCSS","date","TUGrazLogo","AppShellWelcome","LitElement","app","_app","metadata","itemTemplates","switchActivity","switchComponent","routing_name","entries","description","appname","topic","appWelcomeMeta","visible","required_roles","pushEvent","_paq","commonUtils.defineCustomElement","MatomoElement","endpoint","siteId","isRunning","lastEvent","analyticsEvent","loginStatus","Number","setupMatomo","category","g","createElement","s","getElementsByTagName","defer","src","parentNode","insertBefore","content","getElementById","reason","AppShell","activeView","subtitle","basePath","keycloakConfig","noWelcomePage","menuHeight","_roles","matomoUrl","matomoSiteId","_attrObserver","MutationObserver","onAttributeObserved","shellName","shellSubname","noBrand","mutationsList","observer","mutation","attributeName","getAttribute","sessionStorage","setItem","topicURL","fetchOne","ok","jsondata","promises","activity","activities","actURL","p","module_src","unshift","customElements","initRouter","component","componentTag","state","updateLangIfChanged","reflect","fetchMetadata","documentElement","activeMetaDataText","onMenuItemClick","className","includes","hideMenu","onLanguageChanged","newLang","changed","offset","pageYOffset","updateFunc","header","title","style","getComputedStyle","marginTop","isNaN","parseInt","marginBottom","topValue","height","scrollTo","updatePageTitle","importNotify","metaDataText","routingName","topicMetaDataText","toggleMenu","menu","clientHeight","bottom","isMenuOverflow","innerHeight","scrollTop","removeAttribute","_createActivityElement","_lastElm","tagName","_onActivityRemoved","track","elm","_onActivityAdded","attributes","getItem","observe","attributeFilter","disconnect","_renderActivity","act","subscribe","getSelectClasses","classMap","selected","appHidden","mainClassMap","hidden","slotClassMap","slot","prodClassMap","menuTemplates","requiredRoles","role","imprintUrl"],"mappings":"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"}